(function(root){var exports=undefined,module=undefined,require=undefined;var define=undefined;var self=root,window=root,global=root,globalThis=root;(function(){/*gmme-for-minigames_v1.14.2*/!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).GMMEForMiniGames=e.GMMEForMiniGames||{});}(this,function(exports){var HWPGMEError;exports.HWPGMEError=void 0,HWPGMEError=exports.HWPGMEError||(exports.HWPGMEError={}),HWPGMEError[HWPGMEError.SUCCESS=0]="SUCCESS",HWPGMEError[HWPGMEError.INNER_ERROR=-1]="INNER_ERROR",HWPGMEError[HWPGMEError.PARAM_INVALID=1002]="PARAM_INVALID",HWPGMEError[HWPGMEError.ENGINE_RUNTIME_NOT_SUPPORT=3001]="ENGINE_RUNTIME_NOT_SUPPORT",HWPGMEError[HWPGMEError.ENGINE_RUNTIME_VERSION_NOT_SUPPORT=3002]="ENGINE_RUNTIME_VERSION_NOT_SUPPORT",HWPGMEError[HWPGMEError.READ_LOCAL_FILE_FAILED=3003]="READ_LOCAL_FILE_FAILED",HWPGMEError[HWPGMEError.PLAY_AUDIO_FAILED=3004]="PLAY_AUDIO_FAILED",HWPGMEError[HWPGMEError.RECORD_AUDIO_MSG_FAILED=3005]="RECORD_AUDIO_MSG_FAILED",HWPGMEError[HWPGMEError.GET_AGC_TOKEN_ERROR=3017]="GET_AGC_TOKEN_ERROR",HWPGMEError[HWPGMEError.LAST_RECODING_NOT_END=3026]="LAST_RECODING_NOT_END",HWPGMEError[HWPGMEError.LAST_PLAY_AUDIO_MSG_NOT_END=3029]="LAST_PLAY_AUDIO_MSG_NOT_END",HWPGMEError[HWPGMEError.CURRENT_PLAY_AUDIO_MSG_NOT_END=3035]="CURRENT_PLAY_AUDIO_MSG_NOT_END",HWPGMEError[HWPGMEError.REQUEST_SEND_TIMEOUT=3036]="REQUEST_SEND_TIMEOUT",HWPGMEError[HWPGMEError.GXE_AUTH_FAIL=4001]="GXE_AUTH_FAIL",HWPGMEError[HWPGMEError.TOKEN_INVALID=4002]="TOKEN_INVALID",HWPGMEError[HWPGMEError.REQUEST_TOO_FREQUENT=4003]="REQUEST_TOO_FREQUENT",HWPGMEError[HWPGMEError.AUTH_FAILED=4004]="AUTH_FAILED",HWPGMEError[HWPGMEError.RTM_CONNECT_MAX_OVER=4005]="RTM_CONNECT_MAX_OVER",HWPGMEError[HWPGMEError.RMT_RESOURCE_NO_AVAILABLE=4006]="RMT_RESOURCE_NO_AVAILABLE",HWPGMEError[HWPGMEError.RTM_DISCONNECTION=4007]="RTM_DISCONNECTION",HWPGMEError[HWPGMEError.SERVICE_NOT_ENABLE=5004]="SERVICE_NOT_ENABLE",HWPGMEError[HWPGMEError.AUDIO_MESSAGE_NOT_ENABLE=5005]="AUDIO_MESSAGE_NOT_ENABLE",HWPGMEError[HWPGMEError.RTM_NOT_ENABLE=5006]="RTM_NOT_ENABLE",HWPGMEError[HWPGMEError.APPLY_FILE_UPLOAD_FAILED=6015]="APPLY_FILE_UPLOAD_FAILED",HWPGMEError[HWPGMEError.MAX_CHANNEL_COUNT_OVER_LIMIT=6024]="MAX_CHANNEL_COUNT_OVER_LIMIT",HWPGMEError[HWPGMEError.MAX_PLAYER_COUNT_OVER_LIMIT=6025]="MAX_PLAYER_COUNT_OVER_LIMIT",HWPGMEError[HWPGMEError.RECEIVERS_NOT_EXIST_OR_OFFLINE=6026]="RECEIVERS_NOT_EXIST_OR_OFFLINE",HWPGMEError[HWPGMEError.RE_SUBSCRIBE_CHANNEL_FAILED=6027]="RE_SUBSCRIBE_CHANNEL_FAILED",HWPGMEError[HWPGMEError.MESSAGE_CONTENT_IS_INVALID=6029]="MESSAGE_CONTENT_IS_INVALID",HWPGMEError[HWPGMEError.CHANNEL_DOSE_NOT_EXIST=6030]="CHANNEL_DOSE_NOT_EXIST",HWPGMEError[HWPGMEError.PLAYER_CHANNEL_UNSUBSCRIBED=6031]="PLAYER_CHANNEL_UNSUBSCRIBED",HWPGMEError[HWPGMEError.FILE_NOT_EXIST=6034]="FILE_NOT_EXIST",HWPGMEError[HWPGMEError.NET_ERROR=9001]="NET_ERROR";const AUDIO_PLAY_ERROR_MAPPER=new Map();AUDIO_PLAY_ERROR_MAPPER.set(10001,exports.HWPGMEError.INNER_ERROR),AUDIO_PLAY_ERROR_MAPPER.set(10002,exports.HWPGMEError.NET_ERROR),AUDIO_PLAY_ERROR_MAPPER.set(10003,exports.HWPGMEError.PLAY_AUDIO_FAILED),AUDIO_PLAY_ERROR_MAPPER.set(10004,exports.HWPGMEError.PLAY_AUDIO_FAILED),AUDIO_PLAY_ERROR_MAPPER.set(-1,exports.HWPGMEError.INNER_ERROR);const getAudioError=function(e){const t=AUDIO_PLAY_ERROR_MAPPER.get(e);return t||exports.HWPGMEError.PLAY_AUDIO_FAILED;};class HWPGMEException{constructor(e,t){this.code=e,this.message=t;}}class HWPGMERtn{constructor(e,t){this.code=e,this.message=t;}}class RtnCodeMapper{static initRtn(){RtnCodeMapper.put(-1,exports.HWPGMEError.INNER_ERROR,"inner error"),RtnCodeMapper.put(0,exports.HWPGMEError.SUCCESS,"success"),RtnCodeMapper.put(1,exports.HWPGMEError.GXE_AUTH_FAIL,"GXES authentication failed."),RtnCodeMapper.put(2,exports.HWPGMEError.GXE_AUTH_FAIL,"Session authentication failed."),RtnCodeMapper.put(3001,exports.HWPGMEError.PARAM_INVALID,"AppId invalid parameter."),RtnCodeMapper.put(1001,exports.HWPGMEError.PARAM_INVALID,"Invalid parameters"),RtnCodeMapper.put(1002,exports.HWPGMEError.INNER_ERROR,"db operate error."),RtnCodeMapper.put(1003,exports.HWPGMEError.INNER_ERROR,"dcs operate error."),RtnCodeMapper.put(1004,exports.HWPGMEError.INNER_ERROR,"inner error."),RtnCodeMapper.put(1005,exports.HWPGMEError.INNER_ERROR,"fatal error."),RtnCodeMapper.put(1011,exports.HWPGMEError.GXE_AUTH_FAIL,"Sign authentication failed."),RtnCodeMapper.put(4003,exports.HWPGMEError.INNER_ERROR,"request repeated"),RtnCodeMapper.put(exports.HWPGMEError.NET_ERROR,exports.HWPGMEError.NET_ERROR,"Network error"),RtnCodeMapper.put(100105,exports.HWPGMEError.TOKEN_INVALID,"token invalid"),RtnCodeMapper.put(103001,exports.HWPGMEError.REQUEST_TOO_FREQUENT,"request too frequent trigger rate limiter"),RtnCodeMapper.put(103002,exports.HWPGMEError.AUTH_FAILED,"ticket auth failed"),RtnCodeMapper.put(103003,exports.HWPGMEError.REQUEST_TOO_FREQUENT,"request too frequent trigger rate limiter"),RtnCodeMapper.put(103004,exports.HWPGMEError.AUTH_FAILED,"ticket auth failed"),RtnCodeMapper.put(103006,exports.HWPGMEError.RTM_CONNECT_MAX_OVER,"over max websocket connect"),RtnCodeMapper.put(103007,exports.HWPGMEError.AUTH_FAILED,"no auth"),RtnCodeMapper.put(500004,exports.HWPGMEError.PARAM_INVALID,"Invalid parameters"),RtnCodeMapper.put(500001,exports.HWPGMEError.GXE_AUTH_FAIL,"Developer authentication failed."),RtnCodeMapper.put(500002,exports.HWPGMEError.GXE_AUTH_FAIL,"The user information is not queried."),RtnCodeMapper.put(500007,exports.HWPGMEError.SERVICE_NOT_ENABLE,"The project does not exist or the service is not enabled."),RtnCodeMapper.put(500008,exports.HWPGMEError.INNER_ERROR,"Failed to query the app information from the AGC."),RtnCodeMapper.put(500010,exports.HWPGMEError.GXE_AUTH_FAIL,"The app fails to verify the signature."),RtnCodeMapper.put(500011,exports.HWPGMEError.INNER_ERROR,"Failed to query the app key information."),RtnCodeMapper.put(100113,exports.HWPGMEError.GXE_AUTH_FAIL,"The app does not belong to the current project."),RtnCodeMapper.put(100114,exports.HWPGMEError.GXE_AUTH_FAIL,"Verifying the signature param is invalid."),RtnCodeMapper.put(6e5,exports.HWPGMEError.INNER_ERROR,"MME internal system error."),RtnCodeMapper.put(600001,exports.HWPGMEError.PARAM_INVALID,"Invalid parameter."),RtnCodeMapper.put(600002,exports.HWPGMEError.INNER_ERROR,"MME service db failed"),RtnCodeMapper.put(600041,exports.HWPGMEError.INNER_ERROR,"Failed to generate jwt"),RtnCodeMapper.put(600042,exports.HWPGMEError.INNER_ERROR,"DCS operation error."),RtnCodeMapper.put(600047,exports.HWPGMEError.APPLY_FILE_UPLOAD_FAILED,"Apply file upload failed."),RtnCodeMapper.put(600048,exports.HWPGMEError.PLAY_AUDIO_FAILED,"Apply file download failed."),RtnCodeMapper.put(600049,exports.HWPGMEError.FILE_NOT_EXIST,"file not exist."),RtnCodeMapper.put(600170,exports.HWPGMEError.PLAY_AUDIO_FAILED,"The file has expired."),RtnCodeMapper.put(7e5,exports.HWPGMEError.AUTH_FAILED,"ticket check failed"),RtnCodeMapper.put(700001,exports.HWPGMEError.RMT_RESOURCE_NO_AVAILABLE,"no available ep address"),RtnCodeMapper.put(700006,exports.HWPGMEError.INNER_ERROR,"parse protocol buffer failed"),RtnCodeMapper.put(700007,exports.HWPGMEError.MAX_CHANNEL_COUNT_OVER_LIMIT,"the number of channels joined has reached its maximum"),RtnCodeMapper.put(700008,exports.HWPGMEError.MAX_PLAYER_COUNT_OVER_LIMIT,"the number of players in channel has reached its maximum"),RtnCodeMapper.put(700009,exports.HWPGMEError.TOKEN_INVALID,"server token invalid"),RtnCodeMapper.put(700011,exports.HWPGMEError.RECEIVERS_NOT_EXIST_OR_OFFLINE,"the receiver is not exist or offline"),RtnCodeMapper.put(700012,exports.HWPGMEError.INNER_ERROR,"get player operation lock fail"),RtnCodeMapper.put(700014,exports.HWPGMEError.MESSAGE_CONTENT_IS_INVALID,"the message content is invalid"),RtnCodeMapper.put(700015,exports.HWPGMEError.CHANNEL_DOSE_NOT_EXIST,"the channel does not exist"),RtnCodeMapper.put(700016,exports.HWPGMEError.PLAYER_CHANNEL_UNSUBSCRIBED,"player Channel Unsubscribed");}static put(e,t,r){const n="srcCode:"+e+" reason:"+r;RtnCodeMapper.rtnDict.set(e,new HWPGMERtn(t,n));}static getRtn(e){const t=RtnCodeMapper.rtnDict.get(e);if(t)return t;const r="srcCode:"+e+". unknown msg";return new HWPGMERtn(exports.HWPGMEError.INNER_ERROR,r);}}var ConnectionStatus,MessageType;function __awaiter(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e));}catch(e){i(e);}}function a(e){try{l(n.throw(e));}catch(e){i(e);}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t);})).then(s,a);}l((n=n.apply(e,t||[])).next());});}RtnCodeMapper.rtnDict=new Map(),RtnCodeMapper.initRtn(),function(e){e[e.DISCONNECT=0]="DISCONNECT",e[e.CONNECT=1]="CONNECT";}(ConnectionStatus||(ConnectionStatus={})),exports.MessageType=void 0,MessageType=exports.MessageType||(exports.MessageType={}),MessageType[MessageType.TEXT_MESSAGE=1]="TEXT_MESSAGE",MessageType[MessageType.BINARY_MESSAGE=2]="BINARY_MESSAGE","function"==typeof SuppressedError&&SuppressedError;const HwMmeGwBaseUrl="/gamex-edge-service/v1/gameXClientApi";var GamePlatform,SdkType;!function(e){e.ANDROID="ANDROID",e.IOS="IOS",e.WEB="WEB",e.WINDOWS="WINDOWS",e.MACOS="MACOS",e.HUAWEI_QG_GAME="HUAWEI_QG_GAME",e.WEIXIN_MINI_GAME="WEIXIN_MINI_GAME",e.BYTEDANCE_MINI_GAME="BYTEDANCE_MINI_GAME";}(GamePlatform||(GamePlatform={})),function(e){e.WEIXIN_MINI_GAME="wxJS",e.HUAWEI_QG_GAME="qgJS",e.BYTEDANCE_MINI_GAME="ttJS";}(SdkType||(SdkType={}));const getRandomBytesWithLength=(e=2)=>{if(e<=0)return[];const t=[];for(;e--;)t.push(Math.floor(255*Math.random()));return t;},getUUID=()=>"xxxxx-xxxxx-xxxxx".replace(/x/g,e=>{const t=getRandomBytesWithLength(2),r=(256*t[0]+t[1])%16|0;return("x"===e?r:3&r|8).toString(16);}),createRequestId=()=>getUUID()+"-"+Date.now();class Logger{constructor(e){this.tagName=e;}debug(...e){console.debug(`[${new Date().toISOString()}] | `,`[GMME] | [${this.tagName}] |`,...e);}info(...e){console.info(`[${new Date().toISOString()}] | `,`[GMME] | [${this.tagName}] |`,...e);}warn(...e){console.warn(`[${new Date().toISOString()}] | `,`[GMME] | [${this.tagName}] |`,...e);}error(...e){console.error(`[${new Date().toISOString()}] | `,`[GMME] | [${this.tagName}] |`,...e);}static getInstance(e){return Logger.loggerInstance.has(e)||Logger.loggerInstance.set(e,new Logger(e)),Logger.loggerInstance.get(e);}}Logger.loggerInstance=new Map();const RequestLog=Logger.getInstance("httpRequest"),DEFAULT_TIMEOUT=5e3;class HttpRequest{post(e,t,r,n=!0){return this.sendRequest(e,t,r,n);}sendRequest(e,t,r,n=!0,o=DEFAULT_TIMEOUT,i=!1){const s=/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?e:"https://gmme-drcn.game.dbankcloud.cn"+e;return new Promise((e,a)=>{const l=new XMLHttpRequest();let c;l.timeout=o,l.responseType="text",i?(l.open("PUT",s,!0),c=t):(l.open("POST",s,!0),c=JSON.stringify(t),l.setRequestHeader("Content-Type","application/json;charset=UTF-8")),r&&Object.entries(r).forEach(([e,t])=>{l.setRequestHeader(e,t);}),l.send(c),l.onerror=function(e){null==RequestLog||RequestLog.error("http onerror",e),a(new HWPGMEException(exports.HWPGMEError.NET_ERROR,"http onerror"));},l.ontimeout=function(e){null==RequestLog||RequestLog.error("http request timeout",e),a(new HWPGMEException(exports.HWPGMEError.NET_ERROR,"http request timeout"));},l.onreadystatechange=function(){if(4===l.readyState)if(200===l.status){if(i){const t=JSON.parse("{}");return void e(t);}const t=JSON.parse(l.responseText);if(n&&t.rtnCode!==exports.HWPGMEError.SUCCESS){const e=RtnCodeMapper.getRtn(t.rtnCode);return void a(new HWPGMEException(e.code,e.message));}e(t);}else null==RequestLog||RequestLog.error(`send the request failed. status is ${l.status}`),a(new HWPGMEException(exports.HWPGMEError.NET_ERROR,`http request failed, status is ${l.status}`));};});}putObs(e,t,r,n=DEFAULT_TIMEOUT){return this.sendRequest(e,t,r,!1,n,!0);}}const httpRequest=new HttpRequest(),CacheLog=Logger.getInstance("GlobalCache");class EngineCache{constructor(){this.engineStateCode=0;}static getInstance(){return EngineCache.instance||(EngineCache.instance=new EngineCache()),EngineCache.instance;}setEngineStateCodes(e=1){this.engineStateCode=e;}getEngineStateCodes(){return this.engineStateCode;}clean(){this.engineStateCode=0;}}class RtmCache{constructor(){this.connectionStatus=ConnectionStatus.DISCONNECT,this.subscribedChannelMap=new Map(),this.reqMsgMap=new Map();}static getInstance(){return RtmCache.instance||(RtmCache.instance=new RtmCache()),RtmCache.instance;}setConnectionStatus(e=ConnectionStatus.CONNECT){this.connectionStatus=e;}getConnectionStatus(){return this.connectionStatus;}getSubscribedChannelMap(){return this.subscribedChannelMap;}addReqMsg(e){this.reqMsgMap.set(e.seq,e);}getReqMsg(e){return this.reqMsgMap.get(e);}removeReqMsg(e){this.reqMsgMap.delete(e);}getTimeoutReqMsg(){const e=new Array(),t=new Array();for(const[r,n]of this.reqMsgMap)n.isTimeOut()&&(e.push(n),t.push(r));return t.forEach(e=>this.reqMsgMap.delete(e)),e;}addSubscribeChannel(e){this.subscribedChannelMap.set(e.channelId,e);}removeSubscribeChannel(e){this.subscribedChannelMap.delete(e);}delChannelPlayerProperties(e,t){const r=this.subscribedChannelMap.get(e);r&&t.forEach(e=>{r.playerProperties&&r.playerProperties[e]&&delete r.playerProperties[e];});}setChannelPlayerProperties(e,t){const r=this.subscribedChannelMap.get(e);r&&(r.playerProperties=t);}setRtmWebsocketClient(e){this.rtmWebSocketClient=e;}getRtmWebsocketClient(){return this.rtmWebSocketClient;}clean(){this.connectionStatus=ConnectionStatus.DISCONNECT,this.subscribedChannelMap.clear(),this.reqMsgMap.clear();}}RtmCache.certPath="";class EngineSession{static setSessionInfo(e){EngineSession.serviceToken=e.serviceToken,EngineSession.appId=e.appId,EngineSession.playerId=e.playerId,EngineSession.openId=e.openId,EngineSession.sdkType=e.sdkType,EngineSession.sdkVersion=e.sdkVersion,EngineSession.platform=e.platform,EngineSession.isEnableAudioMsg=e.isEnableAudioMsg,EngineSession.isEnableRtm=e.isEnableRtm;}static clean(){EngineSession.serviceToken="",EngineSession.appId="",EngineSession.playerId="",EngineSession.openId="";}static getServiceToken(){return EngineSession.serviceToken;}static getAppId(){return EngineSession.appId;}static getPlayerId(){return EngineSession.playerId;}static getOpenId(){return EngineSession.openId;}static getSdkVersion(){return EngineSession.sdkVersion;}static getSdkType(){return EngineSession.sdkType;}static getPlatform(){return EngineSession.platform;}static getEnableAudioMsg(){return EngineSession.isEnableAudioMsg;}static getEnableRtm(){return EngineSession.isEnableRtm;}}EngineSession.serviceToken="",EngineSession.appId="",EngineSession.playerId="",EngineSession.openId="",EngineSession.sdkType="",EngineSession.sdkVersion="",EngineSession.isEnableAudioMsg=!0,EngineSession.isEnableRtm=!0,EngineSession.getReqHeaders=()=>({serviceName:"GameMMEService",sdkType:EngineSession.sdkType,sdkVersionCode:EngineSession.sdkVersion,appId:EngineSession.appId,serviceToken:EngineSession.serviceToken});class ServiceParams{static init(e){var t,r,n,o,i,s,a,l;const c=JSON.parse(e);this.rtmSubscribeChannelMaxLimit=null!==(t=c.rtmSubscribeChannelMaxLimit)&&void 0!==t?t:50,this.rtmTextMessageMaxLength=null!==(r=c.rtmTextMessageMaxLength)&&void 0!==r?r:1024,this.rtmBinaryMessageMaxLength=null!==(n=c.rtmBinaryMessageMaxLength)&&void 0!==n?n:32768,this.rtmMessageChannelMaxReceivers=null!==(o=c.rtmMessageChannelMaxReceivers)&&void 0!==o?o:50,this.rtmPropertyMaxCount=null!==(i=c.rtmPropertyMaxCount)&&void 0!==i?i:5,this.rtmPropertyKeyMaxLength=null!==(s=c.rtmPropertyKeyMaxLength)&&void 0!==s?s:100,this.rtmPropertyValueMaxLength=null!==(a=c.rtmPropertyValueMaxLength)&&void 0!==a?a:1948,this.rtmPlayerPropertyQueryMaxNum=null!==(l=c.rtmPlayerPropertyQueryMaxNum)&&void 0!==l?l:100;}static checkPropertyInvalid(e){if(!e)throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,"param error");const t=Object.keys(e);if(t.length>ServiceParams.rtmPropertyMaxCount)throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,`the number of properties cannot exceed ${ServiceParams.rtmPropertyMaxCount}.`);if(t.some(e=>e.length>ServiceParams.rtmPropertyKeyMaxLength))throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,`the property key cannot exceed ${ServiceParams.rtmPropertyKeyMaxLength}.`);if(Object.values(e).some(e=>!e||e.length>ServiceParams.rtmPropertyValueMaxLength))throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,`the property value cannot exceed ${ServiceParams.rtmPropertyValueMaxLength}.`);}static checkDeletePropertyInvalid(e){if(0===e.length||e.length>ServiceParams.rtmPropertyMaxCount)throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,`the properties cannot be empty and cannot exceed ${ServiceParams.rtmPropertyMaxCount}.`);if(e.some(e=>!e||e.length>ServiceParams.rtmPropertyKeyMaxLength))throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,"the property key does not comply with the specifications.");}static checkParamsInvalid(e,t,r){if(1===(null==e?void 0:e.length)&&e[0]===EngineSession.getOpenId())throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,"can not send message to yourself");if((null==e?void 0:e.length)>ServiceParams.rtmMessageChannelMaxReceivers)throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,"receivers cannot over max:"+ServiceParams.rtmMessageChannelMaxReceivers);if(!(null==r?void 0:r.length))throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,"message cannot be empty");if(t===exports.MessageType.TEXT_MESSAGE&&(null==r?void 0:r.length)>ServiceParams.rtmTextMessageMaxLength)throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,"text message.length cannot over max:"+ServiceParams.rtmTextMessageMaxLength);if(t===exports.MessageType.BINARY_MESSAGE&&(null==r?void 0:r.length)>ServiceParams.rtmBinaryMessageMaxLength)throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,"binary message.length cannot over max:"+ServiceParams.rtmBinaryMessageMaxLength);}static checkMaxRtmSubscribeLimit(e){if(e.length+1>ServiceParams.rtmSubscribeChannelMaxLimit)throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,"subscribe channel cannot over max:"+ServiceParams.rtmSubscribeChannelMaxLimit);}static checkRtmPlayerPropertyQueryMaxNum(e){if(e.length>ServiceParams.rtmPlayerPropertyQueryMaxNum)throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,"rtm player property query num cannot over max:"+ServiceParams.rtmPlayerPropertyQueryMaxNum);}}ServiceParams.rtmSubscribeChannelMaxLimit=50,ServiceParams.rtmTextMessageMaxLength=1024,ServiceParams.rtmBinaryMessageMaxLength=32768,ServiceParams.rtmMessageChannelMaxReceivers=50,ServiceParams.rtmPropertyMaxCount=5,ServiceParams.rtmPropertyKeyMaxLength=100,ServiceParams.rtmPropertyValueMaxLength=1948,ServiceParams.rtmPlayerPropertyQueryMaxNum=100;class PlayerDelegate{static getPlayerId(e){return __awaiter(this,void 0,void 0,function*(){if(0===e.length)return[];const t=[],r=[];for(let n=0;n<e.length;++n){const o=PlayerDelegate.openIdToPlayerId.get(e[n])||"";""===o?r.push(e[n]):t.push(o);}if(0!==r.length){const e=(yield PlayerService.getPlayerList(r,PlayerIdType.OPEN_ID)).playerList;for(let r=0;r<(null==e?void 0:e.length);++r)t.push(e[r].playerId),PlayerDelegate.openIdToPlayerId.set(e[r].openId,e[r].playerId);const n=[],o=[];e.forEach(e=>n.push(e.openId)),r.forEach(e=>{n.includes(e)||o.push(e);}),0!==o.length&&(null==CacheLog||CacheLog.error("These player not exist or offline,openIds:"+o));}return t;});}}PlayerDelegate.openIdToPlayerId=new Map();const PlayerLog=Logger.getInstance("PlayerService"),HwPlayerServiceMethods={login:"client.gmme.player.login",logout:"client.gmme.player.logout",getPlayerList:"client.gmme.player.list"},PlayerIdType={PLAYER_ID:1,OPEN_ID:2};class PlayerService{static login(e){const t={method:HwPlayerServiceMethods.login,cpAccessToken:e.cpAccessToken,clientId:e.clientId,requestId:createRequestId(),openId:e.openId};e.sign&&(t.sign=e.sign,t.nonce=e.nonce,t.timestamp=e.timestamp);const r={serviceName:"GameMMEService",appId:e.appId,sdkVersionCode:e.sdkVersion,sdkType:e.sdkType,platform:e.platform};return null==PlayerLog||PlayerLog.debug("usage player login starts"),httpRequest.post(HwMmeGwBaseUrl,t,r);}static logout(){const e={method:HwPlayerServiceMethods.logout,requestId:createRequestId()};return null==PlayerLog||PlayerLog.debug("usage player logout starts"),httpRequest.post(HwMmeGwBaseUrl,e,EngineSession.getReqHeaders());}static getPlayerList(e,t){const r={method:HwPlayerServiceMethods.getPlayerList,requestId:createRequestId(),idList:e,idType:t};return httpRequest.post(HwMmeGwBaseUrl,r,EngineSession.getReqHeaders());}}var CommonResult;!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED";}(CommonResult||(CommonResult={}));const AuthLog=Logger.getInstance("AgcAuth");class AgcAuth{static getAgcToken(e,t,r){const n={client_id:t,client_secret:r,grant_type:"client_credentials",useJwt:1},o={app_id:e,client_id:t};return httpRequest.post("https://connect-drcn.hispace.dbankcloud.cn/agc/apigw/oauth2/v1/token",n,o,!1).then(e=>{var t,r;if(!e.access_token)throw null==AuthLog||AuthLog.error("agc auth failed:",null===(t=null==e?void 0:e.ret)||void 0===t?void 0:t.msg),new HWPGMEException(exports.HWPGMEError.GET_AGC_TOKEN_ERROR,"get agc token failed. the reason is "+(null===(r=null==e?void 0:e.ret)||void 0===r?void 0:r.msg));return e.access_token;}).catch(e=>{throw e;});}}const EngineHooksLog=Logger.getInstance("EngineHooks");class EventEmitter$1{constructor(){this.events=new Map();}getEvent(e){return this.events.has(e)||this.events.set(e,[]),this.events.get(e);}addEventListener(e,t){var r;this.removeEventListener(e),null===(r=this.getEvent(e))||void 0===r||r.push(t);}removeEventListener(e){this.events.delete(e);}emit(e,...t){var r;try{null===(r=this.getEvent(e))||void 0===r||r.forEach(e=>e(...t));}catch(t){null==EngineHooksLog||EngineHooksLog.error("callback the event [",e," ]failed. The error is ",t);}}clear(e){e?this.events.delete(e):this.events.clear();}}const hooksEventEmitter=new EventEmitter$1(),eventNameWithOutLog=["onGetRtmChannelPlayerProperties","onGetRtmChannelProperties","onGetRtmChannelHistoryMessages","onRtmChannelPlayerPropertiesChanged","onRtmChannelPropertiesChanged","onGetRtmChannelInfo","onReceiveRtmChannelMessage","onReceiveRtmPeerMessage"];class EngineHooks{static setCpEventListener(e,t){hooksEventEmitter.addEventListener(e,t);}static delCpEventListener(e){hooksEventEmitter.removeEventListener(e);}static clearEventListener(){hooksEventEmitter.clear();}static call(e,t,r=[]){eventNameWithOutLog.includes(e)||null==EngineHooksLog||EngineHooksLog.info(`call ${e}. The params is `,JSON.stringify(r)),hooksEventEmitter.emit(e,...r);}}const K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],bytesToWords=e=>{const t=[];let r=0,n=0;for(;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t;},wordsToBytes=e=>{const t=[];let r=0;for(;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t;},bytesToHex=e=>{const t=[];let r=0;for(;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("");},sha256=(e,t)=>{const r=[];let n,o,i,s,a,l,c,p,d,u;for(let m=0;m<e.length;m+=16){n=t[0],o=t[1],i=t[2],s=t[3],a=t[4],l=t[5],c=t[6],p=t[7];for(let t=0;t<64;t++){if(t<16)r[t]=e[t+m];else{const e=r[t-15],n=r[t-2],o=(e<<25|e>>>7)^(e<<14|e>>>18)^e>>>3,i=(n<<15|n>>>17)^(n<<13|n>>>19)^n>>>10;r[t]=o+(r[t-7]>>>0)+i+(r[t-16]>>>0);}const g=n&o^n&i^o&i,h=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22);d=(p>>>0)+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&c)+K[t]+(r[t]>>>0),u=h+g,p=c,c=l,l=a,a=s+d>>>0,s=i,i=o,o=n,n=d+u>>>0;}t[0]=t[0]+n|0,t[1]=t[1]+o|0,t[2]=t[2]+i|0,t[3]=t[3]+s|0,t[4]=t[4]+a|0,t[5]=t[5]+l|0,t[6]=t[6]+c|0,t[7]=t[7]+p|0;}return t;},calculateFileSha256=e=>{let t,r,n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];t=new Uint8Array(e),r=bytesToWords(t),t=null;const o=8*e.byteLength,i=8*e.byteLength,s=Math.floor(o/4294967296),a=4294967295&o;return r[i>>>5]|=128<<24-o%32,r[14+(i+64>>>9<<4)]=s,r[15+(i+64>>>9<<4)]=a,n=sha256(r,n),r=null,bytesToHex(wordsToBytes(n));},REQUEST_METHODS={downloadApply:"client.gmme.audio.file.download.apply",uploadApply:"client.gmme.audio.file.upload.apply",rtmChannelCreate:"client.gmme.rtm.channel.create",audioFileDetect:"client.gmme.audio.file.detect"},FILE_TYPE={voiceMsg:1};class RoomService{static downloadApply(e){const t={method:REQUEST_METHODS.downloadApply,requestId:createRequestId(),fileId:e};return httpRequest.post(HwMmeGwBaseUrl,t,EngineSession.getReqHeaders());}static uploadApply(e,t,r){const n={method:REQUEST_METHODS.uploadApply,requestId:createRequestId(),fileName:e,fileSha256:t,fileSize:r,fileType:FILE_TYPE.voiceMsg};return httpRequest.post(HwMmeGwBaseUrl,n,EngineSession.getReqHeaders());}static uploadFile(e,t,r){const n={};return e.data.fileUploadInfo.uploadHeaders.forEach(e=>{n[e.key]=e.value;}),httpRequest.putObs(e.data.fileUploadInfo.uploadUrl,t,n,r);}static startDetectAudioFile(e){const t={method:REQUEST_METHODS.audioFileDetect,requestId:createRequestId(),fileId:e};return httpRequest.post(HwMmeGwBaseUrl,t,EngineSession.getReqHeaders());}static rtmChannelCreateApply(e){const t={method:REQUEST_METHODS.rtmChannelCreate,requestId:createRequestId(),isFirstConnection:e};return httpRequest.post(HwMmeGwBaseUrl,t,EngineSession.getReqHeaders());}}const RECORD_DURATION=6e4,AudioMsgServiceLog=Logger.getInstance("AudioMsgServiceLog"),NUMBER_REG=new RegExp("^[0-9]*$"),MAX_UPLOAD_MS_TIME_OUT=7e3,MIN_UPLOAD_MS_TIME_OUT=3e3,MAX_UPLOAD_FILE_SIZE=52428800;class AbstractAudioMsgService{constructor(){this.innerAudioContext=null,this.fileSystemManager=null,this._isRecording=!1,this._startRecordingTime=0,this._audioFilePath="";}checkIsRecording(){if(!this._isRecording)return!1;return Date.now()-this._startRecordingTime<=RECORD_DURATION?(EngineHooks.call("onRecordAudioMsg",CommonResult.FAILED,["",exports.HWPGMEError.LAST_RECODING_NOT_END,"The last recording is not end.",0,0]),!0):(null==AudioMsgServiceLog||AudioMsgServiceLog.warn("The last recording does not end properly."),!1);}setRecording(e){this._isRecording=e,e&&(this._startRecordingTime=Date.now());}checkCanPlay(e){return""===e||null===e?(EngineHooks.call("onPlayAudioMsg",CommonResult.FAILED,[e,exports.HWPGMEError.PARAM_INVALID,"filePath is invalid"]),!1):""===this.audioFilePath||(e===this.audioFilePath?EngineHooks.call("onPlayAudioMsg",CommonResult.FAILED,[e,exports.HWPGMEError.CURRENT_PLAY_AUDIO_MSG_NOT_END,"The current playback has not stopped."]):EngineHooks.call("onPlayAudioMsg",CommonResult.FAILED,[e,exports.HWPGMEError.LAST_PLAY_AUDIO_MSG_NOT_END,"The last playback has not stopped."]),!1);}isFileId(e){return NUMBER_REG.test(e);}get audioFilePath(){return this._audioFilePath;}set audioFilePath(e){this._audioFilePath=e;}buildRecordConfig(){return{duration:RECORD_DURATION,sampleRate:8e3,numberOfChannels:1,encodeBitRate:16e3,format:"aac"};}registerAudioEventListener(){this.innerAudioContext.onPlay(()=>{null==AudioMsgServiceLog||AudioMsgServiceLog.debug("onPlay. Begin to play.");}),this.innerAudioContext.onPause(()=>{null==AudioMsgServiceLog||AudioMsgServiceLog.info("onPause play."),this.innerAudioContext.stop(),EngineHooks.call("onPlayAudioMsg",CommonResult.SUCCESS,[this.audioFilePath,exports.HWPGMEError.SUCCESS,""]),this.audioFilePath="";}),this.innerAudioContext.onEnded(()=>{null==AudioMsgServiceLog||AudioMsgServiceLog.info("onEnded play."),""!==this.audioFilePath&&(EngineHooks.call("onPlayAudioMsg",CommonResult.SUCCESS,[this.audioFilePath,exports.HWPGMEError.SUCCESS,""]),this.audioFilePath="");});}destroy(){this.innerAudioContext.stop(),this.innerAudioContext.destroy();}playAudioMsg(e){this.checkCanPlay(e)&&(this.isFileId(e)?RoomService.downloadApply(e).then(t=>{this.innerAudioContext.src=null==t?void 0:t.resourceInfo.url,null==AudioMsgServiceLog||AudioMsgServiceLog.info("Begin to play cloud audioMsg. fileId is ",e),this.startPlayAudioMsg(e);}).catch(e=>{throw e;}):this.checkFileExists(e)?(null==AudioMsgServiceLog||AudioMsgServiceLog.info("Begin to play local audioMsg. filePath is ",e),this.innerAudioContext.src=e,this.startPlayAudioMsg(e)):EngineHooks.call("onPlayAudioMsg",CommonResult.FAILED,[e,exports.HWPGMEError.PARAM_INVALID,"The filePath is not exist."]));}startPlayAudioMsg(e){this.audioFilePath=e,this.innerAudioContext.play();}checkFileExists(e){try{return this.fileSystemManager.accessSync(e),!0;}catch(t){return null==AudioMsgServiceLog||AudioMsgServiceLog.error(e," is not exist. The error is ",t),!1;}}stopPlayAudioMsg(){null==AudioMsgServiceLog||AudioMsgServiceLog.info("Begin to stopPlayAudioMsg."),this.innerAudioContext.stop(),""!==this.audioFilePath&&(EngineHooks.call("onPlayAudioMsg",CommonResult.SUCCESS,[this.audioFilePath,exports.HWPGMEError.SUCCESS,""]),this.audioFilePath="");}uploadAudioMsgFile(e,t){if(null==AudioMsgServiceLog||AudioMsgServiceLog.info("begin to upload the filePath ",e),t>MAX_UPLOAD_MS_TIME_OUT||t<MIN_UPLOAD_MS_TIME_OUT)return null==AudioMsgServiceLog||AudioMsgServiceLog.error("msTimeout is invalid. The msTimeout is ",t),void EngineHooks.call("onUploadAudioMsgFile",CommonResult.FAILED,[e,"",exports.HWPGMEError.PARAM_INVALID,"msTimeout is invalid."]);if(null===e||""===e.trim())return null==AudioMsgServiceLog||AudioMsgServiceLog.error("filePath is invalid."),void EngineHooks.call("onUploadAudioMsgFile",CommonResult.FAILED,[e,"",exports.HWPGMEError.PARAM_INVALID,"filePath is invalid."]);const r=this;this.fileSystemManager.getFileInfo({filePath:e,success(n){const o=null==n?void 0:n.size;null==AudioMsgServiceLog||AudioMsgServiceLog.info("The current fileSize is ",o),o>MAX_UPLOAD_FILE_SIZE?EngineHooks.call("onUploadAudioMsgFile",CommonResult.FAILED,[e,"",exports.HWPGMEError.PARAM_INVALID,"fileSize is over 50M "]):r.readFile(e,t,o);},fail(t){null==AudioMsgServiceLog||AudioMsgServiceLog.error("filePath is invalid. The res is ",JSON.stringify(t)),EngineHooks.call("onUploadAudioMsgFile",CommonResult.FAILED,[e,"",exports.HWPGMEError.PARAM_INVALID,"filePath is invalid. The res is "+JSON.stringify(t)]);}});}readFile(e,t,r){this.fileSystemManager.readFile({filePath:e,success(n){const o=n.data,i=calculateFileSha256(o);null==AudioMsgServiceLog||AudioMsgServiceLog.debug("The current fileSha256 is ",i),RoomService.uploadApply(AbstractAudioMsgService.getFileName(e),i,r).then(r=>{RoomService.uploadFile(r,o,t).then(()=>{null==AudioMsgServiceLog||AudioMsgServiceLog.info("onUploadAudioMsgFile success. the fileId is ",r.data.fileId),EngineHooks.call("onUploadAudioMsgFile",CommonResult.SUCCESS,[e,r.data.fileId,0,""]);}).catch(t=>{EngineHooks.call("onUploadAudioMsgFile",CommonResult.FAILED,[e,"",t.code,t.message]);});}).catch(t=>{EngineHooks.call("onUploadAudioMsgFile",CommonResult.FAILED,[e,"",t.code,t.message]);});},fail(t){null==AudioMsgServiceLog||AudioMsgServiceLog.error("onUploadAudioMsgFile failed. the res is ",t),EngineHooks.call("onUploadAudioMsgFile",CommonResult.FAILED,[e,"",exports.HWPGMEError.PARAM_INVALID,"read file failed."]);}});}startDetectAudioFile(e){this.isFileId(e)?RoomService.startDetectAudioFile(e).then(()=>{EngineHooks.call("onStartDetectAudioFile",CommonResult.SUCCESS,[e,exports.HWPGMEError.SUCCESS,"success"]);}).catch(t=>{EngineHooks.call("onStartDetectAudioFile",CommonResult.FAILED,[e,t.code,t.message]);}):EngineHooks.call("onStartDetectAudioFile",CommonResult.FAILED,[e,exports.HWPGMEError.PARAM_INVALID,"fileId is invalid"]);}static getFileName(e){const t=e.split("/");return t[t.length-1];}}const WxAudioMsgServiceLog=Logger.getInstance("WxAudioMsgService");class WxAudioMsgService extends AbstractAudioMsgService{constructor(){super(),this.recordStartTime=0,this.recorderManager=null,this.recorderManager=wx.getRecorderManager(),this.registerRecordEventListener(),this.innerAudioContext=wx.createInnerAudioContext({useWebAudioImplement:!1}),this.registerAudioEventListener(),this.fileSystemManager=wx.getFileSystemManager();}startRecordAudioMsg(){this.checkIsRecording()||(this.setRecording(!0),null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.info("Begin to startRecordAudioMsg."),this.recordStartTime=Date.now(),this.recorderManager.start(this.buildRecordConfig()));}stopRecordAudioMsg(){null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.info("Begin to stopRecordAudioMsg."),this.recorderManager.stop();}registerRecordEventListener(){null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.info("Begin to registerRecordEventListener"),this.recorderManager.onStart(()=>{null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.info("onStart. Begin to record");}),this.recorderManager.onStop(e=>{null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.info("End record, The result is ",JSON.stringify(e)),this.setRecording(!1);const t=(null==e?void 0:e.duration)?Math.round(Number(null==e?void 0:e.duration)):Date.now()-this.recordStartTime;EngineHooks.call("onRecordAudioMsg",CommonResult.SUCCESS,[null==e?void 0:e.tempFilePath,exports.HWPGMEError.SUCCESS,"",t,null==e?void 0:e.fileSize]);}),this.recorderManager.onPause(()=>{null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.warn("onPause record."),this.stopRecordAudioMsg();}),this.recorderManager.onResume(()=>{null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.warn("onResume record.");}),this.recorderManager.onInterruptionBegin(()=>{null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.warn("interruptionBegin record.");}),this.recorderManager.onInterruptionEnd(()=>{null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.warn("onInterruptionEnd record.");}),this.recorderManager.onError(e=>{null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.error("record error. the error msg is ",e),this.setRecording(!1),EngineHooks.call("onRecordAudioMsg",CommonResult.FAILED,["",exports.HWPGMEError.RECORD_AUDIO_MSG_FAILED,e,0,0]);}),null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.info("end registerRecordEventListener");}registerAudioEventListener(){null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.info("Begin to registerAudioEventListener"),super.registerAudioEventListener(),this.innerAudioContext.onError(e=>{const t=JSON.stringify(e);null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.error("onError play. the error is",t);const r=null==e?void 0:e.errCode;EngineHooks.call("onPlayAudioMsg",CommonResult.FAILED,[this.audioFilePath,getAudioError(r),"The error is "+t]),this.audioFilePath="";}),null==WxAudioMsgServiceLog||WxAudioMsgServiceLog.info("end registerAudioEventListener");}}const QqAudioMsgServiceLog=Logger.getInstance("QqAudioMsgService");class QqAudioMsgService extends AbstractAudioMsgService{constructor(){super(),this.recordStartTime=0,this.innerAudioContext=qg.createInnerAudioContext(),this.registerAudioEventListener(),this.fileSystemManager=qg.getFileSystemManager();}startRecordAudioMsg(){if(this.checkIsRecording())return;null==QqAudioMsgServiceLog||QqAudioMsgServiceLog.info("Begin to startRecordAudioMsg."),this.setRecording(!0);const e=this.buildRecordConfig();e.success=e=>{null==QqAudioMsgServiceLog||QqAudioMsgServiceLog.info("recordSuccessHandle. The res ",JSON.stringify(e));const t=null==e?void 0:e.uri;this.readSizeWhenRecordSuccess(t);},e.fail=(e,t)=>{null==QqAudioMsgServiceLog||QqAudioMsgServiceLog.error("record failed."),this.handleRecordFailed(e,t);},e.complete=()=>{null==QqAudioMsgServiceLog||QqAudioMsgServiceLog.info("recordCompleteHandle.");},this.recordStartTime=Date.now(),qg.startRecord(e);}readSizeWhenRecordSuccess(e){this.setRecording(!1),this.fileSystemManager.getFileInfo({filePath:e,success:t=>{null==QqAudioMsgServiceLog||QqAudioMsgServiceLog.info("getFileInfoSuccess. The size is ",null==t?void 0:t.size);const r=Date.now()-this.recordStartTime;EngineHooks.call("onRecordAudioMsg",CommonResult.SUCCESS,[e,exports.HWPGMEError.SUCCESS,"",r,null==t?void 0:t.size]);},fail:e=>{this.handleRecordFailed(null==e?void 0:e.errMsg,null==e?void 0:e.errCode);},complete:()=>{null==QqAudioMsgServiceLog||QqAudioMsgServiceLog.info("getFileInfoComplete.");}});}stopRecordAudioMsg(){null==QqAudioMsgServiceLog||QqAudioMsgServiceLog.info("Begin to stopRecordAudioMsg."),qg.stopRecord({success:e=>{null==QqAudioMsgServiceLog||QqAudioMsgServiceLog.info("stopRecord success. The res ",JSON.stringify(e));},fail:(e,t)=>{null==QqAudioMsgServiceLog||QqAudioMsgServiceLog.error("stopRecord failed."),this.handleRecordFailed(e,t);},complete:()=>{null==QqAudioMsgServiceLog||QqAudioMsgServiceLog.info("stopRecordCompleteHandle.");}});}handleRecordFailed(e,t){const r="The errCode is "+t+", errMsg is "+e;null==QqAudioMsgServiceLog||QqAudioMsgServiceLog.error("recordFailedHandle."+r),this.setRecording(!1),EngineHooks.call("onRecordAudioMsg",CommonResult.FAILED,["",exports.HWPGMEError.RECORD_AUDIO_MSG_FAILED,r,0,0]);}registerAudioEventListener(){null==QqAudioMsgServiceLog||QqAudioMsgServiceLog.info("Begin to registerAudioEventListener"),super.registerAudioEventListener(),this.innerAudioContext.onError(e=>{null==QqAudioMsgServiceLog||QqAudioMsgServiceLog.error("onError play. the error is ",e),EngineHooks.call("onPlayAudioMsg",CommonResult.FAILED,[this.audioFilePath,getAudioError(e),"The error is "+e]),this.audioFilePath="";});}}const ttAudioMsgServiceLog=Logger.getInstance("TtAudioMsgService");class TtAudioMsgService extends AbstractAudioMsgService{constructor(){super(),this.recorderManager=null,this.recordStartTime=0,this.recorderManager=tt.getRecorderManager(),this.registerRecordEventListener(),this.innerAudioContext=tt.createInnerAudioContext(),this.registerAudioEventListener(),this.fileSystemManager=tt.getFileSystemManager();}startRecordAudioMsg(){this.checkIsRecording()||(this.setRecording(!0),this.recordStartTime=Date.now(),this.recorderManager.start(this.buildRecordConfig()));}stopRecordAudioMsg(){this.recorderManager.stop();}unRegisterRecordEventListener(){var e,t,r,n,o,i;null===(e=this.recorderManager)||void 0===e||e.offStop(),null===(t=this.recorderManager)||void 0===t||t.offStart(),null===(r=this.recorderManager)||void 0===r||r.offError(),null===(n=this.recorderManager)||void 0===n||n.offResume(),null===(o=this.recorderManager)||void 0===o||o.offPause(),null===(i=this.recorderManager)||void 0===i||i.offFrameRecorded();}registerRecordEventListener(){var e,t,r,n,o,i;this.unRegisterRecordEventListener(),null===(e=this.recorderManager)||void 0===e||e.onStart(()=>{null==ttAudioMsgServiceLog||ttAudioMsgServiceLog.info("onStart. Begin to record");}),null===(t=this.recorderManager)||void 0===t||t.onStop(e=>{var t;null==ttAudioMsgServiceLog||ttAudioMsgServiceLog.info("End record, The result is ",JSON.stringify(e)),this.setRecording(!1);const r=null==e?void 0:e.tempFilePath,n=(null==e?void 0:e.duration)?null==e?void 0:e.duration:Date.now()-this.recordStartTime;(null==e?void 0:e.fileSize)?EngineHooks.call("onRecordAudioMsg",CommonResult.SUCCESS,[r,exports.HWPGMEError.SUCCESS,"record success",n,null==e?void 0:e.fileSize]):null===(t=this.fileSystemManager)||void 0===t||t.getFileInfo({filePath:r,success:function(e){EngineHooks.call("onRecordAudioMsg",CommonResult.SUCCESS,[r,exports.HWPGMEError.SUCCESS,"record success",n,null==e?void 0:e.size]);},fail:function(e){null==ttAudioMsgServiceLog||ttAudioMsgServiceLog.error(`getFileInfoFailed. The errMsg is ${null==e?void 0:e.errMsg}. the errCode is ${null==e?void 0:e.errCode}.`);const t="The errCode is "+(null==e?void 0:e.errCode)+", errMsg is "+(null==e?void 0:e.errMsg);EngineHooks.call("onRecordAudioMsg",CommonResult.FAILED,["",exports.HWPGMEError.RECORD_AUDIO_MSG_FAILED,t,0,0]);},complete:function(){null==ttAudioMsgServiceLog||ttAudioMsgServiceLog.info("getFileInfoComplete.");}});}),null===(r=this.recorderManager)||void 0===r||r.onPause(()=>{null==ttAudioMsgServiceLog||ttAudioMsgServiceLog.warn("onPause record."),this.stopRecordAudioMsg();}),null===(n=this.recorderManager)||void 0===n||n.onResume(()=>{null==ttAudioMsgServiceLog||ttAudioMsgServiceLog.warn("onResume record.");}),null===(o=this.recorderManager)||void 0===o||o.onFrameRecorded(e=>{null==ttAudioMsgServiceLog||ttAudioMsgServiceLog.info("onFrameRecorded record, frameSize = "+e.frameBuffer.byteLength);}),null===(i=this.recorderManager)||void 0===i||i.onError(e=>{null==ttAudioMsgServiceLog||ttAudioMsgServiceLog.error("record error. the error msg is ",e.errMsg),this.setRecording(!1),EngineHooks.call("onRecordAudioMsg",CommonResult.FAILED,["",exports.HWPGMEError.RECORD_AUDIO_MSG_FAILED,e.errMsg,0,0]);});}registerAudioEventListener(){var e,t;super.registerAudioEventListener(),null===(e=this.innerAudioContext)||void 0===e||e.onStop(()=>null==ttAudioMsgServiceLog?void 0:ttAudioMsgServiceLog.debug("onStop")),null===(t=this.innerAudioContext)||void 0===t||t.onError(e=>{const t=JSON.stringify(e);null==ttAudioMsgServiceLog||ttAudioMsgServiceLog.error("onError play. the error is",t);const r=null==e?void 0:e.errCode;EngineHooks.call("onPlayAudioMsg",CommonResult.FAILED,[this.audioFilePath,getAudioError(r),"The error is "+t]),this.audioFilePath="";});}}const CheckerLog=Logger.getInstance("Checker");class CheckerBase{constructor(e){this._typeName="",this._isRequired=!0,this._typeName=e,this._checkItems=new Map();}add(e,t){return this._checkItems.set(e,t),this;}isTargetType(e){throw new Error("Please override the method in a subclass");}canBeNull(e){return null!=e||this._isRequired;}and(...e){return this.add("and logic",t=>e.every(e=>e(t)));}or(...e){return this.add("or logic",t=>e.some(e=>e(t)));}required(e){return this._isRequired=!!e,this;}done(){return e=>{if(null==e)return!this._isRequired;if(!this.isTargetType(e))return null==CheckerLog||CheckerLog.debug(`Check failed, this rule need a '${this._typeName}' type but got`,e),!1;for(const[,t]of this._checkItems)if(!t(e))return!1;return!0;};}}class StringChecker extends CheckerBase{constructor(){super("string"),this._canBeEmpty=!0;}isTargetType(e){return"string"==typeof e&&!(0===e.length&&!this._canBeEmpty);}empty(e){return this._canBeEmpty=e,this;}minLen(e){return this.add("min length",t=>t.length>=e);}maxLen(e){return this.add("max length",t=>t.length<=e);}}class ObjectChecker extends CheckerBase{constructor(){super("object");}isTargetType(e){return"object"==typeof e&&null!==e;}validKeys(e){return this.add("object valid keys",t=>Object.keys(t).every(t=>!!e.includes(t)||(null==CheckerLog||CheckerLog.debug(`key '${t}' is invalid in this object`),!1)));}fields(e){return this.add("every rule",t=>Object.keys(e).every(r=>!!e[r](t[r])||(null==CheckerLog||CheckerLog.debug(`field '${r}' check failed width input: ${t[r]}`),!1)));}atLeastOneOf(e){return this.add("at least one of them",t=>e.some(e=>void 0!==t[e]));}}class BooleanChecker extends CheckerBase{constructor(){super("boolean");}isTargetType(e){return"boolean"==typeof e;}}const strChecker=()=>new StringChecker(),objChecker=()=>new ObjectChecker(),boolChecker=()=>new BooleanChecker(),strRequiredAndNotEmpty=strChecker().required(!0).empty(!1).done(),strUnnecessary=strChecker().required(!1).done(),boolUnnecessaryButNotEmpty=boolChecker().required(!1).done(),createEngineParamsCheck=objChecker().validKeys(["openId","appId","clientId","clientSecret","cpAccessToken","sign","nonce","timestamp","isEnableAudioMsg","isEnableRtm","certPath"]).fields({openId:strRequiredAndNotEmpty,appId:strRequiredAndNotEmpty,clientId:strRequiredAndNotEmpty,sign:strUnnecessary,nonce:strUnnecessary,timestamp:strUnnecessary,isEnableAudioMsg:boolUnnecessaryButNotEmpty,isEnableRtm:boolUnnecessaryButNotEmpty}).atLeastOneOf(["clientSecret","cpAccessToken"]).done();var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise(function(o,s){r[n]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t);}};try{e.apply(t||null,r);}catch(e){i&&(i=!1,s(e));}});}var base64$1={};!function(e){var t=e;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r;};for(var r=new Array(64),n=new Array(123),o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;t.encode=function(e,t,n){for(var o,i=null,s=[],a=0,l=0;t<n;){var c=e[t++];switch(l){case 0:s[a++]=r[c>>2],o=(3&c)<<4,l=1;break;case 1:s[a++]=r[o|c>>4],o=(15&c)<<2,l=2;break;case 2:s[a++]=r[o|c>>6],s[a++]=r[63&c],l=0;}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0);}return l&&(s[a++]=r[o],s[a++]=61,1===l&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a));};var i="invalid encoding";t.decode=function(e,t,r){for(var o,s=r,a=0,l=0;l<e.length;){var c=e.charCodeAt(l++);if(61===c&&a>1)break;if(void 0===(c=n[c]))throw Error(i);switch(a){case 0:o=c,a=1;break;case 1:t[r++]=o<<2|(48&c)>>4,o=c,a=2;break;case 2:t[r++]=(15&o)<<4|(60&c)>>2,o=c,a=3;break;case 3:t[r++]=(3&o)<<6|c,a=0;}}if(1===a)throw Error(i);return r-s;},t.test=function(e){return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e);};}(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={};}EventEmitter.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this;},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this;},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r);}return this;};var float=factory(factory);function factory(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3];}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0];}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0];}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0];}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s;}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n);}}function r(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,s=8388607&n;return 255===i?s?NaN:o*(1/0):0===i?1401298464324817e-60*o*s:o*Math.pow(2,i-150)*(s+8388608);}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE);}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7];}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0];}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0];}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0];}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s;}():function(){function t(e,t,r,n,o,i){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((s<<31|2146435072)>>>0,o,i+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,o,i+t),e((s<<31|a/4294967296)>>>0,o,i+r);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=n*Math.pow(2,-l))>>>0,o,i+t),e((s<<31|l+1023<<20|1048576*a&1048575)>>>0,o,i+r);}}}function r(e,t,r,n,o){var i=e(n,o+t),s=e(n,o+r),a=2*(s>>31)+1,l=s>>>20&2047,c=4294967296*(1048575&s)+i;return 2047===l?c?NaN:a*(1/0):0===l?5e-324*a*c:a*Math.pow(2,l-1075)*(c+4503599627370496);}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0),e.readDoubleLE=r.bind(null,readUintLE,0,4),e.readDoubleBE=r.bind(null,readUintBE,4,0);}(),e;}function writeUintLE(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24;}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e;}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0;}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0;}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod;}catch(e){}return null;}var utf8$2={};!function(e){var t=e;t.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t;},t.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],s=0;t<r;)(n=e[t++])<128?i[s++]=n:n>191&&n<224?i[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(n>>10),i[s++]=56320+(1023&n)):i[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s));},t.write=function(e,t,r){for(var n,o,i=r,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&o),++s,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i;};}(utf8$2);var pool_1=pool;function pool(e,t,r){var n=r||8192,o=n>>>1,i=null,s=n;return function(r){if(r<1||r>o)return e(r);s+r>n&&(i=e(n),s=0);var a=t.call(i,s,s+=r);return 7&s&&(s=1+(7|s)),a;};}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(e,t){this.lo=e>>>0,this.hi=t>>>0;}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0;},zero.zzEncode=zero.zzDecode=function(){return this;},zero.length=function(){return 1;};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new LongBits$2(r,n);},LongBits$2.from=function(e){if("number"==typeof e)return LongBits$2.fromNumber(e);if(util$5.isString(e)){if(!util$5.Long)return LongBits$2.fromNumber(parseInt(e,10));e=util$5.Long.fromString(e);}return e.low||e.high?new LongBits$2(e.low>>>0,e.high>>>0):zero;},LongBits$2.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r);}return this.lo+4294967296*this.hi;},LongBits$2.prototype.toLong=function(e){return util$5.Long?new util$5.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)};};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function(e){return e===zeroHash?zero:new LongBits$2((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0);},LongBits$2.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24);},LongBits$2.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this;},LongBits$2.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this;},LongBits$2.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10;},function(e){var t=e;function r(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e;}function n(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e;}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&r(this,n);}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e;},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message;},writable:!0,enumerable:!1,configurable:!0}}),t;}t.asPromise=aspromise,t.base64=base64$1,t.EventEmitter=eventemitter,t.float=float,t.inquire=inquire_1,t.utf8=utf8$2,t.pool=pool_1,t.LongBits=longbits,t.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),t.global=t.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;},t.isString=function(e){return"string"==typeof e||e instanceof String;},t.isObject=function(e){return e&&"object"==typeof e;},t.isset=t.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0);},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null;}catch(e){return null;}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e);},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash;},t.longFromHash=function(e,r){var n=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r));},t.merge=r,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1);},t.newError=n,t.ProtocolError=n("ProtocolError"),t.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r];};},t.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]];};},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r);},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t);}):t._Buffer_from=t._Buffer_allocUnsafe=null;};}(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r;}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states;}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null;}var create$1=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1();})();}:function(){return new Writer$1();};};function writeByte(e,t,r){t[r]=255&e;}function writeVarint32(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e;}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t;}function writeVarint64(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo;}function writeFixed32(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24;}Writer$1.create=create$1(),Writer$1.alloc=function(e){return new util$4.Array(e);},util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray)),Writer$1.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Op(e,t,r),this.len+=t,this;},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this;},Writer$1.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e);},Writer$1.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0);},Writer$1.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t);},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t);},Writer$1.prototype.bool=function(e){return this._push(writeByte,1,e?1:0);},Writer$1.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0);},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi);},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function(e){return this._push(util$4.float.writeFloatLE,4,e);},Writer$1.prototype.double=function(e){return this._push(util$4.float.writeDoubleLE,8,e);};var writeBytes=util$4.Array.prototype.set?function(e,t,r){t.set(e,r);}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n];};Writer$1.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(e)){var r=Writer$1.alloc(t=base64.length(e));base64.decode(e,r,0),e=r;}return this.uint32(t)._push(writeBytes,t,e);},Writer$1.prototype.string=function(e){var t=utf8$1.length(e);return t?this.uint32(t)._push(utf8$1.write,t,e):this._push(writeByte,1,0);},Writer$1.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this;},Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this;},Writer$1.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this;},Writer$1.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t;},Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1._configure();};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this);}function writeStringBuffer(e,t,r){e.length<40?util$3.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r);}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&"set"===util$3.Buffer.prototype.set.name?function(e,t,r){t.set(e,r);}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++];};},BufferWriter.prototype.bytes=function(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this;},BufferWriter.prototype.string=function(e){var t=util$3.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this;},BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len);}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length;}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer");}:function(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer");},create=function(){return util$2.Buffer?function(e){return(Reader$1.create=function(e){return util$2.Buffer.isBuffer(e)?new BufferReader$1(e):create_array(e);})(e);}:create_array;},value;function readLongVarint(){var e=new LongBits(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e;}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e;}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e;}throw Error("invalid varint encoding");}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0;}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4));}Reader$1.create=create(),Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice,Reader$1.prototype.uint32=(value=4294967295,function(){if(value=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value;}),Reader$1.prototype.int32=function(){return 0|this.uint32();},Reader$1.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0;},Reader$1.prototype.bool=function(){return 0!==this.uint32();},Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4);},Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4);},Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e;},Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e;},Reader$1.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r);},Reader$1.prototype.string=function(){var e=this.bytes();return utf8.read(e,0,e.length);},Reader$1.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e;}else do{if(this.pos>=this.len)throw indexOutOfRange(this);}while(128&this.buf[this.pos++]);return this;},Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos);}return this;},Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create(),BufferReader$1._configure();var t=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[t](!1);},uint64:function(){return readLongVarint.call(this)[t](!0);},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1);},fixed64:function(){return readFixed64.call(this)[t](!0);},sfixed64:function(){return readFixed64.call(this)[t](!1);}});};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(e){Reader.call(this,e);}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice);},BufferReader.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len));},BufferReader._configure();var rpc={},service=Service,util=minimal$1;function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r);}(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,r,n,o,i){if(!o)throw TypeError("request must be specified");var s=this;if(!i)return util.asPromise(e,s,t,r,n,o);if(s.rpcImpl)try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,r){if(e)return s.emit("error",e,t),i(e);if(null!==r){if(!(r instanceof n))try{r=n[s.responseDelimited?"decodeDelimited":"decode"](r);}catch(e){return s.emit("error",e,t),i(e);}return s.emit("data",r,t),i(null,r);}s.end(!0);});}catch(e){return s.emit("error",e,t),void setTimeout(function(){i(e);},0);}else setTimeout(function(){i(Error("already ended"));},0);},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this;},function(e){e.Service=service;}(rpc);var roots={};!function(e){var t=e;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader);}t.build="minimal",t.Writer=writer,t.BufferWriter=writer_buffer,t.Reader=reader,t.BufferReader=reader_buffer,t.util=minimal$1,t.rpc=rpc,t.roots=roots,t.configure=r,r();}(indexMinimal);var minimal=indexMinimal,$protobuf=minimal,$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={}),dto,valuesById,values,constant,common,grpc,rtm,game;$root.game=(game={},game.rtm=((rtm={}).grpc=((grpc={}).common=((common={}).dto=((dto={}).AckMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.rtnCode=0,e.prototype.msg="",e.prototype.seq="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.rtnCode&&Object.hasOwnProperty.call(e,"rtnCode")&&t.uint32(8).int32(e.rtnCode),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(26).string(e.seq),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.AckMessage();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rtnCode=e.int32();break;case 2:n.msg=e.string();break;case 3:n.seq=e.string();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.rtnCode&&Object.prototype.hasOwnProperty.call(e,"rtnCode")&&!$util.isInteger(e.rtnCode)?"rtnCode: integer expected":null!=e.msg&&Object.prototype.hasOwnProperty.call(e,"msg")&&!$util.isString(e.msg)?"msg: string expected":null!=e.seq&&Object.prototype.hasOwnProperty.call(e,"seq")&&!$util.isString(e.seq)?"seq: string expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.AckMessage)return e;var t=new $root.game.rtm.grpc.common.dto.AckMessage();return null!=e.rtnCode&&(t.rtnCode=0|e.rtnCode),null!=e.msg&&(t.msg=String(e.msg)),null!=e.seq&&(t.seq=String(e.seq)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.rtnCode=0,r.msg="",r.seq=""),null!=e.rtnCode&&Object.prototype.hasOwnProperty.call(e,"rtnCode")&&(r.rtnCode=e.rtnCode),null!=e.msg&&Object.prototype.hasOwnProperty.call(e,"msg")&&(r.msg=e.msg),null!=e.seq&&Object.prototype.hasOwnProperty.call(e,"seq")&&(r.seq=e.seq),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.AckMessage";},e;}(),dto.rtm=function(){var e,t,r,n={};return n.notify=((e={}).ChannelMemberChangeNotify=function(){function e(e){if(this.playerInfo=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.number=0,e.prototype.playerInfo=$util.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.number&&Object.hasOwnProperty.call(e,"number")&&t.uint32(16).int32(e.number),null!=e.playerInfo&&e.playerInfo.length)for(var r=0;r<e.playerInfo.length;++r)$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.encode(e.playerInfo[r],t.uint32(26).fork()).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.notify.ChannelMemberChangeNotify();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.channelId=e.string();break;case 2:n.number=e.int32();break;case 3:n.playerInfo&&n.playerInfo.length||(n.playerInfo=[]),n.playerInfo.push($root.game.rtm.grpc.common.dto.rtm.PlayerInfo.decode(e,e.uint32()));break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.number&&Object.prototype.hasOwnProperty.call(e,"number")&&!$util.isInteger(e.number))return"number: integer expected";if(null!=e.playerInfo&&Object.prototype.hasOwnProperty.call(e,"playerInfo")){if(!Array.isArray(e.playerInfo))return"playerInfo: array expected";for(var t=0;t<e.playerInfo.length;++t){var r=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.verify(e.playerInfo[t]);if(r)return"playerInfo."+r;}}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.notify.ChannelMemberChangeNotify)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.notify.ChannelMemberChangeNotify();if(null!=e.channelId&&(t.channelId=String(e.channelId)),null!=e.number&&(t.number=0|e.number),e.playerInfo){if(!Array.isArray(e.playerInfo))throw TypeError(".game.rtm.grpc.common.dto.rtm.notify.ChannelMemberChangeNotify.playerInfo: array expected");t.playerInfo=[];for(var r=0;r<e.playerInfo.length;++r){if("object"!=typeof e.playerInfo[r])throw TypeError(".game.rtm.grpc.common.dto.rtm.notify.ChannelMemberChangeNotify.playerInfo: object expected");t.playerInfo[r]=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.fromObject(e.playerInfo[r]);}}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.playerInfo=[]),t.defaults&&(r.channelId="",r.number=0),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),null!=e.number&&Object.prototype.hasOwnProperty.call(e,"number")&&(r.number=e.number),e.playerInfo&&e.playerInfo.length){r.playerInfo=[];for(var n=0;n<e.playerInfo.length;++n)r.playerInfo[n]=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.toObject(e.playerInfo[n],t);}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.notify.ChannelMemberChangeNotify";},e;}(),e.ChannelMessageNotify=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelMessage=null,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.channelMessage&&Object.hasOwnProperty.call(e,"channelMessage")&&$root.game.rtm.grpc.common.dto.rtm.ChannelMessage.encode(e.channelMessage,t.uint32(10).fork()).ldelim(),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.notify.ChannelMessageNotify();e.pos<r;){var o=e.uint32();o>>>3==1?n.channelMessage=$root.game.rtm.grpc.common.dto.rtm.ChannelMessage.decode(e,e.uint32()):e.skipType(7&o);}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelMessage&&Object.prototype.hasOwnProperty.call(e,"channelMessage")){var t=$root.game.rtm.grpc.common.dto.rtm.ChannelMessage.verify(e.channelMessage);if(t)return"channelMessage."+t;}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.notify.ChannelMessageNotify)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.notify.ChannelMessageNotify();if(null!=e.channelMessage){if("object"!=typeof e.channelMessage)throw TypeError(".game.rtm.grpc.common.dto.rtm.notify.ChannelMessageNotify.channelMessage: object expected");t.channelMessage=$root.game.rtm.grpc.common.dto.rtm.ChannelMessage.fromObject(e.channelMessage);}return t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.channelMessage=null),null!=e.channelMessage&&Object.prototype.hasOwnProperty.call(e,"channelMessage")&&(r.channelMessage=$root.game.rtm.grpc.common.dto.rtm.ChannelMessage.toObject(e.channelMessage,t)),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.notify.ChannelMessageNotify";},e;}(),e.DeleteChannelPlayerPropertyNotify=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.playerInfo=null,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.playerInfo&&Object.hasOwnProperty.call(e,"playerInfo")&&$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.encode(e.playerInfo,t.uint32(18).fork()).ldelim(),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.notify.DeleteChannelPlayerPropertyNotify();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.channelId=e.string();break;case 2:n.playerInfo=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.decode(e,e.uint32());break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.playerInfo&&Object.prototype.hasOwnProperty.call(e,"playerInfo")){var t=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.verify(e.playerInfo);if(t)return"playerInfo."+t;}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.notify.DeleteChannelPlayerPropertyNotify)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.notify.DeleteChannelPlayerPropertyNotify();if(null!=e.channelId&&(t.channelId=String(e.channelId)),null!=e.playerInfo){if("object"!=typeof e.playerInfo)throw TypeError(".game.rtm.grpc.common.dto.rtm.notify.DeleteChannelPlayerPropertyNotify.playerInfo: object expected");t.playerInfo=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.fromObject(e.playerInfo);}return t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.channelId="",r.playerInfo=null),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),null!=e.playerInfo&&Object.prototype.hasOwnProperty.call(e,"playerInfo")&&(r.playerInfo=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.toObject(e.playerInfo,t)),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.notify.DeleteChannelPlayerPropertyNotify";},e;}(),e.DeleteChannelPropertyNotify=function(){function e(e){if(this.properties={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.properties=$util.emptyObject,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.properties&&Object.hasOwnProperty.call(e,"properties"))for(var r=Object.keys(e.properties),n=0;n<r.length;++n)t.uint32(18).fork().uint32(10).string(r[n]).uint32(18).string(e.properties[r[n]]).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,n,o=void 0===t?e.len:e.pos+t,i=new $root.game.rtm.grpc.common.dto.rtm.notify.DeleteChannelPropertyNotify();e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:i.channelId=e.string();break;case 2:i.properties===$util.emptyObject&&(i.properties={});var a=e.uint32()+e.pos;for(r="",n="";e.pos<a;){var l=e.uint32();switch(l>>>3){case 1:r=e.string();break;case 2:n=e.string();break;default:e.skipType(7&l);}}i.properties[r]=n;break;default:e.skipType(7&s);}}return i;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.properties&&Object.prototype.hasOwnProperty.call(e,"properties")){if(!$util.isObject(e.properties))return"properties: object expected";for(var t=Object.keys(e.properties),r=0;r<t.length;++r)if(!$util.isString(e.properties[t[r]]))return"properties: string{k:string} expected";}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.notify.DeleteChannelPropertyNotify)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.notify.DeleteChannelPropertyNotify();if(null!=e.channelId&&(t.channelId=String(e.channelId)),e.properties){if("object"!=typeof e.properties)throw TypeError(".game.rtm.grpc.common.dto.rtm.notify.DeleteChannelPropertyNotify.properties: object expected");t.properties={};for(var r=Object.keys(e.properties),n=0;n<r.length;++n)t.properties[r[n]]=String(e.properties[r[n]]);}return t;},e.toObject=function(e,t){t||(t={});var r,n={};if((t.objects||t.defaults)&&(n.properties={}),t.defaults&&(n.channelId=""),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(n.channelId=e.channelId),e.properties&&(r=Object.keys(e.properties)).length){n.properties={};for(var o=0;o<r.length;++o)n.properties[r[o]]=e.properties[r[o]];}return n;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.notify.DeleteChannelPropertyNotify";},e;}(),e.P2PMessageNotify=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.p2pMessage=null,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.p2pMessage&&Object.hasOwnProperty.call(e,"p2pMessage")&&$root.game.rtm.grpc.common.dto.rtm.P2PMessage.encode(e.p2pMessage,t.uint32(10).fork()).ldelim(),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.notify.P2PMessageNotify();e.pos<r;){var o=e.uint32();o>>>3==1?n.p2pMessage=$root.game.rtm.grpc.common.dto.rtm.P2PMessage.decode(e,e.uint32()):e.skipType(7&o);}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.p2pMessage&&Object.prototype.hasOwnProperty.call(e,"p2pMessage")){var t=$root.game.rtm.grpc.common.dto.rtm.P2PMessage.verify(e.p2pMessage);if(t)return"p2pMessage."+t;}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.notify.P2PMessageNotify)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.notify.P2PMessageNotify();if(null!=e.p2pMessage){if("object"!=typeof e.p2pMessage)throw TypeError(".game.rtm.grpc.common.dto.rtm.notify.P2PMessageNotify.p2pMessage: object expected");t.p2pMessage=$root.game.rtm.grpc.common.dto.rtm.P2PMessage.fromObject(e.p2pMessage);}return t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.p2pMessage=null),null!=e.p2pMessage&&Object.prototype.hasOwnProperty.call(e,"p2pMessage")&&(r.p2pMessage=$root.game.rtm.grpc.common.dto.rtm.P2PMessage.toObject(e.p2pMessage,t)),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.notify.P2PMessageNotify";},e;}(),e.PlayerStatusChangeNotify=function(){function e(e){if(this.playerInfo=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.playerInfo=$util.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.playerInfo&&e.playerInfo.length)for(var r=0;r<e.playerInfo.length;++r)$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.encode(e.playerInfo[r],t.uint32(10).fork()).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.notify.PlayerStatusChangeNotify();e.pos<r;){var o=e.uint32();o>>>3==1?(n.playerInfo&&n.playerInfo.length||(n.playerInfo=[]),n.playerInfo.push($root.game.rtm.grpc.common.dto.rtm.PlayerInfo.decode(e,e.uint32()))):e.skipType(7&o);}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.playerInfo&&Object.prototype.hasOwnProperty.call(e,"playerInfo")){if(!Array.isArray(e.playerInfo))return"playerInfo: array expected";for(var t=0;t<e.playerInfo.length;++t){var r=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.verify(e.playerInfo[t]);if(r)return"playerInfo."+r;}}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.notify.PlayerStatusChangeNotify)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.notify.PlayerStatusChangeNotify();if(e.playerInfo){if(!Array.isArray(e.playerInfo))throw TypeError(".game.rtm.grpc.common.dto.rtm.notify.PlayerStatusChangeNotify.playerInfo: array expected");t.playerInfo=[];for(var r=0;r<e.playerInfo.length;++r){if("object"!=typeof e.playerInfo[r])throw TypeError(".game.rtm.grpc.common.dto.rtm.notify.PlayerStatusChangeNotify.playerInfo: object expected");t.playerInfo[r]=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.fromObject(e.playerInfo[r]);}}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.playerInfo=[]),e.playerInfo&&e.playerInfo.length){r.playerInfo=[];for(var n=0;n<e.playerInfo.length;++n)r.playerInfo[n]=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.toObject(e.playerInfo[n],t);}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.notify.PlayerStatusChangeNotify";},e;}(),e.SetChannelPlayerPropertyNotify=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.playerInfo=null,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.playerInfo&&Object.hasOwnProperty.call(e,"playerInfo")&&$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.encode(e.playerInfo,t.uint32(18).fork()).ldelim(),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.notify.SetChannelPlayerPropertyNotify();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.channelId=e.string();break;case 2:n.playerInfo=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.decode(e,e.uint32());break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.playerInfo&&Object.prototype.hasOwnProperty.call(e,"playerInfo")){var t=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.verify(e.playerInfo);if(t)return"playerInfo."+t;}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.notify.SetChannelPlayerPropertyNotify)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.notify.SetChannelPlayerPropertyNotify();if(null!=e.channelId&&(t.channelId=String(e.channelId)),null!=e.playerInfo){if("object"!=typeof e.playerInfo)throw TypeError(".game.rtm.grpc.common.dto.rtm.notify.SetChannelPlayerPropertyNotify.playerInfo: object expected");t.playerInfo=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.fromObject(e.playerInfo);}return t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.channelId="",r.playerInfo=null),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),null!=e.playerInfo&&Object.prototype.hasOwnProperty.call(e,"playerInfo")&&(r.playerInfo=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.toObject(e.playerInfo,t)),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.notify.SetChannelPlayerPropertyNotify";},e;}(),e.SetChannelPropertyNotify=function(){function e(e){if(this.properties={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.properties=$util.emptyObject,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.properties&&Object.hasOwnProperty.call(e,"properties"))for(var r=Object.keys(e.properties),n=0;n<r.length;++n)t.uint32(18).fork().uint32(10).string(r[n]).uint32(18).string(e.properties[r[n]]).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,n,o=void 0===t?e.len:e.pos+t,i=new $root.game.rtm.grpc.common.dto.rtm.notify.SetChannelPropertyNotify();e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:i.channelId=e.string();break;case 2:i.properties===$util.emptyObject&&(i.properties={});var a=e.uint32()+e.pos;for(r="",n="";e.pos<a;){var l=e.uint32();switch(l>>>3){case 1:r=e.string();break;case 2:n=e.string();break;default:e.skipType(7&l);}}i.properties[r]=n;break;default:e.skipType(7&s);}}return i;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.properties&&Object.prototype.hasOwnProperty.call(e,"properties")){if(!$util.isObject(e.properties))return"properties: object expected";for(var t=Object.keys(e.properties),r=0;r<t.length;++r)if(!$util.isString(e.properties[t[r]]))return"properties: string{k:string} expected";}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.notify.SetChannelPropertyNotify)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.notify.SetChannelPropertyNotify();if(null!=e.channelId&&(t.channelId=String(e.channelId)),e.properties){if("object"!=typeof e.properties)throw TypeError(".game.rtm.grpc.common.dto.rtm.notify.SetChannelPropertyNotify.properties: object expected");t.properties={};for(var r=Object.keys(e.properties),n=0;n<r.length;++n)t.properties[r[n]]=String(e.properties[r[n]]);}return t;},e.toObject=function(e,t){t||(t={});var r,n={};if((t.objects||t.defaults)&&(n.properties={}),t.defaults&&(n.channelId=""),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(n.channelId=e.channelId),e.properties&&(r=Object.keys(e.properties)).length){n.properties={};for(var o=0;o<r.length;++o)n.properties[r[o]]=e.properties[r[o]];}return n;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.notify.SetChannelPropertyNotify";},e;}(),e),n.ChannelMessage=function(){function e(e){if(this.receiver=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.rtmMessage=null,e.prototype.isAllowCacheMsg=!1,e.prototype.receiver=$util.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.rtmMessage&&Object.hasOwnProperty.call(e,"rtmMessage")&&$root.game.rtm.grpc.common.dto.rtm.RtmMessage.encode(e.rtmMessage,t.uint32(18).fork()).ldelim(),null!=e.isAllowCacheMsg&&Object.hasOwnProperty.call(e,"isAllowCacheMsg")&&t.uint32(24).bool(e.isAllowCacheMsg),null!=e.receiver&&e.receiver.length)for(var r=0;r<e.receiver.length;++r)t.uint32(34).string(e.receiver[r]);return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.ChannelMessage();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.channelId=e.string();break;case 2:n.rtmMessage=$root.game.rtm.grpc.common.dto.rtm.RtmMessage.decode(e,e.uint32());break;case 3:n.isAllowCacheMsg=e.bool();break;case 4:n.receiver&&n.receiver.length||(n.receiver=[]),n.receiver.push(e.string());break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.rtmMessage&&Object.prototype.hasOwnProperty.call(e,"rtmMessage")){var t=$root.game.rtm.grpc.common.dto.rtm.RtmMessage.verify(e.rtmMessage);if(t)return"rtmMessage."+t;}if(null!=e.isAllowCacheMsg&&Object.prototype.hasOwnProperty.call(e,"isAllowCacheMsg")&&"boolean"!=typeof e.isAllowCacheMsg)return"isAllowCacheMsg: boolean expected";if(null!=e.receiver&&Object.prototype.hasOwnProperty.call(e,"receiver")){if(!Array.isArray(e.receiver))return"receiver: array expected";for(var r=0;r<e.receiver.length;++r)if(!$util.isString(e.receiver[r]))return"receiver: string[] expected";}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.ChannelMessage)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.ChannelMessage();if(null!=e.channelId&&(t.channelId=String(e.channelId)),null!=e.rtmMessage){if("object"!=typeof e.rtmMessage)throw TypeError(".game.rtm.grpc.common.dto.rtm.ChannelMessage.rtmMessage: object expected");t.rtmMessage=$root.game.rtm.grpc.common.dto.rtm.RtmMessage.fromObject(e.rtmMessage);}if(null!=e.isAllowCacheMsg&&(t.isAllowCacheMsg=Boolean(e.isAllowCacheMsg)),e.receiver){if(!Array.isArray(e.receiver))throw TypeError(".game.rtm.grpc.common.dto.rtm.ChannelMessage.receiver: array expected");t.receiver=[];for(var r=0;r<e.receiver.length;++r)t.receiver[r]=String(e.receiver[r]);}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.receiver=[]),t.defaults&&(r.channelId="",r.rtmMessage=null,r.isAllowCacheMsg=!1),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),null!=e.rtmMessage&&Object.prototype.hasOwnProperty.call(e,"rtmMessage")&&(r.rtmMessage=$root.game.rtm.grpc.common.dto.rtm.RtmMessage.toObject(e.rtmMessage,t)),null!=e.isAllowCacheMsg&&Object.prototype.hasOwnProperty.call(e,"isAllowCacheMsg")&&(r.isAllowCacheMsg=e.isAllowCacheMsg),e.receiver&&e.receiver.length){r.receiver=[];for(var n=0;n<e.receiver.length;++n)r.receiver[n]=e.receiver[n];}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.ChannelMessage";},e;}(),n.result=((t={}).ChannelOptResult=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.errorCode=null,e.prototype.channelId="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.errorCode&&Object.hasOwnProperty.call(e,"errorCode")&&$root.game.rtm.grpc.common.dto.ErrorCode.encode(e.errorCode,t.uint32(10).fork()).ldelim(),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.result.ChannelOptResult();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.decode(e,e.uint32());break;case 2:n.channelId=e.string();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")){var t=$root.game.rtm.grpc.common.dto.ErrorCode.verify(e.errorCode);if(t)return"errorCode."+t;}return null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId)?"channelId: string expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.result.ChannelOptResult)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.result.ChannelOptResult();if(null!=e.errorCode){if("object"!=typeof e.errorCode)throw TypeError(".game.rtm.grpc.common.dto.rtm.result.ChannelOptResult.errorCode: object expected");t.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.fromObject(e.errorCode);}return null!=e.channelId&&(t.channelId=String(e.channelId)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.errorCode=null,r.channelId=""),null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(r.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.toObject(e.errorCode,t)),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.result.ChannelOptResult";},e;}(),t.DeleteChannelPlayerPropertyResult=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.errorCode=null,e.prototype.channelId="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.errorCode&&Object.hasOwnProperty.call(e,"errorCode")&&$root.game.rtm.grpc.common.dto.ErrorCode.encode(e.errorCode,t.uint32(10).fork()).ldelim(),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.result.DeleteChannelPlayerPropertyResult();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.decode(e,e.uint32());break;case 2:n.channelId=e.string();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")){var t=$root.game.rtm.grpc.common.dto.ErrorCode.verify(e.errorCode);if(t)return"errorCode."+t;}return null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId)?"channelId: string expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.result.DeleteChannelPlayerPropertyResult)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.result.DeleteChannelPlayerPropertyResult();if(null!=e.errorCode){if("object"!=typeof e.errorCode)throw TypeError(".game.rtm.grpc.common.dto.rtm.result.DeleteChannelPlayerPropertyResult.errorCode: object expected");t.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.fromObject(e.errorCode);}return null!=e.channelId&&(t.channelId=String(e.channelId)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.errorCode=null,r.channelId=""),null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(r.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.toObject(e.errorCode,t)),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.result.DeleteChannelPlayerPropertyResult";},e;}(),t.DeleteChannelPropertyResult=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.errorCode=null,e.prototype.channelId="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.errorCode&&Object.hasOwnProperty.call(e,"errorCode")&&$root.game.rtm.grpc.common.dto.ErrorCode.encode(e.errorCode,t.uint32(10).fork()).ldelim(),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.result.DeleteChannelPropertyResult();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.decode(e,e.uint32());break;case 2:n.channelId=e.string();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")){var t=$root.game.rtm.grpc.common.dto.ErrorCode.verify(e.errorCode);if(t)return"errorCode."+t;}return null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId)?"channelId: string expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.result.DeleteChannelPropertyResult)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.result.DeleteChannelPropertyResult();if(null!=e.errorCode){if("object"!=typeof e.errorCode)throw TypeError(".game.rtm.grpc.common.dto.rtm.result.DeleteChannelPropertyResult.errorCode: object expected");t.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.fromObject(e.errorCode);}return null!=e.channelId&&(t.channelId=String(e.channelId)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.errorCode=null,r.channelId=""),null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(r.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.toObject(e.errorCode,t)),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.result.DeleteChannelPropertyResult";},e;}(),t.QueryChannelMsgResult=function(){function e(e){if(this.rtmMessage=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.errorCode=null,e.prototype.channelId="",e.prototype.rtmMessage=$util.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.errorCode&&Object.hasOwnProperty.call(e,"errorCode")&&$root.game.rtm.grpc.common.dto.ErrorCode.encode(e.errorCode,t.uint32(10).fork()).ldelim(),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),null!=e.rtmMessage&&e.rtmMessage.length)for(var r=0;r<e.rtmMessage.length;++r)$root.game.rtm.grpc.common.dto.rtm.RtmMessage.encode(e.rtmMessage[r],t.uint32(26).fork()).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.result.QueryChannelMsgResult();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.decode(e,e.uint32());break;case 2:n.channelId=e.string();break;case 3:n.rtmMessage&&n.rtmMessage.length||(n.rtmMessage=[]),n.rtmMessage.push($root.game.rtm.grpc.common.dto.rtm.RtmMessage.decode(e,e.uint32()));break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(r=$root.game.rtm.grpc.common.dto.ErrorCode.verify(e.errorCode)))return"errorCode."+r;if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.rtmMessage&&Object.prototype.hasOwnProperty.call(e,"rtmMessage")){if(!Array.isArray(e.rtmMessage))return"rtmMessage: array expected";for(var t=0;t<e.rtmMessage.length;++t){var r;if(r=$root.game.rtm.grpc.common.dto.rtm.RtmMessage.verify(e.rtmMessage[t]))return"rtmMessage."+r;}}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.result.QueryChannelMsgResult)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.result.QueryChannelMsgResult();if(null!=e.errorCode){if("object"!=typeof e.errorCode)throw TypeError(".game.rtm.grpc.common.dto.rtm.result.QueryChannelMsgResult.errorCode: object expected");t.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.fromObject(e.errorCode);}if(null!=e.channelId&&(t.channelId=String(e.channelId)),e.rtmMessage){if(!Array.isArray(e.rtmMessage))throw TypeError(".game.rtm.grpc.common.dto.rtm.result.QueryChannelMsgResult.rtmMessage: array expected");t.rtmMessage=[];for(var r=0;r<e.rtmMessage.length;++r){if("object"!=typeof e.rtmMessage[r])throw TypeError(".game.rtm.grpc.common.dto.rtm.result.QueryChannelMsgResult.rtmMessage: object expected");t.rtmMessage[r]=$root.game.rtm.grpc.common.dto.rtm.RtmMessage.fromObject(e.rtmMessage[r]);}}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.rtmMessage=[]),t.defaults&&(r.errorCode=null,r.channelId=""),null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(r.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.toObject(e.errorCode,t)),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),e.rtmMessage&&e.rtmMessage.length){r.rtmMessage=[];for(var n=0;n<e.rtmMessage.length;++n)r.rtmMessage[n]=$root.game.rtm.grpc.common.dto.rtm.RtmMessage.toObject(e.rtmMessage[n],t);}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.result.QueryChannelMsgResult";},e;}(),t.QueryChannelPlayerPropertyResult=function(){function e(e){if(this.playerInfo=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.errorCode=null,e.prototype.channelId="",e.prototype.playerInfo=$util.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.errorCode&&Object.hasOwnProperty.call(e,"errorCode")&&$root.game.rtm.grpc.common.dto.ErrorCode.encode(e.errorCode,t.uint32(10).fork()).ldelim(),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),null!=e.playerInfo&&e.playerInfo.length)for(var r=0;r<e.playerInfo.length;++r)$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.encode(e.playerInfo[r],t.uint32(26).fork()).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.result.QueryChannelPlayerPropertyResult();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.decode(e,e.uint32());break;case 2:n.channelId=e.string();break;case 3:n.playerInfo&&n.playerInfo.length||(n.playerInfo=[]),n.playerInfo.push($root.game.rtm.grpc.common.dto.rtm.PlayerInfo.decode(e,e.uint32()));break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(r=$root.game.rtm.grpc.common.dto.ErrorCode.verify(e.errorCode)))return"errorCode."+r;if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.playerInfo&&Object.prototype.hasOwnProperty.call(e,"playerInfo")){if(!Array.isArray(e.playerInfo))return"playerInfo: array expected";for(var t=0;t<e.playerInfo.length;++t){var r;if(r=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.verify(e.playerInfo[t]))return"playerInfo."+r;}}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.result.QueryChannelPlayerPropertyResult)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.result.QueryChannelPlayerPropertyResult();if(null!=e.errorCode){if("object"!=typeof e.errorCode)throw TypeError(".game.rtm.grpc.common.dto.rtm.result.QueryChannelPlayerPropertyResult.errorCode: object expected");t.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.fromObject(e.errorCode);}if(null!=e.channelId&&(t.channelId=String(e.channelId)),e.playerInfo){if(!Array.isArray(e.playerInfo))throw TypeError(".game.rtm.grpc.common.dto.rtm.result.QueryChannelPlayerPropertyResult.playerInfo: array expected");t.playerInfo=[];for(var r=0;r<e.playerInfo.length;++r){if("object"!=typeof e.playerInfo[r])throw TypeError(".game.rtm.grpc.common.dto.rtm.result.QueryChannelPlayerPropertyResult.playerInfo: object expected");t.playerInfo[r]=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.fromObject(e.playerInfo[r]);}}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.playerInfo=[]),t.defaults&&(r.errorCode=null,r.channelId=""),null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(r.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.toObject(e.errorCode,t)),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),e.playerInfo&&e.playerInfo.length){r.playerInfo=[];for(var n=0;n<e.playerInfo.length;++n)r.playerInfo[n]=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.toObject(e.playerInfo[n],t);}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.result.QueryChannelPlayerPropertyResult";},e;}(),t.QueryChannelPropertyResult=function(){function e(e){if(this.properties={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.errorCode=null,e.prototype.channelId="",e.prototype.properties=$util.emptyObject,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.errorCode&&Object.hasOwnProperty.call(e,"errorCode")&&$root.game.rtm.grpc.common.dto.ErrorCode.encode(e.errorCode,t.uint32(10).fork()).ldelim(),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),null!=e.properties&&Object.hasOwnProperty.call(e,"properties"))for(var r=Object.keys(e.properties),n=0;n<r.length;++n)t.uint32(26).fork().uint32(10).string(r[n]).uint32(18).string(e.properties[r[n]]).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,n,o=void 0===t?e.len:e.pos+t,i=new $root.game.rtm.grpc.common.dto.rtm.result.QueryChannelPropertyResult();e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:i.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.decode(e,e.uint32());break;case 2:i.channelId=e.string();break;case 3:i.properties===$util.emptyObject&&(i.properties={});var a=e.uint32()+e.pos;for(r="",n="";e.pos<a;){var l=e.uint32();switch(l>>>3){case 1:r=e.string();break;case 2:n=e.string();break;default:e.skipType(7&l);}}i.properties[r]=n;break;default:e.skipType(7&s);}}return i;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")){var t=$root.game.rtm.grpc.common.dto.ErrorCode.verify(e.errorCode);if(t)return"errorCode."+t;}if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.properties&&Object.prototype.hasOwnProperty.call(e,"properties")){if(!$util.isObject(e.properties))return"properties: object expected";for(var r=Object.keys(e.properties),n=0;n<r.length;++n)if(!$util.isString(e.properties[r[n]]))return"properties: string{k:string} expected";}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.result.QueryChannelPropertyResult)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.result.QueryChannelPropertyResult();if(null!=e.errorCode){if("object"!=typeof e.errorCode)throw TypeError(".game.rtm.grpc.common.dto.rtm.result.QueryChannelPropertyResult.errorCode: object expected");t.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.fromObject(e.errorCode);}if(null!=e.channelId&&(t.channelId=String(e.channelId)),e.properties){if("object"!=typeof e.properties)throw TypeError(".game.rtm.grpc.common.dto.rtm.result.QueryChannelPropertyResult.properties: object expected");t.properties={};for(var r=Object.keys(e.properties),n=0;n<r.length;++n)t.properties[r[n]]=String(e.properties[r[n]]);}return t;},e.toObject=function(e,t){t||(t={});var r,n={};if((t.objects||t.defaults)&&(n.properties={}),t.defaults&&(n.errorCode=null,n.channelId=""),null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(n.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.toObject(e.errorCode,t)),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(n.channelId=e.channelId),e.properties&&(r=Object.keys(e.properties)).length){n.properties={};for(var o=0;o<r.length;++o)n.properties[r[o]]=e.properties[r[o]];}return n;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.result.QueryChannelPropertyResult";},e;}(),t.QueryChannelResult=function(){function e(e){if(this.playerInfo=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.errorCode=null,e.prototype.channelId="",e.prototype.number=0,e.prototype.playerInfo=$util.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.errorCode&&Object.hasOwnProperty.call(e,"errorCode")&&$root.game.rtm.grpc.common.dto.ErrorCode.encode(e.errorCode,t.uint32(10).fork()).ldelim(),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),null!=e.number&&Object.hasOwnProperty.call(e,"number")&&t.uint32(24).int32(e.number),null!=e.playerInfo&&e.playerInfo.length)for(var r=0;r<e.playerInfo.length;++r)$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.encode(e.playerInfo[r],t.uint32(34).fork()).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.result.QueryChannelResult();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.decode(e,e.uint32());break;case 2:n.channelId=e.string();break;case 3:n.number=e.int32();break;case 4:n.playerInfo&&n.playerInfo.length||(n.playerInfo=[]),n.playerInfo.push($root.game.rtm.grpc.common.dto.rtm.PlayerInfo.decode(e,e.uint32()));break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(r=$root.game.rtm.grpc.common.dto.ErrorCode.verify(e.errorCode)))return"errorCode."+r;if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.number&&Object.prototype.hasOwnProperty.call(e,"number")&&!$util.isInteger(e.number))return"number: integer expected";if(null!=e.playerInfo&&Object.prototype.hasOwnProperty.call(e,"playerInfo")){if(!Array.isArray(e.playerInfo))return"playerInfo: array expected";for(var t=0;t<e.playerInfo.length;++t){var r;if(r=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.verify(e.playerInfo[t]))return"playerInfo."+r;}}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.result.QueryChannelResult)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.result.QueryChannelResult();if(null!=e.errorCode){if("object"!=typeof e.errorCode)throw TypeError(".game.rtm.grpc.common.dto.rtm.result.QueryChannelResult.errorCode: object expected");t.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.fromObject(e.errorCode);}if(null!=e.channelId&&(t.channelId=String(e.channelId)),null!=e.number&&(t.number=0|e.number),e.playerInfo){if(!Array.isArray(e.playerInfo))throw TypeError(".game.rtm.grpc.common.dto.rtm.result.QueryChannelResult.playerInfo: array expected");t.playerInfo=[];for(var r=0;r<e.playerInfo.length;++r){if("object"!=typeof e.playerInfo[r])throw TypeError(".game.rtm.grpc.common.dto.rtm.result.QueryChannelResult.playerInfo: object expected");t.playerInfo[r]=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.fromObject(e.playerInfo[r]);}}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.playerInfo=[]),t.defaults&&(r.errorCode=null,r.channelId="",r.number=0),null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(r.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.toObject(e.errorCode,t)),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),null!=e.number&&Object.prototype.hasOwnProperty.call(e,"number")&&(r.number=e.number),e.playerInfo&&e.playerInfo.length){r.playerInfo=[];for(var n=0;n<e.playerInfo.length;++n)r.playerInfo[n]=$root.game.rtm.grpc.common.dto.rtm.PlayerInfo.toObject(e.playerInfo[n],t);}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.result.QueryChannelResult";},e;}(),t.SendChannelMsgResult=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.errorCode=null,e.prototype.channelId="",e.prototype.clientMsgId="",e.prototype.msgId="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.errorCode&&Object.hasOwnProperty.call(e,"errorCode")&&$root.game.rtm.grpc.common.dto.ErrorCode.encode(e.errorCode,t.uint32(10).fork()).ldelim(),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),null!=e.clientMsgId&&Object.hasOwnProperty.call(e,"clientMsgId")&&t.uint32(26).string(e.clientMsgId),null!=e.msgId&&Object.hasOwnProperty.call(e,"msgId")&&t.uint32(34).string(e.msgId),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.result.SendChannelMsgResult();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.decode(e,e.uint32());break;case 2:n.channelId=e.string();break;case 3:n.clientMsgId=e.string();break;case 4:n.msgId=e.string();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")){var t=$root.game.rtm.grpc.common.dto.ErrorCode.verify(e.errorCode);if(t)return"errorCode."+t;}return null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId)?"channelId: string expected":null!=e.clientMsgId&&Object.prototype.hasOwnProperty.call(e,"clientMsgId")&&!$util.isString(e.clientMsgId)?"clientMsgId: string expected":null!=e.msgId&&Object.prototype.hasOwnProperty.call(e,"msgId")&&!$util.isString(e.msgId)?"msgId: string expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.result.SendChannelMsgResult)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.result.SendChannelMsgResult();if(null!=e.errorCode){if("object"!=typeof e.errorCode)throw TypeError(".game.rtm.grpc.common.dto.rtm.result.SendChannelMsgResult.errorCode: object expected");t.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.fromObject(e.errorCode);}return null!=e.channelId&&(t.channelId=String(e.channelId)),null!=e.clientMsgId&&(t.clientMsgId=String(e.clientMsgId)),null!=e.msgId&&(t.msgId=String(e.msgId)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.errorCode=null,r.channelId="",r.clientMsgId="",r.msgId=""),null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(r.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.toObject(e.errorCode,t)),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),null!=e.clientMsgId&&Object.prototype.hasOwnProperty.call(e,"clientMsgId")&&(r.clientMsgId=e.clientMsgId),null!=e.msgId&&Object.prototype.hasOwnProperty.call(e,"msgId")&&(r.msgId=e.msgId),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.result.SendChannelMsgResult";},e;}(),t.SendP2PMsgResult=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.errorCode=null,e.prototype.receiverOpenId="",e.prototype.receiverPlayerId="",e.prototype.clientMsgId="",e.prototype.msgId="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.errorCode&&Object.hasOwnProperty.call(e,"errorCode")&&$root.game.rtm.grpc.common.dto.ErrorCode.encode(e.errorCode,t.uint32(10).fork()).ldelim(),null!=e.receiverOpenId&&Object.hasOwnProperty.call(e,"receiverOpenId")&&t.uint32(18).string(e.receiverOpenId),null!=e.receiverPlayerId&&Object.hasOwnProperty.call(e,"receiverPlayerId")&&t.uint32(26).string(e.receiverPlayerId),null!=e.clientMsgId&&Object.hasOwnProperty.call(e,"clientMsgId")&&t.uint32(34).string(e.clientMsgId),null!=e.msgId&&Object.hasOwnProperty.call(e,"msgId")&&t.uint32(42).string(e.msgId),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.result.SendP2PMsgResult();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.decode(e,e.uint32());break;case 2:n.receiverOpenId=e.string();break;case 3:n.receiverPlayerId=e.string();break;case 4:n.clientMsgId=e.string();break;case 5:n.msgId=e.string();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")){var t=$root.game.rtm.grpc.common.dto.ErrorCode.verify(e.errorCode);if(t)return"errorCode."+t;}return null!=e.receiverOpenId&&Object.prototype.hasOwnProperty.call(e,"receiverOpenId")&&!$util.isString(e.receiverOpenId)?"receiverOpenId: string expected":null!=e.receiverPlayerId&&Object.prototype.hasOwnProperty.call(e,"receiverPlayerId")&&!$util.isString(e.receiverPlayerId)?"receiverPlayerId: string expected":null!=e.clientMsgId&&Object.prototype.hasOwnProperty.call(e,"clientMsgId")&&!$util.isString(e.clientMsgId)?"clientMsgId: string expected":null!=e.msgId&&Object.prototype.hasOwnProperty.call(e,"msgId")&&!$util.isString(e.msgId)?"msgId: string expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.result.SendP2PMsgResult)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.result.SendP2PMsgResult();if(null!=e.errorCode){if("object"!=typeof e.errorCode)throw TypeError(".game.rtm.grpc.common.dto.rtm.result.SendP2PMsgResult.errorCode: object expected");t.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.fromObject(e.errorCode);}return null!=e.receiverOpenId&&(t.receiverOpenId=String(e.receiverOpenId)),null!=e.receiverPlayerId&&(t.receiverPlayerId=String(e.receiverPlayerId)),null!=e.clientMsgId&&(t.clientMsgId=String(e.clientMsgId)),null!=e.msgId&&(t.msgId=String(e.msgId)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.errorCode=null,r.receiverOpenId="",r.receiverPlayerId="",r.clientMsgId="",r.msgId=""),null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(r.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.toObject(e.errorCode,t)),null!=e.receiverOpenId&&Object.prototype.hasOwnProperty.call(e,"receiverOpenId")&&(r.receiverOpenId=e.receiverOpenId),null!=e.receiverPlayerId&&Object.prototype.hasOwnProperty.call(e,"receiverPlayerId")&&(r.receiverPlayerId=e.receiverPlayerId),null!=e.clientMsgId&&Object.prototype.hasOwnProperty.call(e,"clientMsgId")&&(r.clientMsgId=e.clientMsgId),null!=e.msgId&&Object.prototype.hasOwnProperty.call(e,"msgId")&&(r.msgId=e.msgId),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.result.SendP2PMsgResult";},e;}(),t.SetChannelPlayerPropertyResult=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.errorCode=null,e.prototype.channelId="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.errorCode&&Object.hasOwnProperty.call(e,"errorCode")&&$root.game.rtm.grpc.common.dto.ErrorCode.encode(e.errorCode,t.uint32(10).fork()).ldelim(),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.result.SetChannelPlayerPropertyResult();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.decode(e,e.uint32());break;case 2:n.channelId=e.string();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")){var t=$root.game.rtm.grpc.common.dto.ErrorCode.verify(e.errorCode);if(t)return"errorCode."+t;}return null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId)?"channelId: string expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.result.SetChannelPlayerPropertyResult)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.result.SetChannelPlayerPropertyResult();if(null!=e.errorCode){if("object"!=typeof e.errorCode)throw TypeError(".game.rtm.grpc.common.dto.rtm.result.SetChannelPlayerPropertyResult.errorCode: object expected");t.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.fromObject(e.errorCode);}return null!=e.channelId&&(t.channelId=String(e.channelId)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.errorCode=null,r.channelId=""),null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(r.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.toObject(e.errorCode,t)),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.result.SetChannelPlayerPropertyResult";},e;}(),t.SetChannelPropertyResult=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.errorCode=null,e.prototype.channelId="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.errorCode&&Object.hasOwnProperty.call(e,"errorCode")&&$root.game.rtm.grpc.common.dto.ErrorCode.encode(e.errorCode,t.uint32(10).fork()).ldelim(),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.result.SetChannelPropertyResult();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.decode(e,e.uint32());break;case 2:n.channelId=e.string();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")){var t=$root.game.rtm.grpc.common.dto.ErrorCode.verify(e.errorCode);if(t)return"errorCode."+t;}return null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId)?"channelId: string expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.result.SetChannelPropertyResult)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.result.SetChannelPropertyResult();if(null!=e.errorCode){if("object"!=typeof e.errorCode)throw TypeError(".game.rtm.grpc.common.dto.rtm.result.SetChannelPropertyResult.errorCode: object expected");t.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.fromObject(e.errorCode);}return null!=e.channelId&&(t.channelId=String(e.channelId)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.errorCode=null,r.channelId=""),null!=e.errorCode&&Object.prototype.hasOwnProperty.call(e,"errorCode")&&(r.errorCode=$root.game.rtm.grpc.common.dto.ErrorCode.toObject(e.errorCode,t)),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.result.SetChannelPropertyResult";},e;}(),t),n.req=((r={}).DeleteChannelPlayerPropertyReq=function(){function e(e){if(this.propertyKey=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.propertyKey=$util.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.propertyKey&&e.propertyKey.length)for(var r=0;r<e.propertyKey.length;++r)t.uint32(18).string(e.propertyKey[r]);return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.req.DeleteChannelPlayerPropertyReq();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.channelId=e.string();break;case 2:n.propertyKey&&n.propertyKey.length||(n.propertyKey=[]),n.propertyKey.push(e.string());break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.propertyKey&&Object.prototype.hasOwnProperty.call(e,"propertyKey")){if(!Array.isArray(e.propertyKey))return"propertyKey: array expected";for(var t=0;t<e.propertyKey.length;++t)if(!$util.isString(e.propertyKey[t]))return"propertyKey: string[] expected";}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.req.DeleteChannelPlayerPropertyReq)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.req.DeleteChannelPlayerPropertyReq();if(null!=e.channelId&&(t.channelId=String(e.channelId)),e.propertyKey){if(!Array.isArray(e.propertyKey))throw TypeError(".game.rtm.grpc.common.dto.rtm.req.DeleteChannelPlayerPropertyReq.propertyKey: array expected");t.propertyKey=[];for(var r=0;r<e.propertyKey.length;++r)t.propertyKey[r]=String(e.propertyKey[r]);}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.propertyKey=[]),t.defaults&&(r.channelId=""),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),e.propertyKey&&e.propertyKey.length){r.propertyKey=[];for(var n=0;n<e.propertyKey.length;++n)r.propertyKey[n]=e.propertyKey[n];}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.req.DeleteChannelPlayerPropertyReq";},e;}(),r.DeleteChannelPropertyReq=function(){function e(e){if(this.propertyKey=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.propertyKey=$util.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.propertyKey&&e.propertyKey.length)for(var r=0;r<e.propertyKey.length;++r)t.uint32(18).string(e.propertyKey[r]);return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.req.DeleteChannelPropertyReq();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.channelId=e.string();break;case 2:n.propertyKey&&n.propertyKey.length||(n.propertyKey=[]),n.propertyKey.push(e.string());break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.propertyKey&&Object.prototype.hasOwnProperty.call(e,"propertyKey")){if(!Array.isArray(e.propertyKey))return"propertyKey: array expected";for(var t=0;t<e.propertyKey.length;++t)if(!$util.isString(e.propertyKey[t]))return"propertyKey: string[] expected";}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.req.DeleteChannelPropertyReq)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.req.DeleteChannelPropertyReq();if(null!=e.channelId&&(t.channelId=String(e.channelId)),e.propertyKey){if(!Array.isArray(e.propertyKey))throw TypeError(".game.rtm.grpc.common.dto.rtm.req.DeleteChannelPropertyReq.propertyKey: array expected");t.propertyKey=[];for(var r=0;r<e.propertyKey.length;++r)t.propertyKey[r]=String(e.propertyKey[r]);}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.propertyKey=[]),t.defaults&&(r.channelId=""),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),e.propertyKey&&e.propertyKey.length){r.propertyKey=[];for(var n=0;n<e.propertyKey.length;++n)r.propertyKey[n]=e.propertyKey[n];}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.req.DeleteChannelPropertyReq";},e;}(),r.QueryChannelMsgReq=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.startTime=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.count=0,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.startTime&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(16).int64(e.startTime),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(24).int32(e.count),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.req.QueryChannelMsgReq();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.channelId=e.string();break;case 2:n.startTime=e.int64();break;case 3:n.count=e.int32();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId)?"channelId: string expected":null!=e.startTime&&Object.prototype.hasOwnProperty.call(e,"startTime")&&!($util.isInteger(e.startTime)||e.startTime&&$util.isInteger(e.startTime.low)&&$util.isInteger(e.startTime.high))?"startTime: integer|Long expected":null!=e.count&&Object.prototype.hasOwnProperty.call(e,"count")&&!$util.isInteger(e.count)?"count: integer expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.req.QueryChannelMsgReq)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.req.QueryChannelMsgReq();return null!=e.channelId&&(t.channelId=String(e.channelId)),null!=e.startTime&&($util.Long?(t.startTime=$util.Long.fromValue(e.startTime)).unsigned=!1:"string"==typeof e.startTime?t.startTime=parseInt(e.startTime,10):"number"==typeof e.startTime?t.startTime=e.startTime:"object"==typeof e.startTime&&(t.startTime=new $util.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),null!=e.count&&(t.count=0|e.count),t;},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.channelId="",$util.Long){var n=new $util.Long(0,0,!1);r.startTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n;}else r.startTime=t.longs===String?"0":0;r.count=0;}return null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),null!=e.startTime&&Object.prototype.hasOwnProperty.call(e,"startTime")&&("number"==typeof e.startTime?r.startTime=t.longs===String?String(e.startTime):e.startTime:r.startTime=t.longs===String?$util.Long.prototype.toString.call(e.startTime):t.longs===Number?new $util.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),null!=e.count&&Object.prototype.hasOwnProperty.call(e,"count")&&(r.count=e.count),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.req.QueryChannelMsgReq";},e;}(),r.QueryChannelPlayerPropertyReq=function(){function e(e){if(this.playerId=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.playerId=$util.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.playerId&&e.playerId.length)for(var r=0;r<e.playerId.length;++r)t.uint32(18).string(e.playerId[r]);return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.req.QueryChannelPlayerPropertyReq();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.channelId=e.string();break;case 2:n.playerId&&n.playerId.length||(n.playerId=[]),n.playerId.push(e.string());break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.playerId&&Object.prototype.hasOwnProperty.call(e,"playerId")){if(!Array.isArray(e.playerId))return"playerId: array expected";for(var t=0;t<e.playerId.length;++t)if(!$util.isString(e.playerId[t]))return"playerId: string[] expected";}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.req.QueryChannelPlayerPropertyReq)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.req.QueryChannelPlayerPropertyReq();if(null!=e.channelId&&(t.channelId=String(e.channelId)),e.playerId){if(!Array.isArray(e.playerId))throw TypeError(".game.rtm.grpc.common.dto.rtm.req.QueryChannelPlayerPropertyReq.playerId: array expected");t.playerId=[];for(var r=0;r<e.playerId.length;++r)t.playerId[r]=String(e.playerId[r]);}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.playerId=[]),t.defaults&&(r.channelId=""),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),e.playerId&&e.playerId.length){r.playerId=[];for(var n=0;n<e.playerId.length;++n)r.playerId[n]=e.playerId[n];}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.req.QueryChannelPlayerPropertyReq";},e;}(),r.QueryChannelPropertyReq=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.req.QueryChannelPropertyReq();e.pos<r;){var o=e.uint32();o>>>3==1?n.channelId=e.string():e.skipType(7&o);}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId)?"channelId: string expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.req.QueryChannelPropertyReq)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.req.QueryChannelPropertyReq();return null!=e.channelId&&(t.channelId=String(e.channelId)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.channelId=""),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.req.QueryChannelPropertyReq";},e;}(),r.QueryChannelReq=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.isReturnMembers=!1,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.isReturnMembers&&Object.hasOwnProperty.call(e,"isReturnMembers")&&t.uint32(16).bool(e.isReturnMembers),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.req.QueryChannelReq();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.channelId=e.string();break;case 2:n.isReturnMembers=e.bool();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId)?"channelId: string expected":null!=e.isReturnMembers&&Object.prototype.hasOwnProperty.call(e,"isReturnMembers")&&"boolean"!=typeof e.isReturnMembers?"isReturnMembers: boolean expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.req.QueryChannelReq)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.req.QueryChannelReq();return null!=e.channelId&&(t.channelId=String(e.channelId)),null!=e.isReturnMembers&&(t.isReturnMembers=Boolean(e.isReturnMembers)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.channelId="",r.isReturnMembers=!1),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),null!=e.isReturnMembers&&Object.prototype.hasOwnProperty.call(e,"isReturnMembers")&&(r.isReturnMembers=e.isReturnMembers),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.req.QueryChannelReq";},e;}(),r.SendChannelMsgReq=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelMessage=null,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.channelMessage&&Object.hasOwnProperty.call(e,"channelMessage")&&$root.game.rtm.grpc.common.dto.rtm.ChannelMessage.encode(e.channelMessage,t.uint32(10).fork()).ldelim(),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.req.SendChannelMsgReq();e.pos<r;){var o=e.uint32();o>>>3==1?n.channelMessage=$root.game.rtm.grpc.common.dto.rtm.ChannelMessage.decode(e,e.uint32()):e.skipType(7&o);}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelMessage&&Object.prototype.hasOwnProperty.call(e,"channelMessage")){var t=$root.game.rtm.grpc.common.dto.rtm.ChannelMessage.verify(e.channelMessage);if(t)return"channelMessage."+t;}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.req.SendChannelMsgReq)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.req.SendChannelMsgReq();if(null!=e.channelMessage){if("object"!=typeof e.channelMessage)throw TypeError(".game.rtm.grpc.common.dto.rtm.req.SendChannelMsgReq.channelMessage: object expected");t.channelMessage=$root.game.rtm.grpc.common.dto.rtm.ChannelMessage.fromObject(e.channelMessage);}return t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.channelMessage=null),null!=e.channelMessage&&Object.prototype.hasOwnProperty.call(e,"channelMessage")&&(r.channelMessage=$root.game.rtm.grpc.common.dto.rtm.ChannelMessage.toObject(e.channelMessage,t)),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.req.SendChannelMsgReq";},e;}(),r.SendP2PMsgReq=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.p2pMessage=null,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.p2pMessage&&Object.hasOwnProperty.call(e,"p2pMessage")&&$root.game.rtm.grpc.common.dto.rtm.P2PMessage.encode(e.p2pMessage,t.uint32(10).fork()).ldelim(),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.req.SendP2PMsgReq();e.pos<r;){var o=e.uint32();o>>>3==1?n.p2pMessage=$root.game.rtm.grpc.common.dto.rtm.P2PMessage.decode(e,e.uint32()):e.skipType(7&o);}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.p2pMessage&&Object.prototype.hasOwnProperty.call(e,"p2pMessage")){var t=$root.game.rtm.grpc.common.dto.rtm.P2PMessage.verify(e.p2pMessage);if(t)return"p2pMessage."+t;}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.req.SendP2PMsgReq)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.req.SendP2PMsgReq();if(null!=e.p2pMessage){if("object"!=typeof e.p2pMessage)throw TypeError(".game.rtm.grpc.common.dto.rtm.req.SendP2PMsgReq.p2pMessage: object expected");t.p2pMessage=$root.game.rtm.grpc.common.dto.rtm.P2PMessage.fromObject(e.p2pMessage);}return t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.p2pMessage=null),null!=e.p2pMessage&&Object.prototype.hasOwnProperty.call(e,"p2pMessage")&&(r.p2pMessage=$root.game.rtm.grpc.common.dto.rtm.P2PMessage.toObject(e.p2pMessage,t)),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.req.SendP2PMsgReq";},e;}(),r.SetChannelPlayerPropertyReq=function(){function e(e){if(this.properties={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.properties=$util.emptyObject,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.properties&&Object.hasOwnProperty.call(e,"properties"))for(var r=Object.keys(e.properties),n=0;n<r.length;++n)t.uint32(18).fork().uint32(10).string(r[n]).uint32(18).string(e.properties[r[n]]).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,n,o=void 0===t?e.len:e.pos+t,i=new $root.game.rtm.grpc.common.dto.rtm.req.SetChannelPlayerPropertyReq();e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:i.channelId=e.string();break;case 2:i.properties===$util.emptyObject&&(i.properties={});var a=e.uint32()+e.pos;for(r="",n="";e.pos<a;){var l=e.uint32();switch(l>>>3){case 1:r=e.string();break;case 2:n=e.string();break;default:e.skipType(7&l);}}i.properties[r]=n;break;default:e.skipType(7&s);}}return i;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.properties&&Object.prototype.hasOwnProperty.call(e,"properties")){if(!$util.isObject(e.properties))return"properties: object expected";for(var t=Object.keys(e.properties),r=0;r<t.length;++r)if(!$util.isString(e.properties[t[r]]))return"properties: string{k:string} expected";}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.req.SetChannelPlayerPropertyReq)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.req.SetChannelPlayerPropertyReq();if(null!=e.channelId&&(t.channelId=String(e.channelId)),e.properties){if("object"!=typeof e.properties)throw TypeError(".game.rtm.grpc.common.dto.rtm.req.SetChannelPlayerPropertyReq.properties: object expected");t.properties={};for(var r=Object.keys(e.properties),n=0;n<r.length;++n)t.properties[r[n]]=String(e.properties[r[n]]);}return t;},e.toObject=function(e,t){t||(t={});var r,n={};if((t.objects||t.defaults)&&(n.properties={}),t.defaults&&(n.channelId=""),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(n.channelId=e.channelId),e.properties&&(r=Object.keys(e.properties)).length){n.properties={};for(var o=0;o<r.length;++o)n.properties[r[o]]=e.properties[r[o]];}return n;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.req.SetChannelPlayerPropertyReq";},e;}(),r.SetChannelPropertyReq=function(){function e(e){if(this.properties={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.properties=$util.emptyObject,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.properties&&Object.hasOwnProperty.call(e,"properties"))for(var r=Object.keys(e.properties),n=0;n<r.length;++n)t.uint32(18).fork().uint32(10).string(r[n]).uint32(18).string(e.properties[r[n]]).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,n,o=void 0===t?e.len:e.pos+t,i=new $root.game.rtm.grpc.common.dto.rtm.req.SetChannelPropertyReq();e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:i.channelId=e.string();break;case 2:i.properties===$util.emptyObject&&(i.properties={});var a=e.uint32()+e.pos;for(r="",n="";e.pos<a;){var l=e.uint32();switch(l>>>3){case 1:r=e.string();break;case 2:n=e.string();break;default:e.skipType(7&l);}}i.properties[r]=n;break;default:e.skipType(7&s);}}return i;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.properties&&Object.prototype.hasOwnProperty.call(e,"properties")){if(!$util.isObject(e.properties))return"properties: object expected";for(var t=Object.keys(e.properties),r=0;r<t.length;++r)if(!$util.isString(e.properties[t[r]]))return"properties: string{k:string} expected";}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.req.SetChannelPropertyReq)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.req.SetChannelPropertyReq();if(null!=e.channelId&&(t.channelId=String(e.channelId)),e.properties){if("object"!=typeof e.properties)throw TypeError(".game.rtm.grpc.common.dto.rtm.req.SetChannelPropertyReq.properties: object expected");t.properties={};for(var r=Object.keys(e.properties),n=0;n<r.length;++n)t.properties[r[n]]=String(e.properties[r[n]]);}return t;},e.toObject=function(e,t){t||(t={});var r,n={};if((t.objects||t.defaults)&&(n.properties={}),t.defaults&&(n.channelId=""),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(n.channelId=e.channelId),e.properties&&(r=Object.keys(e.properties)).length){n.properties={};for(var o=0;o<r.length;++o)n.properties[r[o]]=e.properties[r[o]];}return n;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.req.SetChannelPropertyReq";},e;}(),r.SubscribeChannelReq=function(){function e(e){if(this.channelOption={},this.playerOption={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.prototype.channelOption=$util.emptyObject,e.prototype.playerOption=$util.emptyObject,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),null!=e.channelOption&&Object.hasOwnProperty.call(e,"channelOption"))for(var r=Object.keys(e.channelOption),n=0;n<r.length;++n)t.uint32(18).fork().uint32(10).string(r[n]).uint32(18).string(e.channelOption[r[n]]).ldelim();if(null!=e.playerOption&&Object.hasOwnProperty.call(e,"playerOption"))for(r=Object.keys(e.playerOption),n=0;n<r.length;++n)t.uint32(26).fork().uint32(10).string(r[n]).uint32(18).string(e.playerOption[r[n]]).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,n,o=void 0===t?e.len:e.pos+t,i=new $root.game.rtm.grpc.common.dto.rtm.req.SubscribeChannelReq();e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:i.channelId=e.string();break;case 2:i.channelOption===$util.emptyObject&&(i.channelOption={});var a=e.uint32()+e.pos;for(r="",n="";e.pos<a;)switch((l=e.uint32())>>>3){case 1:r=e.string();break;case 2:n=e.string();break;default:e.skipType(7&l);}i.channelOption[r]=n;break;case 3:for(i.playerOption===$util.emptyObject&&(i.playerOption={}),a=e.uint32()+e.pos,r="",n="";e.pos<a;){var l;switch((l=e.uint32())>>>3){case 1:r=e.string();break;case 2:n=e.string();break;default:e.skipType(7&l);}}i.playerOption[r]=n;break;default:e.skipType(7&s);}}return i;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId))return"channelId: string expected";if(null!=e.channelOption&&Object.prototype.hasOwnProperty.call(e,"channelOption")){if(!$util.isObject(e.channelOption))return"channelOption: object expected";for(var t=Object.keys(e.channelOption),r=0;r<t.length;++r)if(!$util.isString(e.channelOption[t[r]]))return"channelOption: string{k:string} expected";}if(null!=e.playerOption&&Object.prototype.hasOwnProperty.call(e,"playerOption")){if(!$util.isObject(e.playerOption))return"playerOption: object expected";for(t=Object.keys(e.playerOption),r=0;r<t.length;++r)if(!$util.isString(e.playerOption[t[r]]))return"playerOption: string{k:string} expected";}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.req.SubscribeChannelReq)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.req.SubscribeChannelReq();if(null!=e.channelId&&(t.channelId=String(e.channelId)),e.channelOption){if("object"!=typeof e.channelOption)throw TypeError(".game.rtm.grpc.common.dto.rtm.req.SubscribeChannelReq.channelOption: object expected");t.channelOption={};for(var r=Object.keys(e.channelOption),n=0;n<r.length;++n)t.channelOption[r[n]]=String(e.channelOption[r[n]]);}if(e.playerOption){if("object"!=typeof e.playerOption)throw TypeError(".game.rtm.grpc.common.dto.rtm.req.SubscribeChannelReq.playerOption: object expected");for(t.playerOption={},r=Object.keys(e.playerOption),n=0;n<r.length;++n)t.playerOption[r[n]]=String(e.playerOption[r[n]]);}return t;},e.toObject=function(e,t){t||(t={});var r,n={};if((t.objects||t.defaults)&&(n.channelOption={},n.playerOption={}),t.defaults&&(n.channelId=""),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(n.channelId=e.channelId),e.channelOption&&(r=Object.keys(e.channelOption)).length){n.channelOption={};for(var o=0;o<r.length;++o)n.channelOption[r[o]]=e.channelOption[r[o]];}if(e.playerOption&&(r=Object.keys(e.playerOption)).length)for(n.playerOption={},o=0;o<r.length;++o)n.playerOption[r[o]]=e.playerOption[r[o]];return n;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.req.SubscribeChannelReq";},e;}(),r.UnsubscribeChannelReq=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.channelId="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).string(e.channelId),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.req.UnsubscribeChannelReq();e.pos<r;){var o=e.uint32();o>>>3==1?n.channelId=e.string():e.skipType(7&o);}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&!$util.isString(e.channelId)?"channelId: string expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.req.UnsubscribeChannelReq)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.req.UnsubscribeChannelReq();return null!=e.channelId&&(t.channelId=String(e.channelId)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.channelId=""),null!=e.channelId&&Object.prototype.hasOwnProperty.call(e,"channelId")&&(r.channelId=e.channelId),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.req.UnsubscribeChannelReq";},e;}(),r),n.P2PMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.rtmMessage=null,e.prototype.receiverOpenId="",e.prototype.receiverPlayerId="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.rtmMessage&&Object.hasOwnProperty.call(e,"rtmMessage")&&$root.game.rtm.grpc.common.dto.rtm.RtmMessage.encode(e.rtmMessage,t.uint32(10).fork()).ldelim(),null!=e.receiverOpenId&&Object.hasOwnProperty.call(e,"receiverOpenId")&&t.uint32(18).string(e.receiverOpenId),null!=e.receiverPlayerId&&Object.hasOwnProperty.call(e,"receiverPlayerId")&&t.uint32(26).string(e.receiverPlayerId),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.P2PMessage();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rtmMessage=$root.game.rtm.grpc.common.dto.rtm.RtmMessage.decode(e,e.uint32());break;case 2:n.receiverOpenId=e.string();break;case 3:n.receiverPlayerId=e.string();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.rtmMessage&&Object.prototype.hasOwnProperty.call(e,"rtmMessage")){var t=$root.game.rtm.grpc.common.dto.rtm.RtmMessage.verify(e.rtmMessage);if(t)return"rtmMessage."+t;}return null!=e.receiverOpenId&&Object.prototype.hasOwnProperty.call(e,"receiverOpenId")&&!$util.isString(e.receiverOpenId)?"receiverOpenId: string expected":null!=e.receiverPlayerId&&Object.prototype.hasOwnProperty.call(e,"receiverPlayerId")&&!$util.isString(e.receiverPlayerId)?"receiverPlayerId: string expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.P2PMessage)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.P2PMessage();if(null!=e.rtmMessage){if("object"!=typeof e.rtmMessage)throw TypeError(".game.rtm.grpc.common.dto.rtm.P2PMessage.rtmMessage: object expected");t.rtmMessage=$root.game.rtm.grpc.common.dto.rtm.RtmMessage.fromObject(e.rtmMessage);}return null!=e.receiverOpenId&&(t.receiverOpenId=String(e.receiverOpenId)),null!=e.receiverPlayerId&&(t.receiverPlayerId=String(e.receiverPlayerId)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.rtmMessage=null,r.receiverOpenId="",r.receiverPlayerId=""),null!=e.rtmMessage&&Object.prototype.hasOwnProperty.call(e,"rtmMessage")&&(r.rtmMessage=$root.game.rtm.grpc.common.dto.rtm.RtmMessage.toObject(e.rtmMessage,t)),null!=e.receiverOpenId&&Object.prototype.hasOwnProperty.call(e,"receiverOpenId")&&(r.receiverOpenId=e.receiverOpenId),null!=e.receiverPlayerId&&Object.prototype.hasOwnProperty.call(e,"receiverPlayerId")&&(r.receiverPlayerId=e.receiverPlayerId),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.P2PMessage";},e;}(),n.PlayerInfo=function(){function e(e){if(this.properties={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.playId="",e.prototype.openId="",e.prototype.playerStatus=0,e.prototype.properties=$util.emptyObject,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.playId&&Object.hasOwnProperty.call(e,"playId")&&t.uint32(10).string(e.playId),null!=e.openId&&Object.hasOwnProperty.call(e,"openId")&&t.uint32(18).string(e.openId),null!=e.playerStatus&&Object.hasOwnProperty.call(e,"playerStatus")&&t.uint32(24).int32(e.playerStatus),null!=e.properties&&Object.hasOwnProperty.call(e,"properties"))for(var r=Object.keys(e.properties),n=0;n<r.length;++n)t.uint32(34).fork().uint32(10).string(r[n]).uint32(18).string(e.properties[r[n]]).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,n,o=void 0===t?e.len:e.pos+t,i=new $root.game.rtm.grpc.common.dto.rtm.PlayerInfo();e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:i.playId=e.string();break;case 2:i.openId=e.string();break;case 3:i.playerStatus=e.int32();break;case 4:i.properties===$util.emptyObject&&(i.properties={});var a=e.uint32()+e.pos;for(r="",n="";e.pos<a;){var l=e.uint32();switch(l>>>3){case 1:r=e.string();break;case 2:n=e.string();break;default:e.skipType(7&l);}}i.properties[r]=n;break;default:e.skipType(7&s);}}return i;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.playId&&Object.prototype.hasOwnProperty.call(e,"playId")&&!$util.isString(e.playId))return"playId: string expected";if(null!=e.openId&&Object.prototype.hasOwnProperty.call(e,"openId")&&!$util.isString(e.openId))return"openId: string expected";if(null!=e.playerStatus&&Object.prototype.hasOwnProperty.call(e,"playerStatus")&&!$util.isInteger(e.playerStatus))return"playerStatus: integer expected";if(null!=e.properties&&Object.prototype.hasOwnProperty.call(e,"properties")){if(!$util.isObject(e.properties))return"properties: object expected";for(var t=Object.keys(e.properties),r=0;r<t.length;++r)if(!$util.isString(e.properties[t[r]]))return"properties: string{k:string} expected";}return null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.PlayerInfo)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.PlayerInfo();if(null!=e.playId&&(t.playId=String(e.playId)),null!=e.openId&&(t.openId=String(e.openId)),null!=e.playerStatus&&(t.playerStatus=0|e.playerStatus),e.properties){if("object"!=typeof e.properties)throw TypeError(".game.rtm.grpc.common.dto.rtm.PlayerInfo.properties: object expected");t.properties={};for(var r=Object.keys(e.properties),n=0;n<r.length;++n)t.properties[r[n]]=String(e.properties[r[n]]);}return t;},e.toObject=function(e,t){t||(t={});var r,n={};if((t.objects||t.defaults)&&(n.properties={}),t.defaults&&(n.playId="",n.openId="",n.playerStatus=0),null!=e.playId&&Object.prototype.hasOwnProperty.call(e,"playId")&&(n.playId=e.playId),null!=e.openId&&Object.prototype.hasOwnProperty.call(e,"openId")&&(n.openId=e.openId),null!=e.playerStatus&&Object.prototype.hasOwnProperty.call(e,"playerStatus")&&(n.playerStatus=e.playerStatus),e.properties&&(r=Object.keys(e.properties)).length){n.properties={};for(var o=0;o<r.length;++o)n.properties[r[o]]=e.properties[r[o]];}return n;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.PlayerInfo";},e;}(),n.RtmMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.messageType=0,e.prototype.message="",e.prototype.isNeedAdIdentify=!1,e.prototype.isAudit=!1,e.prototype.clientMsgId="",e.prototype.msgId="",e.prototype.senderOpenId="",e.prototype.senderPlayerId="",e.prototype.isFromOpenApi=!1,e.prototype.byteMsg=$util.newBuffer([]),e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.messageType&&Object.hasOwnProperty.call(e,"messageType")&&t.uint32(8).int32(e.messageType),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.isNeedAdIdentify&&Object.hasOwnProperty.call(e,"isNeedAdIdentify")&&t.uint32(24).bool(e.isNeedAdIdentify),null!=e.isAudit&&Object.hasOwnProperty.call(e,"isAudit")&&t.uint32(32).bool(e.isAudit),null!=e.clientMsgId&&Object.hasOwnProperty.call(e,"clientMsgId")&&t.uint32(42).string(e.clientMsgId),null!=e.msgId&&Object.hasOwnProperty.call(e,"msgId")&&t.uint32(50).string(e.msgId),null!=e.senderOpenId&&Object.hasOwnProperty.call(e,"senderOpenId")&&t.uint32(58).string(e.senderOpenId),null!=e.senderPlayerId&&Object.hasOwnProperty.call(e,"senderPlayerId")&&t.uint32(66).string(e.senderPlayerId),null!=e.isFromOpenApi&&Object.hasOwnProperty.call(e,"isFromOpenApi")&&t.uint32(72).bool(e.isFromOpenApi),null!=e.byteMsg&&Object.hasOwnProperty.call(e,"byteMsg")&&t.uint32(82).bytes(e.byteMsg),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(88).int64(e.timestamp),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.rtm.RtmMessage();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.messageType=e.int32();break;case 2:n.message=e.string();break;case 3:n.isNeedAdIdentify=e.bool();break;case 4:n.isAudit=e.bool();break;case 5:n.clientMsgId=e.string();break;case 6:n.msgId=e.string();break;case 7:n.senderOpenId=e.string();break;case 8:n.senderPlayerId=e.string();break;case 9:n.isFromOpenApi=e.bool();break;case 10:n.byteMsg=e.bytes();break;case 11:n.timestamp=e.int64();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.messageType&&Object.prototype.hasOwnProperty.call(e,"messageType")&&!$util.isInteger(e.messageType)?"messageType: integer expected":null!=e.message&&Object.prototype.hasOwnProperty.call(e,"message")&&!$util.isString(e.message)?"message: string expected":null!=e.isNeedAdIdentify&&Object.prototype.hasOwnProperty.call(e,"isNeedAdIdentify")&&"boolean"!=typeof e.isNeedAdIdentify?"isNeedAdIdentify: boolean expected":null!=e.isAudit&&Object.prototype.hasOwnProperty.call(e,"isAudit")&&"boolean"!=typeof e.isAudit?"isAudit: boolean expected":null!=e.clientMsgId&&Object.prototype.hasOwnProperty.call(e,"clientMsgId")&&!$util.isString(e.clientMsgId)?"clientMsgId: string expected":null!=e.msgId&&Object.prototype.hasOwnProperty.call(e,"msgId")&&!$util.isString(e.msgId)?"msgId: string expected":null!=e.senderOpenId&&Object.prototype.hasOwnProperty.call(e,"senderOpenId")&&!$util.isString(e.senderOpenId)?"senderOpenId: string expected":null!=e.senderPlayerId&&Object.prototype.hasOwnProperty.call(e,"senderPlayerId")&&!$util.isString(e.senderPlayerId)?"senderPlayerId: string expected":null!=e.isFromOpenApi&&Object.prototype.hasOwnProperty.call(e,"isFromOpenApi")&&"boolean"!=typeof e.isFromOpenApi?"isFromOpenApi: boolean expected":null!=e.byteMsg&&Object.prototype.hasOwnProperty.call(e,"byteMsg")&&!(e.byteMsg&&"number"==typeof e.byteMsg.length||$util.isString(e.byteMsg))?"byteMsg: buffer expected":null!=e.timestamp&&Object.prototype.hasOwnProperty.call(e,"timestamp")&&!($util.isInteger(e.timestamp)||e.timestamp&&$util.isInteger(e.timestamp.low)&&$util.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.rtm.RtmMessage)return e;var t=new $root.game.rtm.grpc.common.dto.rtm.RtmMessage();return null!=e.messageType&&(t.messageType=0|e.messageType),null!=e.message&&(t.message=String(e.message)),null!=e.isNeedAdIdentify&&(t.isNeedAdIdentify=Boolean(e.isNeedAdIdentify)),null!=e.isAudit&&(t.isAudit=Boolean(e.isAudit)),null!=e.clientMsgId&&(t.clientMsgId=String(e.clientMsgId)),null!=e.msgId&&(t.msgId=String(e.msgId)),null!=e.senderOpenId&&(t.senderOpenId=String(e.senderOpenId)),null!=e.senderPlayerId&&(t.senderPlayerId=String(e.senderPlayerId)),null!=e.isFromOpenApi&&(t.isFromOpenApi=Boolean(e.isFromOpenApi)),null!=e.byteMsg&&("string"==typeof e.byteMsg?$util.base64.decode(e.byteMsg,t.byteMsg=$util.newBuffer($util.base64.length(e.byteMsg)),0):e.byteMsg.length>=0&&(t.byteMsg=e.byteMsg)),null!=e.timestamp&&($util.Long?(t.timestamp=$util.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),t;},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults)if(r.messageType=0,r.message="",r.isNeedAdIdentify=!1,r.isAudit=!1,r.clientMsgId="",r.msgId="",r.senderOpenId="",r.senderPlayerId="",r.isFromOpenApi=!1,t.bytes===String?r.byteMsg="":(r.byteMsg=[],t.bytes!==Array&&(r.byteMsg=$util.newBuffer(r.byteMsg))),$util.Long){var n=new $util.Long(0,0,!1);r.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n;}else r.timestamp=t.longs===String?"0":0;return null!=e.messageType&&Object.prototype.hasOwnProperty.call(e,"messageType")&&(r.messageType=e.messageType),null!=e.message&&Object.prototype.hasOwnProperty.call(e,"message")&&(r.message=e.message),null!=e.isNeedAdIdentify&&Object.prototype.hasOwnProperty.call(e,"isNeedAdIdentify")&&(r.isNeedAdIdentify=e.isNeedAdIdentify),null!=e.isAudit&&Object.prototype.hasOwnProperty.call(e,"isAudit")&&(r.isAudit=e.isAudit),null!=e.clientMsgId&&Object.prototype.hasOwnProperty.call(e,"clientMsgId")&&(r.clientMsgId=e.clientMsgId),null!=e.msgId&&Object.prototype.hasOwnProperty.call(e,"msgId")&&(r.msgId=e.msgId),null!=e.senderOpenId&&Object.prototype.hasOwnProperty.call(e,"senderOpenId")&&(r.senderOpenId=e.senderOpenId),null!=e.senderPlayerId&&Object.prototype.hasOwnProperty.call(e,"senderPlayerId")&&(r.senderPlayerId=e.senderPlayerId),null!=e.isFromOpenApi&&Object.prototype.hasOwnProperty.call(e,"isFromOpenApi")&&(r.isFromOpenApi=e.isFromOpenApi),null!=e.byteMsg&&Object.prototype.hasOwnProperty.call(e,"byteMsg")&&(r.byteMsg=t.bytes===String?$util.base64.encode(e.byteMsg,0,e.byteMsg.length):t.bytes===Array?Array.prototype.slice.call(e.byteMsg):e.byteMsg),null!=e.timestamp&&Object.prototype.hasOwnProperty.call(e,"timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?$util.Long.prototype.toString.call(e.timestamp):t.longs===Number?new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.rtm.RtmMessage";},e;}(),n;}(),dto.ClientMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.code=0,e.prototype.seq="",e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.msg=$util.newBuffer([]),e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(18).string(e.seq),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(34).bytes(e.msg),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.ClientMessage();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.code=e.int32();break;case 2:n.seq=e.string();break;case 3:n.timestamp=e.int64();break;case 4:n.msg=e.bytes();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.code&&Object.prototype.hasOwnProperty.call(e,"code")&&!$util.isInteger(e.code)?"code: integer expected":null!=e.seq&&Object.prototype.hasOwnProperty.call(e,"seq")&&!$util.isString(e.seq)?"seq: string expected":null!=e.timestamp&&Object.prototype.hasOwnProperty.call(e,"timestamp")&&!($util.isInteger(e.timestamp)||e.timestamp&&$util.isInteger(e.timestamp.low)&&$util.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null!=e.msg&&Object.prototype.hasOwnProperty.call(e,"msg")&&!(e.msg&&"number"==typeof e.msg.length||$util.isString(e.msg))?"msg: buffer expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.ClientMessage)return e;var t=new $root.game.rtm.grpc.common.dto.ClientMessage();return null!=e.code&&(t.code=0|e.code),null!=e.seq&&(t.seq=String(e.seq)),null!=e.timestamp&&($util.Long?(t.timestamp=$util.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),null!=e.msg&&("string"==typeof e.msg?$util.base64.decode(e.msg,t.msg=$util.newBuffer($util.base64.length(e.msg)),0):e.msg.length>=0&&(t.msg=e.msg)),t;},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.code=0,r.seq="",$util.Long){var n=new $util.Long(0,0,!1);r.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n;}else r.timestamp=t.longs===String?"0":0;t.bytes===String?r.msg="":(r.msg=[],t.bytes!==Array&&(r.msg=$util.newBuffer(r.msg)));}return null!=e.code&&Object.prototype.hasOwnProperty.call(e,"code")&&(r.code=e.code),null!=e.seq&&Object.prototype.hasOwnProperty.call(e,"seq")&&(r.seq=e.seq),null!=e.timestamp&&Object.prototype.hasOwnProperty.call(e,"timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?$util.Long.prototype.toString.call(e.timestamp):t.longs===Number?new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),null!=e.msg&&Object.prototype.hasOwnProperty.call(e,"msg")&&(r.msg=t.bytes===String?$util.base64.encode(e.msg,0,e.msg.length):t.bytes===Array?Array.prototype.slice.call(e.msg):e.msg),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.ClientMessage";},e;}(),dto.ErrorCode=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.rtnCode=0,e.prototype.msg="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.rtnCode&&Object.hasOwnProperty.call(e,"rtnCode")&&t.uint32(8).int32(e.rtnCode),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.ErrorCode();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rtnCode=e.int32();break;case 2:n.msg=e.string();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.rtnCode&&Object.prototype.hasOwnProperty.call(e,"rtnCode")&&!$util.isInteger(e.rtnCode)?"rtnCode: integer expected":null!=e.msg&&Object.prototype.hasOwnProperty.call(e,"msg")&&!$util.isString(e.msg)?"msg: string expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.ErrorCode)return e;var t=new $root.game.rtm.grpc.common.dto.ErrorCode();return null!=e.rtnCode&&(t.rtnCode=0|e.rtnCode),null!=e.msg&&(t.msg=String(e.msg)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.rtnCode=0,r.msg=""),null!=e.rtnCode&&Object.prototype.hasOwnProperty.call(e,"rtnCode")&&(r.rtnCode=e.rtnCode),null!=e.msg&&Object.prototype.hasOwnProperty.call(e,"msg")&&(r.msg=e.msg),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.ErrorCode";},e;}(),dto.ServerMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.code=0,e.prototype.seq="",e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.msg=$util.newBuffer([]),e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(18).string(e.seq),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(34).bytes(e.msg),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.game.rtm.grpc.common.dto.ServerMessage();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.code=e.int32();break;case 2:n.seq=e.string();break;case 3:n.timestamp=e.int64();break;case 4:n.msg=e.bytes();break;default:e.skipType(7&o);}}return n;},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32());},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.code&&Object.prototype.hasOwnProperty.call(e,"code")&&!$util.isInteger(e.code)?"code: integer expected":null!=e.seq&&Object.prototype.hasOwnProperty.call(e,"seq")&&!$util.isString(e.seq)?"seq: string expected":null!=e.timestamp&&Object.prototype.hasOwnProperty.call(e,"timestamp")&&!($util.isInteger(e.timestamp)||e.timestamp&&$util.isInteger(e.timestamp.low)&&$util.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null!=e.msg&&Object.prototype.hasOwnProperty.call(e,"msg")&&!(e.msg&&"number"==typeof e.msg.length||$util.isString(e.msg))?"msg: buffer expected":null;},e.fromObject=function(e){if(e instanceof $root.game.rtm.grpc.common.dto.ServerMessage)return e;var t=new $root.game.rtm.grpc.common.dto.ServerMessage();return null!=e.code&&(t.code=0|e.code),null!=e.seq&&(t.seq=String(e.seq)),null!=e.timestamp&&($util.Long?(t.timestamp=$util.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),null!=e.msg&&("string"==typeof e.msg?$util.base64.decode(e.msg,t.msg=$util.newBuffer($util.base64.length(e.msg)),0):e.msg.length>=0&&(t.msg=e.msg)),t;},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.code=0,r.seq="",$util.Long){var n=new $util.Long(0,0,!1);r.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n;}else r.timestamp=t.longs===String?"0":0;t.bytes===String?r.msg="":(r.msg=[],t.bytes!==Array&&(r.msg=$util.newBuffer(r.msg)));}return null!=e.code&&Object.prototype.hasOwnProperty.call(e,"code")&&(r.code=e.code),null!=e.seq&&Object.prototype.hasOwnProperty.call(e,"seq")&&(r.seq=e.seq),null!=e.timestamp&&Object.prototype.hasOwnProperty.call(e,"timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?$util.Long.prototype.toString.call(e.timestamp):t.longs===Number?new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),null!=e.msg&&Object.prototype.hasOwnProperty.call(e,"msg")&&(r.msg=t.bytes===String?$util.base64.encode(e.msg,0,e.msg.length):t.bytes===Array?Array.prototype.slice.call(e.msg):e.msg),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/game.rtm.grpc.common.dto.ServerMessage";},e;}(),dto),common.constant=((constant={}).CodeType=(valuesById={},(values=Object.create(valuesById))[valuesById[0]="LOGIN"]=0,values[valuesById[1]="LOGIN_ACK"]=1,values[valuesById[2]="HEARTBEAT"]=2,values[valuesById[3]="HEARTBEAT_ACK"]=3,values[valuesById[4]="SUBSCRIBE_CHANNEL"]=4,values[valuesById[5]="SUBSCRIBE_CHANNEL_ACK"]=5,values[valuesById[6]="SEND_CHANNEL_MSG"]=6,values[valuesById[7]="SEND_CHANNEL_MSG_ACK"]=7,values[valuesById[8]="UNSUBSCRIBE_CHANNEL"]=8,values[valuesById[9]="UNSUBSCRIBE_CHANNEL_ACK"]=9,values[valuesById[10]="SEND_P2P_MSG"]=10,values[valuesById[11]="SEND_P2P_MSG_ACK"]=11,values[valuesById[12]="QUERY_CHANNEL_INFO"]=12,values[valuesById[13]="QUERY_CHANNEL_INFO_ACK"]=13,values[valuesById[14]="QUERY_CHANNEL_MSG"]=14,values[valuesById[15]="QUERY_CHANNEL_MSG_ACK"]=15,values[valuesById[16]="SET_CHANNEL_PROPERTY"]=16,values[valuesById[17]="SET_CHANNEL_PROPERTY_ACK"]=17,values[valuesById[18]="QUERY_CHANNEL_PROPERTY"]=18,values[valuesById[19]="QUERY_CHANNEL_PROPERTY_ACK"]=19,values[valuesById[20]="DELETE_CHANNEL_PROPERTY"]=20,values[valuesById[21]="DELETE_CHANNEL_PROPERTY_ACK"]=21,values[valuesById[22]="SET_CHANNEL_PLAYER_PROPERTY"]=22,values[valuesById[23]="SET_CHANNEL_PLAYER_PROPERTY_ACK"]=23,values[valuesById[24]="QUERY_CHANNEL_PLAYER_PROPERTY"]=24,values[valuesById[25]="QUERY_CHANNEL_PLAYER_PROPERTY_ACK"]=25,values[valuesById[26]="DELETE_CHANNEL_PLAYER_PROPERTY"]=26,values[valuesById[27]="DELETE_CHANNEL_PLAYER_PROPERTY_ACK"]=27,values[valuesById[1001]="SUBSCRIBE_CHANNEL_RESULT_NOTIFY"]=1001,values[valuesById[1002]="SEND_CHANNEL_MSG_RESULT_NOTIFY"]=1002,values[valuesById[1003]="UNSUBSCRIBE_CHANNEL_RESULT_NOTIFY"]=1003,values[valuesById[1004]="SEND_P2P_MSG_RESULT_NOTIFY"]=1004,values[valuesById[1005]="QUERY_CHANNEL_INFO_RESULT_NOTIFY"]=1005,values[valuesById[1006]="QUERY_CHANNEL_MSG_RESULT_NOTIFY"]=1006,values[valuesById[1007]="SET_CHANNEL_PROPERTY_RESULT_NOTIFY"]=1007,values[valuesById[1008]="QUERY_CHANNEL_PROPERTY_RESULT_NOTIFY"]=1008,values[valuesById[1009]="DELETE_CHANNEL_PROPERTY_RESULT_NOTIFY"]=1009,values[valuesById[1010]="SET_CHANNEL_PLAYER_PROPERTY_RESULT_NOTIFY"]=1010,values[valuesById[1011]="QUERY_CHANNEL_PLAYER_PROPERTY_RESULT_NOTIFY"]=1011,values[valuesById[1012]="DELETE_CHANNEL_PLAYER_PROPERTY_RESULT_NOTIFY"]=1012,values[valuesById[2001]="CHANNEL_MSG_NOTIFY"]=2001,values[valuesById[2002]="P2P_MSG_NOTIFY"]=2002,values[valuesById[2003]="CHANNEL_MEMBER_CHANGE_NOTIFY"]=2003,values[valuesById[2004]="SET_CHANNEL_PROPERTY_NOTIFY"]=2004,values[valuesById[2005]="DELETE_CHANNEL_PROPERTY_NOTIFY"]=2005,values[valuesById[2006]="SET_CHANNEL_PLAYER_PROPERTY_NOTIFY"]=2006,values[valuesById[2007]="DELETE_CHANNEL_PLAYER_PROPERTY_NOTIFY"]=2007,values),constant.NotifyType=function(){var e={},t=Object.create(e);return t[e[0]="SEND_BY_CHANNEL_BROADCAST"]=0,t[e[1]="SEND_BY_PLAYER_LIST"]=1,t;}(),constant.PlayerStatus=function(){var e={},t=Object.create(e);return t[e[0]="DISCONNECT"]=0,t[e[1]="CONNECT"]=1,t;}(),constant),common),grpc),rtm),game);var compiled=$root,ClientMessage=compiled.game.rtm.grpc.common.dto.ClientMessage;const ReqMsgHandlerLog=Logger.getInstance("ReqMsgHandler"),MSG_TIMEOUT=4e3;class ReqMsgHandler{constructor(){this._seq="",this.timestamp=0;}ackHandle(e,t){null==ReqMsgHandlerLog||ReqMsgHandlerLog.error("handleEvent ack message failed, by code = ",e,", msg = ",t);const r=RtnCodeMapper.getRtn(e);this.callbackHandle(r.code,t);}timeoutHandle(){this.callbackHandle(exports.HWPGMEError.REQUEST_SEND_TIMEOUT,"request timeout");}isTimeOut(){return new Date().getTime()-this.timestamp>MSG_TIMEOUT;}sendData(){var e;try{const t=this.buildClientMessage();RtmCache.getInstance().addReqMsg(this);const r=null===(e=RtmCache.getInstance().getRtmWebsocketClient())||void 0===e?void 0:e.send(t);r!==exports.HWPGMEError.SUCCESS&&this.callbackHandle(r,"sendData failed");}catch(e){this.callbackHandle(exports.HWPGMEError.INNER_ERROR,null==e?void 0:e.message);}}buildClientMessage(){this._seq=createRequestId(),this.timestamp=new Date().getTime();const e=ClientMessage.create({code:this.getReqCode(),seq:this._seq,timestamp:this.timestamp,msg:this.getReqMsg()});return ClientMessage.encode(e).finish();}get seq(){return this._seq;}getCommonResult(e){return e===exports.HWPGMEError.SUCCESS?CommonResult.SUCCESS:CommonResult.FAILED;}doResultHandle(){var e,t,r,n,o,i;const s=null!==(r=null===(t=null===(e=this.result)||void 0===e?void 0:e.errorCode)||void 0===t?void 0:t.rtnCode)&&void 0!==r?r:exports.HWPGMEError.SUCCESS,a=null!==(i=null===(o=null===(n=this.result)||void 0===n?void 0:n.errorCode)||void 0===o?void 0:o.msg)&&void 0!==i?i:"",l=RtnCodeMapper.getRtn(s);this.callbackHandle(l.code,a);}}var CodeType$e=compiled.game.rtm.grpc.common.constant.CodeType,P2PMessage=compiled.game.rtm.grpc.common.dto.rtm.P2PMessage,RtmMessage$1=compiled.game.rtm.grpc.common.dto.rtm.RtmMessage,SendP2PMsgReq=compiled.game.rtm.grpc.common.dto.rtm.req.SendP2PMsgReq,SendP2PMsgResult=compiled.game.rtm.grpc.common.dto.rtm.result.SendP2PMsgResult;class SendP2pMsgReqHandler extends ReqMsgHandler{constructor(e,t){super(),this.req=e,this.clientMsgId=t;}resultHandle(e){this.result=SendP2PMsgResult.decode(e.msg).toJSON(),this.doResultHandle();}callbackHandle(e,t){var r;const n={code:e,msg:null!=t?t:"",peerId:this.req.peerId,clientMsgId:this.clientMsgId,serverMsgId:e===exports.HWPGMEError.SUCCESS?null===(r=this.result)||void 0===r?void 0:r.msgId:"",request:this.req};EngineHooks.call("onPublishRtmPeerMessage",this.getCommonResult(e),[n]);}getReqCode(){return CodeType$e.SEND_P2P_MSG;}getReqMsg(){const e=RtmMessage$1.create({messageType:this.req.messageType,clientMsgId:this.clientMsgId,message:this.req.messageType===exports.MessageType.TEXT_MESSAGE?this.req.message:"",byteMsg:this.req.messageType===exports.MessageType.BINARY_MESSAGE?this.req.message:null}),t=P2PMessage.create({receiverOpenId:this.req.peerId,rtmMessage:e,receiverPlayerId:this._receiverPlayerId}),r=SendP2PMsgReq.create({p2pMessage:t});return SendP2PMsgReq.encode(r).finish();}set receiverPlayerId(e){this._receiverPlayerId=e;}}const CHANNEL_ID_REGEX=/^[a-zA-Z0-9_]{1,32}$/;class RtmCommonUtils{static channelIdIsInvalid(e,t){return!CHANNEL_ID_REGEX.test(e)&&(t.callbackHandle(exports.HWPGMEError.PARAM_INVALID,"channelId invalid"),!0);}static handleException(e,t){e instanceof HWPGMEException?t.callbackHandle(e.code,e.message):t.callbackHandle(exports.HWPGMEError.INNER_ERROR,null==e?void 0:e.message);}static parseMemberInfos(e){const t=[];return e&&e.forEach(e=>{t.push(this.parseMemberInfo(e));}),t;}static parseMemberInfo(e){return{openId:(null==e?void 0:e.openId)?null==e?void 0:e.openId:"",status:(null==e?void 0:e.playerStatus)?null==e?void 0:e.playerStatus:0,playerProperties:(null==e?void 0:e.properties)?null==e?void 0:e.properties:null};}}class RtmPeerService{constructor(){}static getInstance(){return RtmPeerService.instance||(RtmPeerService.instance=new RtmPeerService()),RtmPeerService.instance;}publishRtmPeerMessage(e,t){return __awaiter(this,void 0,void 0,function*(){const r=new SendP2pMsgReqHandler(t,e);try{if(""===t.peerId||t.peerId.length>128)return void r.callbackHandle(exports.HWPGMEError.PARAM_INVALID,"peerId is invalid");ServiceParams.checkParamsInvalid([null==t?void 0:t.peerId],null==t?void 0:t.messageType,null==t?void 0:t.message);const e=yield PlayerDelegate.getPlayerId([t.peerId]);if(0===e.length)return void r.callbackHandle(exports.HWPGMEError.RECEIVERS_NOT_EXIST_OR_OFFLINE,"receiver is offline or not exist");r.receiverPlayerId=e[0],r.sendData();}catch(e){RtmCommonUtils.handleException(e,r);}});}}var CodeType$d=compiled.game.rtm.grpc.common.constant.CodeType,SubscribeChannelReq=compiled.game.rtm.grpc.common.dto.rtm.req.SubscribeChannelReq,ChannelOptResult$1=compiled.game.rtm.grpc.common.dto.rtm.result.ChannelOptResult;const SubscribeChannelReqHandlerLog=Logger.getInstance("SubscribeChannelReqHandler"),MAX_RESUBSCRIBE_TIMES=10;class SubscribeChannelReqHandler extends ReqMsgHandler{constructor(e){super(),this.isResubscribeChannel=!1,this.reconnectTimes=0,this.req=e;}resultHandle(e){this.result=ChannelOptResult$1.decode(e.msg).toJSON(),this.doResultHandle();}callbackHandle(e,t){this.isResubscribeChannel?this.handleOnResubscribe(e,t):(this.addSubscribeChannelCache(e),this.doCallback(e,t));}addSubscribeChannelCache(e){if(e!==exports.HWPGMEError.SUCCESS)return;null==SubscribeChannelReqHandlerLog||SubscribeChannelReqHandlerLog.info("subscribe channelId [",this.req.channelId,"] success");const t={channelId:this.req.channelId,playerProperties:this.req.playerProperties};RtmCache.getInstance().addSubscribeChannel(t);}doCallback(e,t){const r={code:e,msg:t,channelId:this.req.channelId};EngineHooks.call("onSubscribeRtmChannel",CommonResult.SUCCESS,[r]);}handleOnResubscribe(e,t){if(e!==exports.HWPGMEError.SUCCESS){if(e!==exports.HWPGMEError.RTM_DISCONNECTION){if(e===exports.HWPGMEError.MAX_CHANNEL_COUNT_OVER_LIMIT||e===exports.HWPGMEError.MAX_PLAYER_COUNT_OVER_LIMIT)return null==SubscribeChannelReqHandlerLog||SubscribeChannelReqHandlerLog.error("stop resubscribe channelId ["+this.req.channelId+"] . Because the code is "+e+", the msg is "+t),RtmCache.getInstance().removeSubscribeChannel(this.req.channelId),void this.doCallback(e,t);if(this.reconnectTimes>MAX_RESUBSCRIBE_TIMES)return null==SubscribeChannelReqHandlerLog||SubscribeChannelReqHandlerLog.error("stop resubscribe channelId ["+this.req.channelId+"]. Because it is over max resubscribe times"),RtmCache.getInstance().removeSubscribeChannel(this.req.channelId),void this.doCallback(exports.HWPGMEError.RE_SUBSCRIBE_CHANNEL_FAILED,t);null==SubscribeChannelReqHandlerLog||SubscribeChannelReqHandlerLog.warn("do resubscribe channelId ["+this.req.channelId+"] again. Because the code is "+e+", the msg is "+t),this.doResubscribeAction();}else null==SubscribeChannelReqHandlerLog||SubscribeChannelReqHandlerLog.error("stop resubscribe channelId ["+this.req.channelId+"]. Because rtm is not connect");}else null==SubscribeChannelReqHandlerLog||SubscribeChannelReqHandlerLog.info("resubscribe channelId [",this.req.channelId,"] success");}doResubscribeAction(){this.isResubscribeChannel=!0,this.reconnectTimes++,this.sendData();}getReqCode(){return CodeType$d.SUBSCRIBE_CHANNEL;}getReqMsg(){const e=SubscribeChannelReq.create({channelId:this.req.channelId,playerOption:this.req.playerProperties});return SubscribeChannelReq.encode(e).finish();}}var CodeType$c=compiled.game.rtm.grpc.common.constant.CodeType,UnsubscribeChannelReq=compiled.game.rtm.grpc.common.dto.rtm.req.UnsubscribeChannelReq,ChannelOptResult=compiled.game.rtm.grpc.common.dto.rtm.result.ChannelOptResult;class UnsubscribeChannelReqHandler extends ReqMsgHandler{constructor(e){super(),this.req=e;}resultHandle(e){this.result=ChannelOptResult.decode(e.msg).toJSON(),this.doResultHandle();}callbackHandle(e,t){const r={code:e,msg:t,channelId:this.req.channelId};e===exports.HWPGMEError.SUCCESS&&RtmCache.getInstance().removeSubscribeChannel(this.req.channelId),EngineHooks.call("onUnSubscribeRtmChannel",this.getCommonResult(e),[r]);}getReqCode(){return CodeType$c.UNSUBSCRIBE_CHANNEL;}getReqMsg(){const e=UnsubscribeChannelReq.create({channelId:this.req.channelId});return UnsubscribeChannelReq.encode(e).finish();}}var CodeType$b=compiled.game.rtm.grpc.common.constant.CodeType,SendChannelMsgReq=compiled.game.rtm.grpc.common.dto.rtm.req.SendChannelMsgReq,ChannelMessage=compiled.game.rtm.grpc.common.dto.rtm.ChannelMessage,RtmMessage=compiled.game.rtm.grpc.common.dto.rtm.RtmMessage,SendChannelMsgResult=compiled.game.rtm.grpc.common.dto.rtm.result.SendChannelMsgResult;class SendChannelMsgReqHandler extends ReqMsgHandler{constructor(e,t){super(),this.req=e,this.clientMsgId=t;}resultHandle(e){this.result=SendChannelMsgResult.decode(e.msg).toJSON(),this.doResultHandle();}callbackHandle(e,t){var r;const n={code:e,msg:t,channelId:this.req.channelId,clientMsgId:this.clientMsgId,serverMsgId:null===(r=this.result)||void 0===r?void 0:r.msgId,request:this.req};EngineHooks.call("onPublishRtmChannelMessage",this.getCommonResult(e),[n]);}getReqCode(){return CodeType$b.SEND_CHANNEL_MSG;}getReqMsg(){var e,t,r;const n=RtmMessage.create({messageType:this.req.messageType,message:this.req.messageType===exports.MessageType.TEXT_MESSAGE?this.req.message:"",byteMsg:this.req.messageType===exports.MessageType.BINARY_MESSAGE?this.req.message:null,clientMsgId:this.clientMsgId,isNeedAdIdentify:null!==(e=this.req.isAdsIdentify)&&void 0!==e&&e,isAudit:null!==(t=this.req.isContentIdentify)&&void 0!==t&&t}),o=ChannelMessage.create({channelId:this.req.channelId,rtmMessage:n,receiver:this._playerIds,isAllowCacheMsg:null!==(r=this.req.isAllowCacheMsg)&&void 0!==r&&r}),i=SendChannelMsgReq.create({channelMessage:o});return SendChannelMsgReq.encode(i).finish();}set playerIds(e){this._playerIds=e;}}var CodeType$a=compiled.game.rtm.grpc.common.constant.CodeType,QueryChannelReq=compiled.game.rtm.grpc.common.dto.rtm.req.QueryChannelReq,QueryChannelResult=compiled.game.rtm.grpc.common.dto.rtm.result.QueryChannelResult;class QueryChannelInfoReqHandler extends ReqMsgHandler{constructor(e){super(),this.req=e;}resultHandle(e){this.result=QueryChannelResult.decode(e.msg).toJSON(),this.doResultHandle();}callbackHandle(e,t){var r,n;const o={code:e,msg:t,channelId:this.req.channelId,memberCount:null!==(n=null===(r=this.result)||void 0===r?void 0:r.number)&&void 0!==n?n:0,memberInfos:this.parseMemberInfos(e)};EngineHooks.call("onGetRtmChannelInfo",this.getCommonResult(e),[o]);}parseMemberInfos(e){var t;return e!==exports.HWPGMEError.SUCCESS?[]:RtmCommonUtils.parseMemberInfos(null===(t=this.result)||void 0===t?void 0:t.playerInfo);}getReqCode(){return CodeType$a.QUERY_CHANNEL_INFO;}getReqMsg(){const e=QueryChannelReq.create({channelId:this.req.channelId,isReturnMembers:this.req.isReturnMembers});return QueryChannelReq.encode(e).finish();}}var CodeType$9=compiled.game.rtm.grpc.common.constant.CodeType,QueryChannelMsgReq=compiled.game.rtm.grpc.common.dto.rtm.req.QueryChannelMsgReq,QueryChannelMsgResult=compiled.game.rtm.grpc.common.dto.rtm.result.QueryChannelMsgResult;class GetRtmChannelHistoryMessagesReqHandler extends ReqMsgHandler{constructor(e){super(),this.req=e;}resultHandle(e){this.result=QueryChannelMsgResult.decode(e.msg),this.doResultHandle();}callbackHandle(e,t){const r={code:e,msg:t,channelId:this.req.channelId,channelMessages:this.parseChannelMsg(e)};EngineHooks.call("onGetRtmChannelHistoryMessages",this.getCommonResult(e),[r]);}parseChannelMsg(e){var t,r;if(e!==exports.HWPGMEError.SUCCESS)return[];const n=[];return(null===(t=this.result)||void 0===t?void 0:t.rtmMessage)&&(null===(r=this.result)||void 0===r||r.rtmMessage.forEach(e=>{var t;const r={channelId:null!==(t=this.req.channelId)&&void 0!==t?t:"",senderId:e.senderOpenId,messageType:e.messageType,message:e.messageType===exports.MessageType.TEXT_MESSAGE?e.message:e.byteMsg,isFromOpenApi:null==e?void 0:e.isFromOpenApi,timestamp:null==e?void 0:e.timestamp,clientMsgId:e.clientMsgId,serverMsgId:e.serverMsgId};n.push(r);})),n;}getReqCode(){return CodeType$9.QUERY_CHANNEL_MSG;}getReqMsg(){const e=QueryChannelMsgReq.create({channelId:this.req.channelId,startTime:this.req.startTime,count:this.req.count});return QueryChannelMsgReq.encode(e).finish();}}class RtmChannelService{constructor(){}static getInstance(){return RtmChannelService.instance||(RtmChannelService.instance=new RtmChannelService()),RtmChannelService.instance;}subscribeRtmChannel(e){const t=new SubscribeChannelReqHandler(e);try{if(RtmCommonUtils.channelIdIsInvalid(e.channelId,t))return;const r=[...RtmCache.getInstance().getSubscribedChannelMap().keys()];ServiceParams.checkMaxRtmSubscribeLimit(r),t.sendData();}catch(e){RtmCommonUtils.handleException(e,t);}}unSubscribeRtmChannel(e){const t=new UnsubscribeChannelReqHandler(e);RtmCommonUtils.channelIdIsInvalid(e.channelId,t)||t.sendData();}publishRtmChannelMessage(e,t){var r;return __awaiter(this,void 0,void 0,function*(){const n=new SendChannelMsgReqHandler(e,t);try{if(RtmCommonUtils.channelIdIsInvalid(e.channelId,n))return;const t=null!==(r=null==e?void 0:e.receivers)&&void 0!==r?r:[];ServiceParams.checkParamsInvalid(t,null==e?void 0:e.messageType,null==e?void 0:e.message);const o=yield PlayerDelegate.getPlayerId(null==t?void 0:t.filter(e=>e!==EngineSession.getOpenId()));if(0!==(null==t?void 0:t.length)&&0===(null==o?void 0:o.length))return void n.callbackHandle(exports.HWPGMEError.RECEIVERS_NOT_EXIST_OR_OFFLINE,"receivers not exist or offline");n.playerIds=o,n.sendData();}catch(e){RtmCommonUtils.handleException(e,n);}});}getRtmSubscribedChannelInfo(){return{code:0,msg:"obtainSubscribedChannelInfoResult success",channelIds:[...RtmCache.getInstance().getSubscribedChannelMap().keys()]};}getRtmChannelInfo(e){const t=new QueryChannelInfoReqHandler(e);RtmCommonUtils.channelIdIsInvalid(e.channelId,t)||t.sendData();}getRtmChannelHistoryMessages(e){const t=new GetRtmChannelHistoryMessagesReqHandler(e);RtmCommonUtils.channelIdIsInvalid(e.channelId,t)||t.sendData();}}var AckMessage$1=compiled.game.rtm.grpc.common.dto.AckMessage;const LoginAckHandlerLog=Logger.getInstance("LoginAckHandler");class LoginAckHandler{handleEvent(e){var t;const r=null!==(t=AckMessage$1.decode(e.msg).toJSON().rtnCode)&&void 0!==t?t:exports.HWPGMEError.SUCCESS;if(r===exports.HWPGMEError.SUCCESS)return null==LoginAckHandlerLog||LoginAckHandlerLog.info("login rtm success"),void RtmWebSocketService.getInstance().handleConnectionStatus(ConnectionStatus.CONNECT,"success");null==LoginAckHandlerLog||LoginAckHandlerLog.error("LoginAckHandler failed , the rtnCode is ",r),RtmWebSocketService.getInstance().close(!1);}}var CodeType$8=compiled.game.rtm.grpc.common.constant.CodeType,AckMessage=compiled.game.rtm.grpc.common.dto.AckMessage;const CommonAckResultHandlerLog=Logger.getInstance("LoginAckHandler");class CommonAckResultHandler{handleEvent(e){var t,r;const n=RtmCache.getInstance().getReqMsg(e.seq);if(void 0===n)return void(null==CommonAckResultHandlerLog||CommonAckResultHandlerLog.error("cannot find req msg. the codeType is "+e.code+", the seq is "+e.seq));if(e.code<CodeType$8.SUBSCRIBE_CHANNEL_RESULT_NOTIFY){e.code===CodeType$8.HEARTBEAT_ACK&&RtmCache.getInstance().removeReqMsg(e.seq);const o=AckMessage.decode(e.msg).toJSON(),i=null!==(t=o.rtnCode)&&void 0!==t?t:exports.HWPGMEError.SUCCESS;if(i===exports.HWPGMEError.SUCCESS)return;RtmCache.getInstance().removeReqMsg(e.seq),n.ackHandle(i,null!==(r=o.msg)&&void 0!==r?r:"");}else RtmCache.getInstance().removeReqMsg(e.seq),n.resultHandle(e);}}var ChannelMessageNotify=compiled.game.rtm.grpc.common.dto.rtm.notify.ChannelMessageNotify;class ChannelMsgNotifyHandler{handleEvent(e){var t,r,n;const o=ChannelMessageNotify.decode(e.msg),i=null===(t=null==o?void 0:o.channelMessage)||void 0===t?void 0:t.rtmMessage;if(EngineSession.getPlayerId()===i.senderPlayerId)return;const s={channelId:(null===(r=null==o?void 0:o.channelMessage)||void 0===r?void 0:r.channelId)?null===(n=o.channelMessage)||void 0===n?void 0:n.channelId:"",senderId:i.senderOpenId,messageType:i.messageType,message:i.messageType===exports.MessageType.TEXT_MESSAGE?i.message:i.byteMsg,isFromOpenApi:null==i?void 0:i.isFromOpenApi,timestamp:i.timestamp,clientMsgId:i.clientMsgId,serverMsgId:i.msgId};EngineHooks.call("onReceiveRtmChannelMessage",CommonResult.SUCCESS,[s]);}}var P2PMessageNotify=compiled.game.rtm.grpc.common.dto.rtm.notify.P2PMessageNotify;class P2PMsgNotifyHandler{handleEvent(e){var t;const r=P2PMessageNotify.decode(e.msg),n=null===(t=null==r?void 0:r.p2pMessage)||void 0===t?void 0:t.rtmMessage;if(EngineSession.getPlayerId()===(null==n?void 0:n.senderPlayerId))return;const o={senderId:n.senderOpenId,messageType:n.messageType,message:n.messageType===exports.MessageType.TEXT_MESSAGE?n.message:n.byteMsg,isFromOpenApi:n.isFromOpenApi,timestamp:n.timestamp,clientMsgId:n.clientMsgId,serverMsgId:n.msgId};EngineHooks.call("onReceiveRtmPeerMessage",CommonResult.SUCCESS,[o]);}}var SetChannelPropertyNotify=compiled.game.rtm.grpc.common.dto.rtm.notify.SetChannelPropertyNotify;class DeleteRtmChannelPropertiesNotifyHandler{handleEvent(e){const t=SetChannelPropertyNotify.decode(e.msg).toJSON(),r={channelId:null==t?void 0:t.channelId,channelProperties:null==t?void 0:t.properties};EngineHooks.call("onRtmChannelPropertiesChanged",CommonResult.SUCCESS,[r]);}}class SetRtmChannelPropertiesNotifyHandler extends DeleteRtmChannelPropertiesNotifyHandler{}var SetChannelPlayerPropertyNotify=compiled.game.rtm.grpc.common.dto.rtm.notify.SetChannelPlayerPropertyNotify;class DeleteRtmChannelPlayerPropertiesNotifyHandler{handleEvent(e){const t=SetChannelPlayerPropertyNotify.decode(e.msg).toJSON(),r={channelId:null==t?void 0:t.channelId,playerInfo:RtmCommonUtils.parseMemberInfo(null==t?void 0:t.playerInfo)};EngineHooks.call("onRtmChannelPlayerPropertiesChanged",CommonResult.SUCCESS,[r]);}}class SetRtmChannelPlayerPropertiesNotifyHandler extends DeleteRtmChannelPlayerPropertiesNotifyHandler{}var CodeType$7=compiled.game.rtm.grpc.common.constant.CodeType,ServerMessage=compiled.game.rtm.grpc.common.dto.ServerMessage;const RtmEventHandleManagerLog=Logger.getInstance("RtmEventHandleManager");class RtmEventHandleManager{constructor(){this.eventHandlerMap=new Map(),this.commonAckResultHandler=new CommonAckResultHandler(),this.eventHandlerMap.set(CodeType$7.LOGIN_ACK,new LoginAckHandler()),this.eventHandlerMap.set(CodeType$7.CHANNEL_MSG_NOTIFY,new ChannelMsgNotifyHandler()),this.eventHandlerMap.set(CodeType$7.P2P_MSG_NOTIFY,new P2PMsgNotifyHandler()),this.eventHandlerMap.set(CodeType$7.SET_CHANNEL_PROPERTY_NOTIFY,new SetRtmChannelPropertiesNotifyHandler()),this.eventHandlerMap.set(CodeType$7.DELETE_CHANNEL_PROPERTY_NOTIFY,new DeleteRtmChannelPropertiesNotifyHandler()),this.eventHandlerMap.set(CodeType$7.SET_CHANNEL_PLAYER_PROPERTY_NOTIFY,new SetRtmChannelPlayerPropertiesNotifyHandler()),this.eventHandlerMap.set(CodeType$7.DELETE_CHANNEL_PLAYER_PROPERTY_NOTIFY,new DeleteRtmChannelPlayerPropertiesNotifyHandler());}static getInstance(){return RtmEventHandleManager.instance||(RtmEventHandleManager.instance=new RtmEventHandleManager()),RtmEventHandleManager.instance;}onHandleEvent(e){let t;try{const r=ServerMessage.decode(new Uint8Array(e));t=r.code;let n=this.eventHandlerMap.get(r.code);if(void 0===n){if(!(r.code<CodeType$7.CHANNEL_MSG_NOTIFY))return void(null==RtmEventHandleManagerLog||RtmEventHandleManagerLog.warn("unknown event. the code is ",r.code));n=this.commonAckResultHandler;}null==n||n.handleEvent(r);}catch(e){null==RtmEventHandleManagerLog||RtmEventHandleManagerLog.error("code is ",t,", unknown exception is ",null==e?void 0:e.message);}}}var CodeType$6=compiled.game.rtm.grpc.common.constant.CodeType;class HeartbeatReqHandler extends ReqMsgHandler{constructor(){super();}resultHandle(e){}callbackHandle(e,t){}getReqCode(){return CodeType$6.HEARTBEAT;}getReqMsg(){return new Uint8Array();}}const RtmHeartbeatServiceLog=Logger.getInstance("RtmHeartbeatServiceLog");class RtmHeartbeatService{constructor(){this.heartbeatCycle=1e3,this.heartbeatTimer=null;}static getInstance(){return RtmHeartbeatService.instance||(RtmHeartbeatService.instance=new RtmHeartbeatService()),RtmHeartbeatService.instance;}startHeartbeat(){this.stopHeartbeat(),null==RtmHeartbeatServiceLog||RtmHeartbeatServiceLog.info("start rtm Heartbeat"),this.heartbeatTimer=setInterval(()=>{new HeartbeatReqHandler().sendData();},this.heartbeatCycle);}stopHeartbeat(){this.heartbeatTimer&&(null==RtmHeartbeatServiceLog||RtmHeartbeatServiceLog.info("stop rtm Heartbeat"),clearInterval(this.heartbeatTimer),this.heartbeatTimer=null);}}const RtmMsgTimeoutCheckerLog=Logger.getInstance("RtmMsgTimeoutChecker"),CHECK_INTERVAL=1e3;class RtmMsgTimeoutChecker{constructor(){}static getInstance(){return RtmMsgTimeoutChecker.instance||(RtmMsgTimeoutChecker.instance=new RtmMsgTimeoutChecker()),RtmMsgTimeoutChecker.instance;}startMsgTimeoutChecker(){this.timeoutId&&this.stopMsgTimeoutChecker(),null==RtmMsgTimeoutCheckerLog||RtmMsgTimeoutCheckerLog.info("start rtm msg timeout check"),this.runChecker();}runChecker(){this.timeoutId=setTimeout(()=>{RtmCache.getInstance().getTimeoutReqMsg().forEach(e=>e.timeoutHandle()),RtmMsgTimeoutChecker.getInstance().runChecker();},CHECK_INTERVAL);}stopMsgTimeoutChecker(){this.timeoutId&&(null==RtmMsgTimeoutCheckerLog||RtmMsgTimeoutCheckerLog.info("stop rtm msg timeout check"),clearTimeout(this.timeoutId)),this.timeoutId=void 0;}}const RtmWebSocketServiceLog=Logger.getInstance("RtmWebSocketServiceLog");class RtmWebSocketService{constructor(){this.MAX_RECONNECTION_COUNT=10,this.RECONNECT_INTERVAL=1e3,this.reconnectCount=0,this.isFirstConnection=!1,this.isDestroyRtm=!0,this.ws=null,this.isConnecting=!1;}static getInstance(){var e,t,r,n,o;return RtmWebSocketService.instance||(RtmWebSocketService.instance=new RtmWebSocketService(),RtmCache.getInstance().setRtmWebsocketClient(RtmWebSocketService.instance),"undefined"==typeof cc||(null===(e=null===cc||void 0===cc?void 0:cc.sys)||void 0===e?void 0:e.platform)!==(null===(t=null===cc||void 0===cc?void 0:cc.sys)||void 0===t?void 0:t.OPENHARMONY)&&(null===(r=null===cc||void 0===cc?void 0:cc.sys)||void 0===r?void 0:r.platform)!==(null===(o=null===(n=null===cc||void 0===cc?void 0:cc.sys)||void 0===n?void 0:n.Platform)||void 0===o?void 0:o.OPENHARMONY)||(RtmWebSocketService.isCocosHarmony=!0)),RtmWebSocketService.instance;}connect(){return __awaiter(this,void 0,void 0,function*(){RtmMsgTimeoutChecker.getInstance().startMsgTimeoutChecker(),this.isFirstConnection=!0,this.isDestroyRtm=!1,this.clearReconnect(),yield this.doConnect();});}clearReconnect(){this.reconnectCount=0,this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null);}doConnect(){return __awaiter(this,void 0,void 0,function*(){null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.info("begin to do rtm websocket connect"),this.isConnecting=!0;let e={code:exports.HWPGMEError.INNER_ERROR,message:""};try{const t=yield RoomService.rtmChannelCreateApply(!1);if(e=RtnCodeMapper.getRtn(t.rtnCode),e.code===exports.HWPGMEError.SUCCESS)return void this.openConnect(null==t?void 0:t.routerAddr,null==t?void 0:t.ticket);null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.error("rtmChannelCreateApply failed. the rtnCode is ",t.rtnCode);}catch(t){t instanceof HWPGMEException?(e.code=t.code,null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.error("rtmChannelCreateApply failed. the rtnCode is ",e.code)):null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.error("rtmChannelCreateApply failed. unknown exception is ",null==t?void 0:t.message);}if(e.code===exports.HWPGMEError.AUTH_FAILED)return this.isConnecting=!1,null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.error("doConnect failed by auth failed"),void GameMediaEngine.destroyEngine(!0);this.isConnecting=!1,this.reconnect(e.code);});}openConnect(e,t){RtmWebSocketService.isCocosHarmony?this.ws=new WebSocket(RtmWebSocketService.getEndpointAddress(e,t,EngineSession.getPlayerId()),null,RtmCache.certPath):this.ws=new WebSocket(RtmWebSocketService.getEndpointAddress(e,t,EngineSession.getPlayerId())),this.ws.binaryType="arraybuffer",this.ws.onopen=RtmWebSocketService.onopen.bind(this),this.ws.onmessage=RtmWebSocketService.onmessage.bind(this),this.ws.onclose=RtmWebSocketService.onclose.bind(this),this.ws.onerror=RtmWebSocketService.onerror.bind(this);}static getEndpointAddress(e,t,r){return`wss://${e}/hw-game-mme/endpoint/rtm?sdkVersion=1.14.2.300&ticket=${t}&playerId=${r}`;}reconnect(e){null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.info("start reconnect by rtnCode = "+e),this.reconnectTimeoutId=setTimeout(()=>{RtmWebSocketService.getInstance().doReconnect(e);},this.RECONNECT_INTERVAL);}isRejectReconnect(){return this.isConnecting||this.isDestroyRtm||RtmCache.getInstance().getConnectionStatus()===ConnectionStatus.CONNECT;}doReconnect(e){if(null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.info("begin to do rtm websocket reconnect"),this.isRejectReconnect())null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.error("cannot do reconnect rtm websocket, because it is may in connecting or connect or destroyEngine state");else{if(e===exports.HWPGMEError.NET_ERROR&&(this.reconnectCount=0),this.reconnectCount>=this.MAX_RECONNECTION_COUNT)return null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.error("cannot do reconnect rtm websocket, because it is over max reconnect times, so destroy engine."),void GameMediaEngine.destroyEngine(!0);this.reconnectCount++,this.doConnect();}}send(e){var t,r;return this.ws&&RtmCache.getInstance().getConnectionStatus()===ConnectionStatus.CONNECT?(RtmWebSocketService.isCocosHarmony?null===(t=this.ws)||void 0===t||t.send(e):null===(r=this.ws)||void 0===r||r.send(new Uint8Array(e).buffer),exports.HWPGMEError.SUCCESS):exports.HWPGMEError.RTM_DISCONNECTION;}close(e){e&&(RtmMsgTimeoutChecker.getInstance().stopMsgTimeoutChecker(),RtmHeartbeatService.getInstance().stopHeartbeat(),this.clearReconnect(),this.isDestroyRtm=!0,this.clearWebSocketEventListener()),this.ws&&(this.ws.close(),this.ws=null);}clearWebSocketEventListener(){this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.onerror=null);}handleConnectionStatus(e,t){this.handleConnectEvent(e),this.handleDisconnectEvent(e,t);}handleConnectEvent(e){if(e!==ConnectionStatus.CONNECT)return;let t;null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.info("handle connect status by connect success"),this.isConnecting=!1,this.clearReconnect(),this.isFirstConnection?(this.isFirstConnection=!1,t="It's first connection"):(t="It's reconnection",RtmWebSocketService.resubscribeChannel()),RtmCache.getInstance().setConnectionStatus(ConnectionStatus.CONNECT),RtmHeartbeatService.getInstance().startHeartbeat(),RtmWebSocketService.reportConnectChanged(e,t);}static resubscribeChannel(){const e=RtmCache.getInstance().getSubscribedChannelMap();for(const[t,r]of e)if(null!=r){const e={channelId:r.channelId,playerProperties:r.playerProperties};let t=new SubscribeChannelReqHandler(e);null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.info("begin resubscribe channelId ["+r.channelId+"]. "),t.doResubscribeAction();}}handleDisconnectEvent(e,t){if(e!==ConnectionStatus.DISCONNECT)return;this.clearWebSocketEventListener(),this.isConnecting=!1,this.ws=null;RtmCache.getInstance().getConnectionStatus()===ConnectionStatus.DISCONNECT||RtmWebSocketService.reportConnectChanged(e,t),RtmCache.getInstance().setConnectionStatus(ConnectionStatus.DISCONNECT),RtmHeartbeatService.getInstance().stopHeartbeat(),this.reconnect(exports.HWPGMEError.RTM_DISCONNECTION);}static reportConnectChanged(e,t){const r={status:e,reason:t};EngineHooks.call("onRtmConnectionChanged",e===ConnectionStatus.DISCONNECT?CommonResult.FAILED:CommonResult.SUCCESS,[r]);}static onopen(e){null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.info("rtm websocket open connect success");}static onmessage(e){RtmEventHandleManager.getInstance().onHandleEvent(e.data);}static onclose(e){null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.error({eventType:"MiniGameWebSocketEvent onclose",wsMsg:"eventPhase="+e.eventPhase+";ev string="+JSON.stringify(e)}),RtmWebSocketService.getInstance().handleConnectionStatus(ConnectionStatus.DISCONNECT,"ws onclose");}static onerror(e){null==RtmWebSocketServiceLog||RtmWebSocketServiceLog.error({eventType:"MiniGameWebSocketEvent onerror",wsMsg:"eventPhase="+e.eventPhase+";ev string="+JSON.stringify(e)}),RtmWebSocketService.getInstance().handleConnectionStatus(ConnectionStatus.DISCONNECT,"ws onerror");}}RtmWebSocketService.isCocosHarmony=!1;var CodeType$5=compiled.game.rtm.grpc.common.constant.CodeType,QueryChannelPlayerPropertyReq=compiled.game.rtm.grpc.common.dto.rtm.req.QueryChannelPlayerPropertyReq,QueryChannelPlayerPropertyResult=compiled.game.rtm.grpc.common.dto.rtm.result.QueryChannelPlayerPropertyResult;class GetRtmChannelPlayerPropertiesReqHandler extends ReqMsgHandler{constructor(e){super(),this.req=e;}resultHandle(e){this.result=QueryChannelPlayerPropertyResult.decode(e.msg).toJSON(),this.doResultHandle();}callbackHandle(e,t){const r={code:e,msg:t,channelId:this.req.channelId,memberInfos:this.parseMemberInfos(e)};EngineHooks.call("onGetRtmChannelPlayerProperties",this.getCommonResult(e),[r]);}parseMemberInfos(e){var t,r;if(e!==exports.HWPGMEError.SUCCESS)return[];const n=[];return(null===(t=this.result)||void 0===t?void 0:t.playerInfo)&&(null===(r=this.result)||void 0===r||r.playerInfo.forEach(e=>{const t={openId:null==e?void 0:e.openId,status:null==e?void 0:e.playerStatus,playerProperties:null==e?void 0:e.properties};n.push(t);})),n;}getReqCode(){return CodeType$5.QUERY_CHANNEL_PLAYER_PROPERTY;}getReqMsg(){const e=QueryChannelPlayerPropertyReq.create({channelId:this.req.channelId,playerId:this._playerIds});return QueryChannelPlayerPropertyReq.encode(e).finish();}set playerIds(e){this._playerIds=e;}}var CodeType$4=compiled.game.rtm.grpc.common.constant.CodeType,QueryChannelPropertyReq=compiled.game.rtm.grpc.common.dto.rtm.req.QueryChannelPropertyReq,QueryChannelPropertyResult=compiled.game.rtm.grpc.common.dto.rtm.result.QueryChannelPropertyResult;class GetRtmChannelPropertiesReqHandler extends ReqMsgHandler{constructor(e){super(),this.req=e;}resultHandle(e){this.result=QueryChannelPropertyResult.decode(e.msg).toJSON(),this.doResultHandle();}callbackHandle(e,t){const r={code:e,msg:t,channelId:this.req.channelId,channelProperties:this.parseChannelProperties(e)};EngineHooks.call("onGetRtmChannelProperties",this.getCommonResult(e),[r]);}parseChannelProperties(e){var t,r;return e!==exports.HWPGMEError.SUCCESS?{}:(null===(t=this.result)||void 0===t?void 0:t.properties)?null===(r=this.result)||void 0===r?void 0:r.properties:{};}getReqCode(){return CodeType$4.QUERY_CHANNEL_PROPERTY;}getReqMsg(){const e=QueryChannelPropertyReq.create({channelId:this.req.channelId});return QueryChannelPropertyReq.encode(e).finish();}}var CodeType$3=compiled.game.rtm.grpc.common.constant.CodeType,SetChannelPropertyReq=compiled.game.rtm.grpc.common.dto.rtm.req.SetChannelPropertyReq,SetChannelPropertyResult=compiled.game.rtm.grpc.common.dto.rtm.result.SetChannelPropertyResult;class SetRtmChannelPropertiesReqHandler extends ReqMsgHandler{constructor(e){super(),this.req=e;}resultHandle(e){this.result=SetChannelPropertyResult.decode(e.msg).toJSON(),this.doResultHandle();}callbackHandle(e,t){const r={code:e,msg:t,channelId:this.req.channelId};EngineHooks.call("onSetRtmChannelProperties",this.getCommonResult(e),[r]);}getReqCode(){return CodeType$3.SET_CHANNEL_PROPERTY;}getReqMsg(){const e=SetChannelPropertyReq.create({channelId:this.req.channelId,properties:this.req.channelProperties});return SetChannelPropertyReq.encode(e).finish();}}var CodeType$2=compiled.game.rtm.grpc.common.constant.CodeType,DeleteChannelPropertyReq=compiled.game.rtm.grpc.common.dto.rtm.req.DeleteChannelPropertyReq,DeleteChannelPropertyResult=compiled.game.rtm.grpc.common.dto.rtm.result.DeleteChannelPropertyResult;class DeleteRtmChannelPropertiesReqHandler extends ReqMsgHandler{constructor(e){super(),this.req=e;}resultHandle(e){this.result=DeleteChannelPropertyResult.decode(e.msg).toJSON(),this.doResultHandle();}callbackHandle(e,t){const r={code:e,msg:t,channelId:this.req.channelId};EngineHooks.call("onDeleteRtmChannelProperties",this.getCommonResult(e),[r]);}getReqCode(){return CodeType$2.DELETE_CHANNEL_PROPERTY;}getReqMsg(){const e=DeleteChannelPropertyReq.create({channelId:this.req.channelId,propertyKey:this.req.keys});return DeleteChannelPropertyReq.encode(e).finish();}}var CodeType$1=compiled.game.rtm.grpc.common.constant.CodeType,SetChannelPlayerPropertyReq=compiled.game.rtm.grpc.common.dto.rtm.req.SetChannelPlayerPropertyReq,SetChannelPlayerPropertyResult=compiled.game.rtm.grpc.common.dto.rtm.result.SetChannelPlayerPropertyResult;class SetRtmChannelPlayerPropertiesReqHandler extends ReqMsgHandler{constructor(e){super(),this.req=e;}resultHandle(e){this.result=SetChannelPlayerPropertyResult.decode(e.msg).toJSON(),this.doResultHandle();}callbackHandle(e,t){const r={code:e,msg:t,channelId:this.req.channelId};this.setChannelPlayerProperties(e),EngineHooks.call("onSetRtmChannelPlayerProperties",this.getCommonResult(e),[r]);}setChannelPlayerProperties(e){e===exports.HWPGMEError.SUCCESS&&RtmCache.getInstance().setChannelPlayerProperties(this.req.channelId,this.req.playerProperties);}getReqCode(){return CodeType$1.SET_CHANNEL_PLAYER_PROPERTY;}getReqMsg(){const e=SetChannelPlayerPropertyReq.create({channelId:this.req.channelId,properties:this.req.playerProperties});return SetChannelPlayerPropertyReq.encode(e).finish();}}var CodeType=compiled.game.rtm.grpc.common.constant.CodeType,DeleteChannelPlayerPropertyReq=compiled.game.rtm.grpc.common.dto.rtm.req.DeleteChannelPlayerPropertyReq,DeleteChannelPlayerPropertyResult=compiled.game.rtm.grpc.common.dto.rtm.result.DeleteChannelPlayerPropertyResult;class DeleteRtmChannelPlayerPropertiesReqHandler extends ReqMsgHandler{constructor(e){super(),this.req=e;}resultHandle(e){this.result=DeleteChannelPlayerPropertyResult.decode(e.msg).toJSON(),this.doResultHandle();}callbackHandle(e,t){const r={code:e,msg:t,channelId:this.req.channelId};this.deleteChannelPlayerProperties(e),EngineHooks.call("onDeleteRtmChannelPlayerProperties",this.getCommonResult(e),[r]);}deleteChannelPlayerProperties(e){e===exports.HWPGMEError.SUCCESS&&RtmCache.getInstance().delChannelPlayerProperties(this.req.channelId,this.req.keys);}getReqCode(){return CodeType.DELETE_CHANNEL_PLAYER_PROPERTY;}getReqMsg(){const e=DeleteChannelPlayerPropertyReq.create({channelId:this.req.channelId,propertyKey:this.req.keys});return DeleteChannelPlayerPropertyReq.encode(e).finish();}}class RtmPropertyService{constructor(){}static getInstance(){return RtmPropertyService.instance||(RtmPropertyService.instance=new RtmPropertyService()),RtmPropertyService.instance;}getRtmChannelPlayerProperties(e){return __awaiter(this,void 0,void 0,function*(){const t=new GetRtmChannelPlayerPropertiesReqHandler(e);try{if(RtmCommonUtils.channelIdIsInvalid(e.channelId,t))return;ServiceParams.checkRtmPlayerPropertyQueryMaxNum(e.openIds);const r=yield PlayerDelegate.getPlayerId(e.openIds);if(0===r.length)return void t.callbackHandle(exports.HWPGMEError.RECEIVERS_NOT_EXIST_OR_OFFLINE,"players is offline or not exist");t.playerIds=r,t.sendData();}catch(e){RtmCommonUtils.handleException(e,t);}});}getRtmChannelProperties(e){const t=new GetRtmChannelPropertiesReqHandler(e);RtmCommonUtils.channelIdIsInvalid(e.channelId,t)||t.sendData();}setRtmChannelProperties(e){const t=new SetRtmChannelPropertiesReqHandler(e);try{if(RtmCommonUtils.channelIdIsInvalid(e.channelId,t))return;ServiceParams.checkPropertyInvalid(e.channelProperties),t.sendData();}catch(e){RtmCommonUtils.handleException(e,t);}}deleteRtmChannelProperties(e){const t=new DeleteRtmChannelPropertiesReqHandler(e);try{if(RtmCommonUtils.channelIdIsInvalid(e.channelId,t))return;ServiceParams.checkDeletePropertyInvalid(e.keys),t.sendData();}catch(e){RtmCommonUtils.handleException(e,t);}}setRtmChannelPlayerProperties(e){const t=new SetRtmChannelPlayerPropertiesReqHandler(e);try{if(RtmCommonUtils.channelIdIsInvalid(e.channelId,t))return;ServiceParams.checkPropertyInvalid(e.playerProperties),t.sendData();}catch(e){RtmCommonUtils.handleException(e,t);}}deleteRtmChannelPlayerProperties(e){const t=new DeleteRtmChannelPlayerPropertiesReqHandler(e);try{if(RtmCommonUtils.channelIdIsInvalid(e.channelId,t))return;ServiceParams.checkDeletePropertyInvalid(e.keys),t.sendData();}catch(e){RtmCommonUtils.handleException(e,t);}}}const MIN_QG_PLATFORM=1107,EngineLog=Logger.getInstance("GameMediaEngine");let engineInstance=null,sdkType="js",platform=GamePlatform.WEIXIN_MINI_GAME;class GameMediaEngine{constructor(){}static create(e){var t;return __awaiter(this,void 0,void 0,function*(){if(!createEngineParamsCheck(e))throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,"param invalid");try{let r;this.checkSystemInfo(null===(t=e.isEnableAudioMsg)||void 0===t||t),this.resetContext(),r=e.cpAccessToken?e.cpAccessToken:yield AgcAuth.getAgcToken(e.appId,e.clientId,e.clientSecret);const n=yield this.getPlayerLoginRsp(e,r);return this.savePlayerSession(e,n),ServiceParams.init(n.params),e.isEnableAudioMsg&&this.initAudioMsg(),e.isEnableRtm&&(RtmCache.certPath=e.certPath||"",yield RtmWebSocketService.getInstance().connect()),engineInstance||(engineInstance=new GameMediaEngine()),EngineCache.getInstance().setEngineStateCodes(1),engineInstance;}catch(e){if(null==EngineLog||EngineLog.error("Create engine failed:",null==e?void 0:e.message),GameMediaEngine.destroyEngine(!1),e instanceof HWPGMEException)throw e;throw new HWPGMEException(exports.HWPGMEError.INNER_ERROR,"unknown error"+(null==e?void 0:e.message));}});}static getVersion(){return"1.14.2.300";}static getPlayerLoginRsp(e,t){const r=Object.assign(Object.assign({},e),{appId:e.appId,cpAccessToken:t,openId:e.openId,clientId:e.clientId,sdkVersion:this.getVersion(),sdkType:sdkType,platform:platform});return PlayerService.login(Object.assign({},r));}static checkSystemInfo(e){if(e){try{const e=qg.getSystemInfoSync();if(null==EngineLog||EngineLog.info("current platformVersionCode:",e.platformVersionCode),e.platformVersionCode<MIN_QG_PLATFORM)throw new HWPGMEException(exports.HWPGMEError.ENGINE_RUNTIME_VERSION_NOT_SUPPORT,"engine runtime version not support, current versionCode:"+e.platformVersionCode);return platform=GamePlatform.HUAWEI_QG_GAME,void(sdkType=SdkType.HUAWEI_QG_GAME);}catch(e){if(e instanceof HWPGMEException)throw e;}try{const e=tt.getSystemInfoSync();return null==EngineLog||EngineLog.info("current tt api version:",e.SDKVersion),platform=GamePlatform.BYTEDANCE_MINI_GAME,void(sdkType=SdkType.BYTEDANCE_MINI_GAME);}catch(e){null==EngineLog||EngineLog.warn("current platform is not tt");}try{wx.getSystemInfoSync(),platform=GamePlatform.WEIXIN_MINI_GAME,sdkType=SdkType.WEIXIN_MINI_GAME;}catch(e){throw new HWPGMEException(exports.HWPGMEError.ENGINE_RUNTIME_NOT_SUPPORT,"engine runtime not support");}}}static resetContext(){var e;null===(e=GameMediaEngine.audioMsgService)||void 0===e||e.destroy(),RtmWebSocketService.getInstance().close(!0),EngineSession.clean(),EngineCache.getInstance().clean(),RtmCache.getInstance().clean(),engineInstance=null;}static destroyEngine(e){EngineSession.getServiceToken()&&PlayerService.logout().then(()=>{null==EngineLog||EngineLog.info("destroy engine, player logout success");}).catch(e=>{null==EngineLog||EngineLog.error("destroy engine, player logout failed",JSON.stringify(e));}),GameMediaEngine.resetContext(),e&&EngineHooks.call("destroyEngine",CommonResult.SUCCESS,[0,""]);}destroy(){return __awaiter(this,void 0,void 0,function*(){GameMediaEngine.destroyEngine(!1);});}startRecordAudioMsg(){if(!EngineSession.getEnableAudioMsg())throw new HWPGMEException(exports.HWPGMEError.AUDIO_MESSAGE_NOT_ENABLE,"audio message not enable");return Promise.resolve().then(()=>GameMediaEngine.audioMsgService.startRecordAudioMsg()).catch(e=>{if(e instanceof HWPGMEException)throw e;return null==EngineLog||EngineLog.error("startRecordAudioMsg. unknown error: ",e),Promise.reject(new HWPGMEException(exports.HWPGMEError.INNER_ERROR,"unknown error"+(null==e?void 0:e.message)));});}stopRecordAudioMsg(){if(!EngineSession.getEnableAudioMsg())throw new HWPGMEException(exports.HWPGMEError.AUDIO_MESSAGE_NOT_ENABLE,"audio message not enable");return Promise.resolve().then(()=>GameMediaEngine.audioMsgService.stopRecordAudioMsg()).catch(e=>{if(e instanceof HWPGMEException)throw e;return null==EngineLog||EngineLog.error("stopRecordAudioMsg. unknown error: ",e),Promise.reject(new HWPGMEException(exports.HWPGMEError.INNER_ERROR,"unknown error"+(null==e?void 0:e.message)));});}playAudioMsg(e){if(!EngineSession.getEnableAudioMsg())throw new HWPGMEException(exports.HWPGMEError.AUDIO_MESSAGE_NOT_ENABLE,"audio message not enable");return Promise.resolve().then(()=>GameMediaEngine.audioMsgService.playAudioMsg(e)).catch(e=>{if(e instanceof HWPGMEException)throw e;return null==EngineLog||EngineLog.error("playAudioMsg. unknown error: ",e),Promise.reject(new HWPGMEException(exports.HWPGMEError.INNER_ERROR,"unknown error"+(null==e?void 0:e.message)));});}stopPlayAudioMsg(){if(!EngineSession.getEnableAudioMsg())throw new HWPGMEException(exports.HWPGMEError.AUDIO_MESSAGE_NOT_ENABLE,"audio message not enable");return Promise.resolve().then(()=>GameMediaEngine.audioMsgService.stopPlayAudioMsg()).catch(e=>{if(e instanceof HWPGMEException)throw e;return null==EngineLog||EngineLog.error("stopPlayAudioMsg. unknown error: ",e),Promise.reject(new HWPGMEException(exports.HWPGMEError.INNER_ERROR,"unknown error"+(null==e?void 0:e.message)));});}uploadAudioMsgFile(e,t){if(!EngineSession.getEnableAudioMsg())throw new HWPGMEException(exports.HWPGMEError.AUDIO_MESSAGE_NOT_ENABLE,"audio message not enable");return Promise.resolve().then(()=>GameMediaEngine.audioMsgService.uploadAudioMsgFile(e,t)).catch(e=>{if(e instanceof HWPGMEException)throw e;return null==EngineLog||EngineLog.error("uploadAudioMsgFile. unknown error: ",e),Promise.reject(new HWPGMEException(exports.HWPGMEError.INNER_ERROR,"unknown error"+(null==e?void 0:e.message)));});}startDetectAudioFile(e){if(!EngineSession.getEnableAudioMsg())throw new HWPGMEException(exports.HWPGMEError.AUDIO_MESSAGE_NOT_ENABLE,"audio message not enable");return Promise.resolve().then(()=>GameMediaEngine.audioMsgService.startDetectAudioFile(e)).catch(e=>{if(e instanceof HWPGMEException)throw e;return null==EngineLog||EngineLog.error("startDetectAudioFile. unknown error: ",e),Promise.reject(new HWPGMEException(exports.HWPGMEError.INNER_ERROR,"unknown error"+(null==e?void 0:e.message)));});}subscribeRtmChannel(e){return __awaiter(this,void 0,void 0,function*(){if(!EngineSession.getEnableRtm())throw new HWPGMEException(exports.HWPGMEError.RTM_NOT_ENABLE,"rtm not enable");RtmChannelService.getInstance().subscribeRtmChannel(e);});}unSubscribeRtmChannel(e){return __awaiter(this,void 0,void 0,function*(){if(!EngineSession.getEnableRtm())throw new HWPGMEException(exports.HWPGMEError.RTM_NOT_ENABLE,"rtm not enable");RtmChannelService.getInstance().unSubscribeRtmChannel(e);});}publishRtmChannelMessage(e){return __awaiter(this,void 0,void 0,function*(){if(!EngineSession.getEnableRtm())throw new HWPGMEException(exports.HWPGMEError.RTM_NOT_ENABLE,"rtm not enable");const t=createRequestId();return RtmChannelService.getInstance().publishRtmChannelMessage(e,t),t;});}getRtmSubscribedChannelInfo(){return __awaiter(this,void 0,void 0,function*(){if(!EngineSession.getEnableRtm())throw new HWPGMEException(exports.HWPGMEError.RTM_NOT_ENABLE,"rtm not enable");return RtmChannelService.getInstance().getRtmSubscribedChannelInfo();});}getRtmChannelInfo(e){return __awaiter(this,void 0,void 0,function*(){if(!EngineSession.getEnableRtm())throw new HWPGMEException(exports.HWPGMEError.RTM_NOT_ENABLE,"rtm not enable");try{RtmChannelService.getInstance().getRtmChannelInfo(e);}catch(e){if(null==EngineLog||EngineLog.error("onObtainChannelInfo. error: ",e),e instanceof HWPGMEException)throw e;throw new HWPGMEException(exports.HWPGMEError.INNER_ERROR,"unknown error"+(null==e?void 0:e.message));}});}publishRtmPeerMessage(e){return __awaiter(this,void 0,void 0,function*(){if(!EngineSession.getEnableRtm())throw new HWPGMEException(exports.HWPGMEError.RTM_NOT_ENABLE,"rtm not enable");const t=createRequestId();return RtmPeerService.getInstance().publishRtmPeerMessage(t,e),t;});}deleteRtmChannelPlayerProperties(e){return __awaiter(this,void 0,void 0,function*(){if(!EngineSession.getEnableRtm())throw new HWPGMEException(exports.HWPGMEError.RTM_NOT_ENABLE,"rtm not enable");yield RtmPropertyService.getInstance().deleteRtmChannelPlayerProperties(e);});}deleteRtmChannelProperties(e){return __awaiter(this,void 0,void 0,function*(){if(!EngineSession.getEnableRtm())throw new HWPGMEException(exports.HWPGMEError.RTM_NOT_ENABLE,"rtm not enable");yield RtmPropertyService.getInstance().deleteRtmChannelProperties(e);});}getRtmChannelHistoryMessages(e){return __awaiter(this,void 0,void 0,function*(){if(!EngineSession.getEnableRtm())throw new HWPGMEException(exports.HWPGMEError.RTM_NOT_ENABLE,"rtm not enable");RtmChannelService.getInstance().getRtmChannelHistoryMessages(e);});}getRtmChannelPlayerProperties(e){return __awaiter(this,void 0,void 0,function*(){if(!EngineSession.getEnableRtm())throw new HWPGMEException(exports.HWPGMEError.RTM_NOT_ENABLE,"rtm not enable");yield RtmPropertyService.getInstance().getRtmChannelPlayerProperties(e);});}getRtmChannelProperties(e){return __awaiter(this,void 0,void 0,function*(){if(!EngineSession.getEnableRtm())throw new HWPGMEException(exports.HWPGMEError.RTM_NOT_ENABLE,"rtm not enable");RtmPropertyService.getInstance().getRtmChannelProperties(e);});}setRtmChannelPlayerProperties(e){return __awaiter(this,void 0,void 0,function*(){if(!EngineSession.getEnableRtm())throw new HWPGMEException(exports.HWPGMEError.RTM_NOT_ENABLE,"rtm not enable");RtmPropertyService.getInstance().setRtmChannelPlayerProperties(e);});}setRtmChannelProperties(e){return __awaiter(this,void 0,void 0,function*(){if(!EngineSession.getEnableRtm())throw new HWPGMEException(exports.HWPGMEError.RTM_NOT_ENABLE,"rtm not enable");RtmPropertyService.getInstance().setRtmChannelProperties(e);});}static on(e,t){if(!GameMediaEngine.callbackFuncCheck(t))throw new HWPGMEException(exports.HWPGMEError.PARAM_INVALID,"param is invalid");EngineHooks.setCpEventListener(e,t);}static callbackFuncCheck(e){return"function"==typeof e;}static initAudioMsg(){switch(platform){case GamePlatform.WEIXIN_MINI_GAME:GameMediaEngine.audioMsgService=new WxAudioMsgService();break;case GamePlatform.HUAWEI_QG_GAME:GameMediaEngine.audioMsgService=new QqAudioMsgService();break;case GamePlatform.BYTEDANCE_MINI_GAME:GameMediaEngine.audioMsgService=new TtAudioMsgService();}}static savePlayerSession(e,t){var r,n;e.isEnableAudioMsg=null===(r=e.isEnableAudioMsg)||void 0===r||r,e.isEnableRtm=null===(n=e.isEnableRtm)||void 0===n||n,EngineSession.setSessionInfo({serviceToken:t.serviceToken,playerId:t.playerId,openId:e.openId,appId:e.appId,sdkVersion:this.getVersion(),sdkType:sdkType,platform:platform,isEnableAudioMsg:e.isEnableAudioMsg,isEnableRtm:e.isEnableRtm});}}exports.GameMediaEngine=GameMediaEngine,exports.HWPGMEException=HWPGMEException,Object.defineProperty(exports,"__esModule",{value:!0});});}).call(root);})(// The environment-specific global.
function(){if(typeof globalThis!=='undefined')return globalThis;if(typeof self!=='undefined')return self;if(typeof window!=='undefined')return window;if(typeof global!=='undefined')return global;if(typeof this!=='undefined')return this;return{};}.call(this));