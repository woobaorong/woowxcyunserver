System.register("chunks:///_virtual/AnchorCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./BuildItemComp.ts"],(function(t){var e,o,i,n,r,s,h,d,a,g;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,n=t.find,r=t.UITransform,s=t.v3,h=t.instantiate,d=t.Label},function(t){a=t.default},function(t){g=t.BuildItemComp}],execute:function(){var l;o._RF.push({},"8224eZk/3tN+bMWKkggpTco","AnchorCtrl",void 0);var p=i.ccclass;i.property,t("AnchorCtrl",p("AnchorCtrl")(l=function(t){function o(){for(var e,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this).target=void 0,e.frame=void 0,e.isMovedOut=!0,e}e(o,t);var i=o.prototype;return i.start=function(){this.showToolInfo(""),this.frame=this.node.getChildByName("Frame")},i.reset=function(t,e,o){this.isMovedOut=!1;var i=n("Canvas").getComponent("BuildSceneCtrl");this.showToolInfo(i.getToolInfoStr(e.type)),this.node.worldPosition=t,this.target=e,this.renderFrame(),o&&i.setShowBts(this.target,this.node)},i.renderFrame=function(){this.frame.worldPosition=this.target.node.worldPosition;var t=.667*this.target.node.getComponent(r).width+16,e=.667*this.target.node.getComponent(r).height+16;this.frame.getComponent(r).width=t>60?t:60,this.frame.getComponent(r).height=e>60?e:60,this.frame.eulerAngles=this.target.node.eulerAngles},i.hide=function(){this.isMovedOut=!0,this.node.worldPosition=s(1e5,1e5,0),this.showToolInfo("")},i.up=function(){var t=s(this.target.node.worldPosition.x,this.target.node.worldPosition.y+50,0);this.target.node.worldPosition=t;var e=s(this.node.worldPosition.x,this.node.worldPosition.y+50,0);this.node.worldPosition=e},i.down=function(){var t=s(this.target.node.worldPosition.x,this.target.node.worldPosition.y-50,0);this.target.node.worldPosition=t;var e=s(this.node.worldPosition.x,this.node.worldPosition.y-50,0);this.node.worldPosition=e},i.left=function(){var t=s(this.target.node.worldPosition.x-50,this.target.node.worldPosition.y,0);this.target.node.worldPosition=t;var e=s(this.node.worldPosition.x-50,this.node.worldPosition.y,0);this.node.worldPosition=e},i.right=function(){var t=s(this.target.node.worldPosition.x+50,this.target.node.worldPosition.y,0);this.target.node.worldPosition=t;var e=s(this.node.worldPosition.x+50,this.node.worldPosition.y,0);this.node.worldPosition=e},i.largeW=function(){if(12!=this.target.type&&13!=this.target.type){var t=this.target.getComponent(r).width;t+=100,this.target.getComponent(r).width=t,this.renderFrame()}else this.largeH()},i.smallW=function(){if(12!=this.target.type&&13!=this.target.type){var t=this.target.getComponent(r).width;t>100&&(t-=100,this.target.getComponent(r).width=t),this.renderFrame()}else this.smallH()},i.largeH=function(){var t=this.target.getComponent(r).height;t+=100,this.target.getComponent(r).height=t,this.renderFrame()},i.smallH=function(){var t=this.target.getComponent(r).height;t>100&&(t-=100,this.target.getComponent(r).height=t),this.renderFrame()},i.delete=function(){this.target.node.destroy(),this.target=null,this.node.worldPosition=s(1e4,1e4,0)},i.add=function(){var t=this.target.node.getChildByName("Edge").getComponent(r).height,e=this.target.node.getChildByName("Edge").getComponent(r).width;28==this.target.type||30==this.target.type?(e+=100,this.target.node.getChildByName("Edge").getComponent(r).width=e):29!=this.target.type&&31!=this.target.type||(t+=100,this.target.node.getChildByName("Edge").getComponent(r).height=t)},i.cut=function(){var t=this.target.node.getChildByName("Edge").getComponent(r).height,e=this.target.node.getChildByName("Edge").getComponent(r).width;28==this.target.type||30==this.target.type?e>100&&(e-=100,this.target.node.getChildByName("Edge").getComponent(r).width=e):29!=this.target.type&&31!=this.target.type||t>100&&(t-=100,this.target.node.getChildByName("Edge").getComponent(r).height=t)},i.trunR=function(){var t=s(0,0,this.target.node.eulerAngles.z-45);this.target.node.eulerAngles=t},i.trunL=function(){var t=s(0,0,this.target.node.eulerAngles.z+45);this.target.node.eulerAngles=t},i.copy=function(){var t=h(this.target.node);t.parent=this.target.node.parent,n("Canvas").getComponent("BuildSceneCtrl").setIndex(t,t.getComponent(g).type),t.name=this.node.name,t.worldPosition=s(this.target.node.worldPosition.x+100,this.target.node.worldPosition.y+100,0),this.target=t.getComponent(g),this.node.position=s(this.node.position.x+100,this.node.position.y+100,0)},i.showToolInfo=function(t){n("Canvas/ToolInfo").getComponent(d).string=t},o}(a))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpiderCtrl.ts","./RapierBaseCollider.ts"],(function(i){var t,e,s,n,h,r,a,d,l,o,p,u,g,c;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,s=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){h=i.cclegacy,r=i._decorator,a=i.SpriteAtlas,d=i.Sprite,l=i.v3,o=i.Component},function(i){p=i.SpiderCtrl,u=i.ColorType,g=i.PlayerDir},function(i){c=i.RapierBaseCollider}],execute:function(){var C,m,y,v,b,f,x;h._RF.push({},"b8236v0d29Oz5jrIBtn1jcg","AnimationCtrl",void 0);var G=r.ccclass,A=r.property;i("AnimationCtrl",(C=G("AnimationCtrl"),m=A(a),y=A(a),C((f=t((b=function(i){function t(){for(var t,e=arguments.length,h=new Array(e),r=0;r<e;r++)h[r]=arguments[r];return(t=i.call.apply(i,[this].concat(h))||this).sprites=[],t.beginIndex=0,t.nowIndex=0,t.length=9,t.sprite=void 0,t.speed=4,s(t,"spriteAtlas1",f,n(t)),s(t,"spriteAtlas2",x,n(t)),t.cap=void 0,t.glass=void 0,t.capDead=void 0,t.glassDead=void 0,t.gun=void 0,t.spearGun=void 0,t.index=0,t.isPlayMovingAnim=!0,t.sp=void 0,t.spL=void 0,t.spR=void 0,t.spiderCtrl=void 0,t.hasCubeOnLeft=!1,t.hasCubeOnRight=!1,t}e(t,i);var h=t.prototype;return h.init=function(){this.sprite=this.node.getChildByName("Spirte").getComponent(d),this.cap=this.node.getChildByName("Spirte").getChildByName("Cap"),this.glass=this.node.getChildByName("Spirte").getChildByName("Glass"),this.capDead=this.node.getChildByName("Spirte").getChildByName("CapDead"),this.glassDead=this.node.getChildByName("Spirte").getChildByName("GlassDead"),this.gun=this.node.getChildByName("Spirte").getChildByName("Gun"),this.spearGun=this.node.getChildByName("Spirte").getChildByName("SpearGun");for(var i=0;i<23;i++)this.node.getComponent(p).colorType==u.yellow?this.sprites.push(this.spriteAtlas1.getSpriteFrames()[i]):this.node.getComponent(p).colorType==u.green&&this.sprites.push(this.spriteAtlas2.getSpriteFrames()[i])},h.playAnim=function(){this.spiderCtrl||(this.spiderCtrl=this.node.getComponent(p)),this.sp||(this.sp=this.node.getComponent(c)),this.spL||(this.spL=this.node.getChildByName("LeftTigger").getComponent(c),this.spL.onEnterCallback=this.onEnterL.bind(this),this.spL.onQuitCallback=this.onQuitL.bind(this)),this.spR||(this.spR=this.node.getChildByName("RightTigger").getComponent(c),this.spR.onEnterCallback=this.onEnterR.bind(this),this.spR.onQuitCallback=this.onQuitR.bind(this));var i=this.sp.rigidBody.translation(),t=this.spiderCtrl.myWidth;this.spiderCtrl.myHeight;this.spR.collider.setTranslation(l(i.x+t/2+25,i.y,0)),this.spL.collider.setTranslation(l(i.x-t/2-25,i.y,0));var e=this.spiderCtrl.myWidth/2-10;e<0&&(e=0),this.index++,this.index%this.speed==0&&(this.sprite.spriteFrame=this.sprites[this.beginIndex+this.nowIndex],this.nowIndex<this.length-1?this.nowIndex++:this.nowIndex=0)},h.onEnterR=function(i,t){(t.node.name.includes("Cube")||t.node.name.includes("ZhiZhu"))&&(this.hasCubeOnRight=!0,this.isPlayMovingAnim&&this.walk())},h.onQuitR=function(i,t){(t.node.name.includes("Cube")||t.node.name.includes("ZhiZhu"))&&(this.hasCubeOnRight=!1,this.isPlayMovingAnim&&this.walk())},h.onEnterL=function(i,t){(t.node.name.includes("Cube")||t.node.name.includes("ZhiZhu"))&&(this.hasCubeOnLeft=!0,this.isPlayMovingAnim&&this.walk())},h.onQuitL=function(i,t){(t.node.name.includes("Cube")||t.node.name.includes("ZhiZhu"))&&(this.hasCubeOnLeft=!1,this.isPlayMovingAnim&&this.walk())},h.stand=function(){this.spiderCtrl&&(this.renderCapOrGlass(!1),this.renderGun(),this.isPlayMovingAnim=!1,this.speed=16,this.spiderCtrl.hasGun?this.beginIndex=12:this.beginIndex=19,this.length=1,this.nowIndex=0)},h.walk=function(){this.spiderCtrl&&(this.spiderCtrl.dir==g.left&&this.hasCubeOnLeft||this.spiderCtrl.dir==g.right&&this.hasCubeOnRight?this.pushing(!1):this.spiderCtrl.hasVDun||this.spiderCtrl.hasGun||this.spiderCtrl.isInWater?this.pushing(!0):this.walking())},h.walking=function(){this.renderCapOrGlass(!1),this.renderGun(),this.isPlayMovingAnim=!0,this.speed=4,this.beginIndex=0,this.length=9,this.nowIndex=0},h.pushing=function(i){this.renderCapOrGlass(!1),this.renderGun(i),this.isPlayMovingAnim=!0,this.speed=4,this.beginIndex=9,this.length=8,this.nowIndex=0},h.jump=function(){this.spiderCtrl&&(this.renderCapOrGlass(!1),this.renderGun(),this.isPlayMovingAnim=!1,this.speed=4,this.spiderCtrl.hasGun?(this.beginIndex=14,this.length=1,this.nowIndex=0):(this.beginIndex=17,this.length=1,this.nowIndex=0))},h.dead=function(){this.spiderCtrl&&(this.renderCapOrGlass(!0),this.renderGun(),this.isPlayMovingAnim=!1,this.speed=4,this.beginIndex=18,this.length=1,this.nowIndex=0)},h.trunLeft=function(){this.sprite.node.scale=l(-1,1,1)},h.trunRight=function(){this.sprite.node.scale=l(1,1,1)},h.renderCapOrGlass=function(i){this.spiderCtrl&&this.glass&&(this.glass.active=!1,this.glassDead.active=!1,this.cap.active=!1,this.capDead.active=!1,this.spiderCtrl.hasCap&&(i?this.capDead.active=!0:this.cap.active=!0),this.spiderCtrl.hasGlass&&(i?this.glassDead.active=!0:this.glass.active=!0))},h.renderGun=function(i){void 0===i&&(i=!0),this.spiderCtrl&&(this.gun.active=!1,this.spearGun.active=!1,i&&this.spiderCtrl.hasGun&&(0==this.spiderCtrl.gunType?this.gun.active=!0:this.spearGun.active=!0))},t}(o)).prototype,"spriteAtlas1",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(b.prototype,"spriteAtlas2",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=b))||v));h._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,r,n,s,e,a,c,l,u;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,e=t._decorator,a=t.CCInteger,c=t.v3,l=t.find,u=t.Component}],execute:function(){var h,d,p,y,f;s._RF.push({},"879c0ijSztE6rkPV/R001Wq","BackgroundCtrl",void 0);var P=e.ccclass,v=e.property;t("BackgroundCtrl",(h=P("BackgroundCtrl"),d=v(a),h((f=o((y=function(t){function o(){for(var o,i=arguments.length,s=new Array(i),e=0;e<i;e++)s[e]=arguments[e];return(o=t.call.apply(t,[this].concat(s))||this).cam=void 0,o.pos=c(0,0,0),o.bornPos=c(0,0,0),r(o,"distance",f,n(o)),o}i(o,t);var s=o.prototype;return s.start=function(){this.bornPos.x=this.node.worldPosition.x,this.bornPos.y=this.node.worldPosition.y},s.update=function(t){if(!this.cam&&l("Canvas/Camera")&&(this.cam=l("Canvas/Camera")),this.cam){var o=this.cam.worldPosition;this.pos.x=this.bornPos.x-(o.x-this.bornPos.x)/(this.distance/5),this.pos.y=this.bornPos.y-(o.y-this.bornPos.y)/(this.distance/2),this.node.worldPosition=this.pos}},o}(u)).prototype,"distance",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),p=y))||p));s._RF.pop()}}}));

System.register("chunks:///_virtual/BallCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts"],(function(t){var i,e,n,r,o,s,a,l,c,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.v2,l=t.UITransform},function(t){c=t.RapierBaseCollider},function(t){d=t.default}],execute:function(){var h,p,u,y,f,m,x;o._RF.push({},"79d41AQNRBLt6ooxnzJNK8W","BallCtrl",void 0);var g=s.ccclass,B=s.property,C=s.requireComponent,b=s.executionOrder;t("BallCtrl",(h=g("BallCtrl"),p=C(c),u=b(2),y=B(Boolean),h(f=p(f=u((x=i((m=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,n(i,"isDynamicAdd",x,r(i)),i.rc=void 0,i.index=0,i.dir=a(0,0),i.nextPos=a(0,0),i.pemeter=4,i}e(i,t);var o=i.prototype;return o.onLoad=function(){this.isDynamicAdd||this.load()},o.load=function(){this.dir=a(this.pemeter,this.pemeter),this.rc=this.getComponent(c),this.rc.onStepCallback=this.onStepCallback.bind(this),this.rc.onQuitCallback=this.onQuit.bind(this),this.rc.onEnterCallback=this.onEnter.bind(this)},o.onEnter=function(t,i){if(console.log(t.node.name+"-撞到-"+i.node.name),i.rigidBody){var e=i.node.getComponent(l).width/2,n=i.node.getComponent(l).height/2,r=i.rigidBody.translation(),o=t.rigidBody.translation();o.x<r.x-e?this.dir.x=-this.pemeter:o.x>r.x+e&&(this.dir.x=this.pemeter),o.y>r.y+n?this.dir.y=this.pemeter:o.y<r.y-n?this.dir.y=-this.pemeter:console.log("------BallCtrl----onHandEnter-----Bug-------")}},o.onQuit=function(t,i){},o.onStepCallback=function(){this.index++;var t=this.rc.rigidBody.translation();this.nextPos.x=t.x+this.dir.x,this.nextPos.y=t.y+this.dir.y,this.rc.rigidBody.setTranslation(this.nextPos,!0)},i}(d)).prototype,"isDynamicAdd",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=m))||f)||f)||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/BaseComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,a,s,i,r,l,c,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,a=t.sys,s=t.find,i=t.Label,r=t.UITransform,l=t.log,c=t.Node,u=t.Component}],execute:function(){var f,g;n._RF.push({},"3cc63IeRUxEWqNXJuRtLTLE","BaseComponent",void 0);var h=o.ccclass;t("default",h("BaseComponent")(((g=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.getRandomBySeed=function(t,e){n.frameSeed=(9301*n.frameSeed+49297)%233280;var o=n.frameSeed/233280,a=t-e+1;return Math.floor(o*a+e)},o.invoke=function(t,e){this.scheduleOnce(t,e)},o.invokeForever=function(t,e){this.schedule(t,e)},o.cancelInvokeItem=function(t){this.unschedule(t)},o.cancelInvoke=function(){this.unscheduleAllCallbacks()},o.setString=function(t,e){this.setItem(t,e)},o.getString=function(t){return this.getItem(t)},o.setInt=function(t,e){this.setItem(t,e+"")},o.getInt=function(t,e){var n=this.getItem(t);return n&&this.isNormalInteger(n)?parseInt(n):e},o.isNormalInteger=function(t){var e=Math.floor(Number(t));return e!==1/0&&String(e)===t&&e>=0},o.getItem=function(t){var e=null;a.platform==a.Platform.WECHAT_GAME?e=globalThis.wx.getStorageSync(t):e=a.localStorage.getItem(t);return e},o.setItem=function(t,e){a.platform==a.Platform.WECHAT_GAME?globalThis.wx.setStorageSync(t,e):a.localStorage.setItem(t,e)},o.toast=function(t,e){void 0===e&&(e=2),this.cancelInvokeItem(this.cancelToast),s("Canvas/Toast")?(s("Canvas/Toast").active=!0,s("Canvas/Toast/Bg").active=!1,this.addAndSortIndex(s("Canvas/Toast")),s("Canvas/Toast/Label").getComponent(i).string=t,this.invoke((function(){s("Canvas/Toast/Bg").active=!0,s("Canvas/Toast/Bg").getComponent(r).width=s("Canvas/Toast/Label").getComponent(r).width+100}),0),this.invoke(this.cancelToast,e)):l("toast组件不存在")},o.cancelToast=function(){s("Canvas/Toast")&&(s("Canvas/Toast").active=!1)},o.setButtonEvent=function(t,e){t.off(c.EventType.TOUCH_END),t.on(c.EventType.TOUCH_END,e,this)},o.addAndSortIndex=function(t){n.zIndex++,t.setSiblingIndex(n.zIndex)},o.wxShare=function(t,e,n){var o=globalThis.wx;null==o||o.shareAppMessage({imageUrl:e,title:t,query:n,success:function(t){console.log("分享成功",t)},fail:function(t){console.log("分享失败",t)}})},o.ttShare=function(t,e,n){var o=globalThis.tt;null==o||o.shareAppMessage({templateId:"11lkk7891fd2lbdarj",query:n,title:t,desc:t,imageUrl:e,success:function(){console.log("分享成功")},fail:function(t){console.log("分享失败",t)}})},o.getMiniGamePermeter=function(t){var e=globalThis.wx,n=globalThis.tt;if(e){var o=e.getLaunchOptionsSync().query[t];return o&&o.length>0?o:null}if(n){var a=n.getLaunchOptionsSync().query[t];return a&&a.length>0?a:null}return null},o.showAd=function(t){this.toast("恭喜你,当前是测试版没有广告,两秒后直接获取收益"),this.invoke((function(){t()}),2)},o.replaceAllStr=function(t,e,n){for(var o=t.split(""),a=0;a<o.length;a++)o[a]==e&&(o[a]=n);return o.join("")},o.getRichTextStr=function(t){return t=this.replaceAllStr(t,"[","<color=#ff0000>"),t="<outline color=gray width=4>"+(t=this.replaceAllStr(t,"]","</color>"))+"</outline>"},n}(u)).frameSeed=0,g.zIndex=100,f=g))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/BasePannelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./GameHelper.ts"],(function(e){var n,t,o,a,i,l,s,c,r;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,a=e.v3,i=e.tween,l=e.Vec3,s=e.Node},function(e){c=e.default},function(e){r=e.default}],execute:function(){var u;t._RF.push({},"d77afMoYTpG9bx2JHahbp5E","BasePannelController",void 0);var d=o.ccclass;o.property,e("BasePannelController",d("BasePannelController")(u=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var o=t.prototype;return o.showPannel=function(e,n,t){var o=this;void 0===n&&(n=!0),void 0===t&&(t=!0),this.addAndSortIndex(e),e.active=!0,n&&r.playMusic(this.node,"click2",!1);var c=e.getChildByName("Pannel");c&&(c.scale=a(0,0,0),i(c).to(.15,{scale:new l(1,1,1)},{easing:"smooth"}).start()),e.getChildByName("Bg")&&c&&(e.getChildByName("Bg").off(s.EventType.TOUCH_END),t&&e.getChildByName("Bg").on(s.EventType.TOUCH_END,(function(){o.hidePannel(e)}),this))},o.showPannelWithoutAnim=function(e,n){void 0===n&&(n=!0),n&&r.playMusic(this.node,"click2",!1),this.addAndSortIndex(e),e.active=!0},o.hidePannelWithoutAnim=function(e){e.active=!1},o.hidePannel=function(e){var n=e.getChildByName("Pannel");n&&i(n).to(.15,{scale:new l(0,0,0)},{easing:"smooth"}).start(),this.scheduleOnce((function(){e.active=!1}),.2)},t}(c))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/BirdCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts","./GameCtrl.ts"],(function(i){var t,e,s,r,n,o,d,h,a,c,l,p,x;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,s=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){n=i.cclegacy,o=i._decorator,d=i.v2,h=i.v3,a=i.find},function(i){c=i.RapierBaseCollider},function(i){l=i.default},function(i){p=i.GameCtrl,x=i.GameMode}],execute:function(){var u,y,f,m,C,g,v;n._RF.push({},"c8be5N22EBNHbMbvZU4CxFU","BirdCtrl",void 0);var b=o.ccclass,B=o.property,P=o.requireComponent,_=o.executionOrder;i("BirdCtrl",(u=b("BirdCtrl"),y=P(c),f=_(2),m=B(Boolean),u(C=y(C=f((v=t((g=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t=i.call.apply(i,[this].concat(n))||this,s(t,"isDynamicAdd",v,r(t)),t.rc=void 0,t.index=0,t.dir=void 0,t.nextPos=d(0,0),t.scale=h(1,1,1),t.pemeter=5,t.gc=void 0,t.p=void 0,t}e(t,i);var n=t.prototype;return n.onLoad=function(){this.isDynamicAdd||this.load()},n.load=function(){this.dir=d(this.pemeter,this.pemeter),this.rc=this.getComponent(c),this.rc.onStepCallback=this.onStepCallback.bind(this)},n.onStepCallback=function(){!this.gc&&a("Canvas")&&(this.gc=a("Canvas").getComponent(p)),this.index++;var i=this.rc.collider.translation();p.gameMode==x.net&&(this.index%2222==0?this.p=this.gc.spider1.node.worldPosition:this.index%4445==0&&(this.p=this.gc.spider2.node.worldPosition)),this.p||(this.p=this.gc.spider1.node.worldPosition),i.x<this.p.x-500?this.dir.x=this.pemeter:i.x>this.p.x+500?this.dir.x=-this.pemeter:i.y<this.p.y-500?this.dir.y=this.pemeter:i.y>this.p.y+500?this.dir.y=-this.pemeter:this.index%333==0?(this.dir.x=-this.dir.x,this.dir.y=this.dir.y):this.index%667==0?(this.dir.x=this.dir.x,this.dir.y=-this.dir.y):this.index%998==0?(this.dir.x=-this.dir.x,this.dir.y=-this.dir.y):this.index%444==0&&this.gc&&(this.gc.playAudioEffect("wu_ya_jiao1"),console.log("----------wu_ya_jiao1-------------")),this.nextPos.x=i.x+this.dir.x,this.nextPos.y=i.y+this.dir.y,this.rc.collider.setTranslation(this.nextPos),this.nextPos.x>i.x?this.scale.x=-1:this.scale.x=1,this.node.scale=this.scale},t}(l)).prototype,"isDynamicAdd",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=g))||C)||C)||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/BuildCameraCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./AnchorCtrl.ts"],(function(t){var o,n,i,e,s,c,a,r,h;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,e=t.find,s=t.UITransform,c=t.v3,a=t.Node},function(t){r=t.default},function(t){h=t.AnchorCtrl}],execute:function(){var u;n._RF.push({},"9878bk/bsFDnpySDviJ0YYY","BuildCameraCtrl",void 0);var d=i.ccclass;i.property,t("default",d("BuildCameraCtrl")(u=function(t){function n(){for(var o,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];return(o=t.call.apply(t,[this].concat(i))||this).isTouching=!1,o.canvasWidth=0,o.canvasHeight=0,o.touchPos=c(),o}o(n,t);var i=n.prototype;return i.start=function(){var t=this;this.canvasWidth=e("Canvas").getComponent(s).width/2,this.canvasHeight=e("Canvas").getComponent(s).height/2,e("World").worldPosition=c(this.canvasWidth,this.canvasHeight),e("World").off(a.EventType.TOUCH_MOVE),e("World").on(a.EventType.TOUCH_MOVE,(function(o){var n=o.touch.getLocation().x-o.touch.getPreviousLocation().x,i=o.touch.getLocation().y-o.touch.getPreviousLocation().y;t.touchPos.x=t.node.position.x-2*n,t.touchPos.y=t.node.position.y-2*i,t.touchPos.z=t.node.position.z,t.getByEdgePos(t.touchPos),t.node.position=t.touchPos})),e("World").on(a.EventType.TOUCH_START,(function(o){t.isTouching=!0,e("World/Anchor").getComponent(h).hide()})),e("World").on(a.EventType.TOUCH_END,(function(o){t.isTouching=!1})),e("World").on(a.EventType.TOUCH_CANCEL,(function(o){t.isTouching=!1}))},i.getByEdgePos=function(t){var o=2500,n=o-this.canvasWidth,i=-(o-this.canvasWidth),e=o-this.canvasHeight,s=-(o-this.canvasHeight);t.y<s?t.y=s:t.y>e&&(t.y=e),t.x<i?t.x=i:t.x>n&&(t.x=n)},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/BuildItemComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuildSceneCtrl.ts","./BaseComponent.ts","./BuildCameraCtrl.ts","./AnchorCtrl.ts"],(function(t){var e,s,o,i,n,r,a,h,c,l,g,p,d,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,a=t.Enum,h=t.Vec3,c=t.find,l=t.Node,g=t.v3},function(t){p=t.SceneObjectType},function(t){d=t.default},function(t){f=t.default},function(t){y=t.AnchorCtrl}],execute:function(){var P,m,C,u,x;n._RF.push({},"ccc49kG1x5CqbSAaeC5B/Qc","BuildItemComp",void 0);var v=r.ccclass,_=r.property;t("BuildItemComp",(P=v("BuildItemComp"),m=_({type:a(p)}),P((x=e((u=function(t){function e(){for(var e,s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,o(e,"type",x,i(e)),e.screenPos=new h(0,0,0),e.startPos=new h(0,0,0),e.targetPos=new h(0,0,0),e.camCtrl=void 0,e.anchorCtrl=void 0,e.isTargetSelected=!1,e.beginDragPosX=0,e.beginDragPosY=0,e.isBeginedDrag=!1,e.offset=new h(0,0,0),e.offsetPos=new h(0,0,0),e}s(e,t);var n=e.prototype;return n.start=function(){this.camCtrl=c("Canvas/Camera").getComponent(f),this.anchorCtrl=c("World/Anchor").getComponent(y),this.node.on(l.EventType.TOUCH_MOVE,this.onDrag,this),this.node.on(l.EventType.TOUCH_END,this.onCancelDrag,this),this.node.on(l.EventType.TOUCH_START,this.onBeginDrag,this),this.node.on(l.EventType.TOUCH_CANCEL,this.onCancelDrag,this),this.type==p.platform_hor||this.type==p.platform_limit_hor||this.type==p.platform_limit_ven||(this.type,p.platform_ven)},n.onBeginDrag=function(t){if((this.anchorCtrl.target!=this||this.anchorCtrl.isMovedOut)&&(this.isTargetSelected=!1),this.beginDragPosX=t.getUILocation().x,this.beginDragPosY=t.getUILocation().y,this.isTargetSelected){t.propagationStopped=!0;var e=t.getUILocation();this.startPos.x=e.x,this.startPos.y=e.y,this.screenPos.x=e.x+this.camCtrl.node.position.x,this.screenPos.y=e.y+this.camCtrl.node.position.y,this.targetPos=this.getFormatPos(this.screenPos),this.isBigObject()?(this.offset.x=this.node.worldPosition.x-this.targetPos.x,this.offset.y=this.node.worldPosition.y-this.targetPos.y):(this.offset.x=0,this.offset.y=0),this.isBeginedDrag=!1}},n.isBigObject=function(){return this.type==p.line_left||this.type==p.line_right||this.type==p.line_up||this.type==p.platform_hor||this.type==p.platform_limit_hor||this.type==p.platform_limit_ven||this.type==p.platform_ven||this.type==p.wall||this.type==p.land||this.type==p.water_zone},n.onDrag=function(t){if(this.isTargetSelected){t.propagationStopped=!0;var e=t.getUILocation();Math.abs(this.startPos.x-e.x)+Math.abs(this.startPos.y-e.y)<25&&!this.isBeginedDrag||(this.isBeginedDrag=!0,this.screenPos.x=e.x+this.camCtrl.node.position.x,this.screenPos.y=e.y+this.camCtrl.node.position.y,this.node.worldPosition=this.getPos(),this.anchorCtrl.hide())}},n.getPos=function(){return this.offsetPos.x=this.screenPos.x+this.offset.x,this.offsetPos.y=this.screenPos.y+this.offset.y,this.offsetPos},n.onCancelDrag=function(t){var s=!1;if(Math.abs(this.beginDragPosX-t.getUILocation().x)+Math.abs(this.beginDragPosY-t.getUILocation().y)<10)this.isTargetSelected=!0;else{if(!this.isTargetSelected)return;s=!0}t.propagationStopped=!0;var o=t.getUILocation();Math.abs(this.startPos.x-o.x)+Math.abs(this.startPos.y-o.y)<25&&!this.isBeginedDrag||(this.screenPos.x=o.x+this.camCtrl.node.position.x,this.screenPos.y=o.y+this.camCtrl.node.position.y,s?(this.targetPos=this.getFormatPos(this.getPos()),this.node.worldPosition=this.targetPos,this.anchorCtrl.reset(this.getFormatPos(this.screenPos),this.node.getComponent(e),!0)):(this.screenPos.x=o.x+this.camCtrl.node.position.x,this.screenPos.y=o.y+this.camCtrl.node.position.y,this.targetPos=this.getFormatPos(this.screenPos),this.isBigObject()?this.anchorCtrl.reset(this.targetPos,this.node.getComponent(e),!0):this.anchorCtrl.reset(this.node.worldPosition,this.node.getComponent(e),!0)))},n.getFormatPos=function(t){var e=Math.floor(t.x)-Math.floor(t.x)%50,s=Math.floor(t.y)-Math.floor(t.y)%50;e<0&&(e-=50),s<0&&(s-=50);var o=c("World/Node");return g(e+o.worldPosition.x%50+25,s+o.worldPosition.y%50-25,0)},e}(d)).prototype,"type",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.wall}}),C=u))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/BuildMapSelectPannelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePannelController.ts","./ComfirmPannelCtrl.ts","./GameHelper.ts"],(function(e){var t,n,a,i,l,o,r,s,c,u,m;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator,i=e.find,l=e.UITransform,o=e.instantiate,r=e.v3,s=e.Label},function(e){c=e.BasePannelController},function(e){u=e.ComfirmPannelCtrl},function(e){m=e.default}],execute:function(){var p;n._RF.push({},"83936ASIPBH2IXJ+Ar3SHgb","BuildMapSelectPannelCtrl",void 0);var h=a.ccclass;a.property,e("BuildMapSelectPannelCtrl",h("BuildMapSelectPannelCtrl")(p=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).maxSceneCount=void 0,t.mapItems=void 0,t.callback=void 0,t}t(n,e);var a=n.prototype;return a.start=function(){},a.renderItem=function(){var e=this,t=i("Canvas/BuildMapSelectPannel/Pannel/ScrollView/View/Content"),n=i("Canvas/BuildMapSelectPannel/Pannel/ScrollView/View/Content/ItemHide");t.children.forEach((function(e){e.name.includes("Hide")||e.destroy()})),t.getComponent(l).height=250*this.maxSceneCount/5+50;for(var a=function(){var a=e.mapItems[c];if(a){var i=o(n);i.name="Chapter"+c,i.position=r(250*(c%5-2),(c-c%5)/5*-250-50,0),i.parent=t,i.active=!0,e.setButtonEvent(i,(function(){e.hide(),e.callback(a)})),e.setButtonEvent(i.getChildByName("Delete"),(function(t){t.propagationStopped=!0,e.node.getComponent(u).show("确定要删除此地图么?",(function(){var t=e.mapItems.indexOf(a);t>-1?(e.mapItems.splice(t,1),e.setString(m.buildMapCacheKey,JSON.stringify(e.mapItems)),e.setString(a.id,null),e.maxSceneCount=e.mapItems.length-e.mapItems.length%5+5,e.renderItem()):e.toast("删除数据错误")}))})),i.getChildByName("Label").getComponent(s).string=a.name}},c=0;c<this.maxSceneCount;c++)a()},a.show=function(e){var t=this.getString(m.buildMapCacheKey);t&&t.length>3&&JSON.parse(t)?(this.mapItems=JSON.parse(t),this.mapItems.length<=0?this.toast("尚未保存任何地图"):(this.maxSceneCount=this.mapItems.length-this.mapItems.length%5+5,this.callback=e,this.showPannel(i("Canvas/BuildMapSelectPannel")),this.renderItem())):this.toast("尚未保存任何地图")},a.hide=function(){this.hidePannel(i("Canvas/BuildMapSelectPannel"))},n}(c))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/BuildMapSetPannelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePannelController.ts","./GameHelper.ts"],(function(n){var e,t,a,i,l,o,s,r,u;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,a=n._decorator,i=n.find,l=n.Toggle,o=n.EditBox,s=n.Node},function(n){r=n.BasePannelController},function(n){u=n.default}],execute:function(){var c;t._RF.push({},"6d3a2mG4cpEl4ipMZhLtUFx","BuildMapSetPannelCtrl",void 0);var d=a.ccclass;a.property,n("BuildMapSetPannelCtrl",d("BuildMapSetPannelCtrl")(c=function(n){function t(){for(var e,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))||this).t1=void 0,e.t2=void 0,e.bgIndex=0,e}e(t,n);var a=t.prototype;return a.start=function(){this.t1=i("Canvas/BuildMapSetPannel/Pannel/ToggleGroup/Toggle1").getComponent(l),this.t2=i("Canvas/BuildMapSetPannel/Pannel/ToggleGroup/Toggle2").getComponent(l)},a.show=function(n,e,t){var a=this;this.bgIndex=t,this.showPannel(i("Canvas/BuildMapSetPannel"),!0,!0),e&&(i("Canvas/BuildMapSetPannel/Pannel/EditBox").getComponent(o).string=e),i("Canvas/BuildMapSetPannel/Pannel/Ok").off(s.EventType.TOUCH_END),i("Canvas/BuildMapSetPannel/Pannel/Ok").on(s.EventType.TOUCH_END,(function(){var t=i("Canvas/BuildMapSetPannel/Pannel/EditBox").getComponent(o).string,l=!1;if(!e){var s=a.getString(u.buildMapCacheKey),r=[];s&&s.length>2&&JSON.parse(s)&&(r=JSON.parse(s)),r.forEach((function(n){n.name==t.trim()&&(l=!0)}))}l?a.toast("关卡名称重复"):(a.t1.isChecked?a.bgIndex=0:a.t2.isChecked&&(a.bgIndex=1),a.checkString(t)?(a.hidePannel(i("Canvas/BuildMapSetPannel")),n(t.trim(),a.bgIndex)):a.toast("格式错误,请输入2-5位汉字或字母或数字"))}),this),this.t1.isChecked=!1,this.t1.isChecked=!1,0==this.bgIndex?this.t1.isChecked=!0:1==this.bgIndex&&(this.t2.isChecked=!0)},a.hide=function(){this.hidePannel(i("Canvas/BuildMapSetPannel"))},a.checkString=function(n){return/^[\u4e00-\u9fa5a-zA-Z0-9]{2,5}$/.test(n)},a.onBgSelect=function(n,e){},t}(r))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/BuildSceneCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./BuildItemComp.ts","./GameHelper.ts","./ComfirmPannelCtrl.ts","./AnchorCtrl.ts","./BuildMapSetPannelCtrl.ts","./BuildMapSelectPannelCtrl.ts","./LobbyCtrl.ts","./FirstSceneCtrl.ts"],(function(e){var t,o,a,r,i,n,l,s,d,h,p,g,c,m,u,_,y;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,a=e._decorator,r=e.find,i=e.v3,n=e.UITransform,l=e.instantiate},function(e){s=e.default},function(e){d=e.BuildItemComp},function(e){h=e.default,p=e.BuildMapCacheItem},function(e){g=e.ComfirmPannelCtrl},function(e){c=e.AnchorCtrl},function(e){m=e.BuildMapSetPannelCtrl},function(e){u=e.BuildMapSelectPannelCtrl},function(e){_=e.LobbyCtrl},function(e){y=e.FirstSceneCtrl}],execute:function(){var f;o._RF.push({},"45c89z+Y85N+7S6C/J++3GG","BuildSceneCtrl",void 0);var v=a.ccclass,C=(a.property,e("BuildSceneCtrl",v("BuildSceneCtrl")(f=function(e){function o(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).dataArray=[],t.world=void 0,t.anchorCtrl=void 0,t.page=1,t.mapItem=void 0,t.bgIndex=0,t.nodeIndex=0,t}t(o,e);var a=o.prototype;return a.start=function(){if(this.world=r("World/Objs"),this.world.parent.worldPosition=i(this.node.worldPosition.x,this.node.worldPosition.y,0),this.anchorCtrl=r("World/Anchor").getComponent(c),r("Canvas/Bg").active=!0,r("World/Hide").active=!1,this.renderPage(),this.getString(h.testMapKey)&&this.getString(h.testMapKey).length>10){var e=this.getString(h.testMapKey);this.loadMap(e),this.setString(h.testMapKey,"")}r("Canvas/Test").active=!0,y.playerInfo.nickName.includes("玩家")},a.left=function(){this.page--,this.page<1&&(this.page=1),this.renderPage()},a.right=function(){this.page++,this.page>5&&(this.page=5),this.renderPage()},a.renderPage=function(){r("Canvas/DownFrame/Page1").active=!1,r("Canvas/DownFrame/Page2").active=!1,r("Canvas/DownFrame/Page3").active=!1,r("Canvas/DownFrame/Page4").active=!1,r("Canvas/DownFrame/Page5").active=!1,r("Canvas/DownFrame/Page"+this.page).active=!0,r("Canvas/DownFrame/Left/Gray").active=!1,r("Canvas/DownFrame/Right/Gray").active=!1,1==this.page?r("Canvas/DownFrame/Left/Gray").active=!0:5==this.page&&(r("Canvas/DownFrame/Right/Gray").active=!0)},a.setIndex=function(e,t){this.nodeIndex++,t==C.wall||t==C.land||t==C.water_zone?e.setSiblingIndex(this.nodeIndex-1e4):e.setSiblingIndex(this.nodeIndex)},a.loadMap=function(e){var t=this;if(!e||e.length<2)this.toast("场景数据有误");else{var o=JSON.parse(e);console.log("data",o),this.world.children.forEach((function(e){e.destroy(),t.anchorCtrl.hide()})),o.forEach((function(e){e.type==C.bg&&(t.bgIndex=e.edge);var o=t.getIns(e.type);o&&(o.active=!0,o.parent=t.world,t.setIndex(o,e.type),o.addComponent(d).type=e.type,e.type==C.tan_chuang?o.worldPosition=i(e.posX,e.posY+5,0):e.type==C.large_tool||e.type==C.small_tool?o.worldPosition=i(e.posX,e.posY+10,0):o.worldPosition=i(e.posX,e.posY,0),e.type==C.tigger&&(o.eulerAngles=i(0,0,e.angle)),e.type!=C.wall&&e.type!=C.land&&e.type!=C.water_zone&&e.type!=C.line_left&&e.type!=C.line_up&&e.type!=C.line_right&&e.type!=C.platform_hor&&e.type!=C.platform_ven&&e.type!=C.platform_limit_hor&&e.type!=C.platform_limit_ven||(o.getComponent(n).width=e.width,o.getComponent(n).height=e.height),e.type==C.platform_hor||e.type==C.platform_limit_hor?o.getChildByName("Edge").getComponent(n).width=e.edge:e.type!=C.platform_ven&&e.type!=C.platform_limit_ven||(o.getChildByName("Edge").getComponent(n).height=e.edge))}))}},a.getIns=function(e){var t=null;return e==C.wall?t=l(r("World/Hide/Wall")):e==C.land?t=l(r("World/Hide/Land")):e==C.player_one?t=l(r("World/Hide/PlayerOne")):e==C.player_two?t=l(r("World/Hide/PlayerTwo")):e==C.end?t=l(r("World/Hide/End")):e==C.end_key?t=l(r("World/Hide/EndKey")):e==C.normal_cube?t=l(r("World/Hide/NormalCube")):e==C.freeze_cube?t=l(r("World/Hide/FreezeCube")):e==C.rope_wall?t=l(r("World/Hide/WallForRope")):e==C.tan_chuang?t=l(r("World/Hide/TanChuang")):e==C.gun_tool?t=l(r("World/Hide/Gun")):e==C.rope_tool?t=l(r("World/Hide/Rope")):e==C.gravity_tool?t=l(r("World/Hide/Gravity")):e==C.small_tool?t=l(r("World/Hide/Small")):e==C.large_tool?t=l(r("World/Hide/Large")):e==C.coin?t=l(r("World/Hide/Coin")):e==C.coin_group?t=l(r("World/Hide/CoinGroup")):e==C.tigger?t=l(r("World/Hide/Tigger")):e==C.tigger_group?t=l(r("World/Hide/TiggerGroup")):e==C.dun_hor_tool?t=l(r("World/Hide/DunH")):e==C.dun_ven_tool?t=l(r("World/Hide/DunV")):e==C.line_left?t=l(r("World/Hide/LineLeft")):e==C.line_right?t=l(r("World/Hide/LineRight")):e==C.line_up?t=l(r("World/Hide/LineUp")):e==C.platform_hor?t=l(r("World/Hide/PlatformH")):e==C.platform_ven?t=l(r("World/Hide/PlatformV")):e==C.platform_limit_hor?t=l(r("World/Hide/PlatformHL")):e==C.platform_limit_ven?t=l(r("World/Hide/PlatformVL")):e==C.save?t=l(r("World/Hide/Save")):e==C.red_green_light?t=l(r("World/Hide/RGLight")):e==C.stone_cube?t=l(r("World/Hide/Stone")):e==C.wood_cube?t=l(r("World/Hide/Wood")):e==C.obs_cube?t=l(r("World/Hide/ObsBox")):e==C.time_cube?t=l(r("World/Hide/TimeCube")):e==C.water_zone?t=l(r("World/Hide/WaterZone")):e==C.shoes?t=l(r("World/Hide/Shoes")):e==C.spear?t=l(r("World/Hide/Spear")):e==C.grass?t=l(r("World/Hide/Grass")):e==C.ball&&(t=l(r("World/Hide/Ball"))),t},a.test=function(){var e=this;if(this.checkFomart()){var t=this.getBuildSceneStr();this.node.getComponent(g).show("确定要测试该地图么?",(function(){e.setString(h.testMapKey,t),h.isForTest=!0,_.gotoGameScene("Scene_Test")}))}},a.getBuildSceneStr=function(){var e=this,t=-1e5,o=1e5,a=-1e5,i=1e5;this.dataArray=[],r("World/Objs").children.forEach((function(r){var l=r.getComponent(d),s=new w;s.type=l.type,l.type==C.tan_chuang||l.type==C.small_tool||l.type==C.large_tool?(s.posX=l.node.getChildByName("Node").worldPosition.x,s.posY=l.node.getChildByName("Node").worldPosition.y):(s.posX=l.node.worldPosition.x,s.posY=l.node.worldPosition.y),s.angle=l.node.eulerAngles.z,s.width=l.node.getComponent(n).width,s.height=l.node.getComponent(n).height,s.height=Math.floor(s.height),s.width=Math.floor(s.width),s.posX=Math.floor(s.posX),s.posY=Math.floor(s.posY),s.angle=Math.floor(s.angle),e.dataArray.push(s);var h=s.posX+s.width/2,p=s.posX-s.width/2,g=s.posY+s.height/2,c=s.posY-s.height/2;s.type!=C.player_one&&s.type!=C.player_two||(h=s.posX+s.width/2+400,p=s.posX-s.width/2-400,g=s.posY+s.height/2+400,c=s.posY-s.height/2-400),h>t&&(t=h),p<o&&(o=p),g>a&&(a=g),c<i&&(i=c),l.type==C.platform_hor||l.type==C.platform_limit_hor?(s.edge=l.node.getChildByName("Edge").getComponent(n).width,s.edge=Math.floor(s.edge)):l.type!=C.platform_ven&&l.type!=C.platform_limit_ven||(s.edge=l.node.getChildByName("Edge").getComponent(n).height,s.edge=Math.floor(s.edge)),l.type!=C.platform_limit_ven&&l.type!=C.platform_limit_hor||(s.limit=2,s.limit=Math.floor(s.limit))}));var l=new w;l.type=C.bg,l.posX=Math.floor((t+o)/2),l.posY=Math.floor((a+i)/2),l.width=Math.floor(t-o),l.height=Math.floor(a-i),l.height<1500&&(l.height=1500),l.width<3e3&&(l.width=3e3),l.edge=this.bgIndex,this.dataArray.push(l);var s=JSON.stringify(this.dataArray),h=JSON.parse(s);return console.log(s,h),s},a.quit=function(){this.isNowMapSaved()?this.node.getComponent(g).show("确定要退出到大厅么?",(function(){h.exchangeScene("LobbyScene")})):this.node.getComponent(g).show("有数据 [尚未保存] ,确定要直接退出到大厅么?",(function(){h.exchangeScene("LobbyScene")}))},a.clear=function(){var e=this;this.node.getComponent(g).show("确定要清空地图中所有物体?",(function(){e.world.children.forEach((function(t){t.destroy(),e.anchorCtrl.hide()}))}))},a.save=function(){var e=this;if(this.checkFomart()){var t=null,o=null;this.mapItem&&(t=this.mapItem.name,o=this.mapItem.id),this.node.getComponent(m).show((function(t,a){e.bgIndex=a;var r=e.getBuildSceneStr();o||(o=h.getIdStr()),e.setString(o,r),e.mapItem||(e.mapItem=new p),e.mapItem.name=t,e.mapItem.id=o;var i=e.getString(h.buildMapCacheKey),n=[];i&&i.length>2&&JSON.parse(i)&&(n=JSON.parse(i));var l=!1;n.forEach((function(t){t.id===e.mapItem.id&&(t.name=e.mapItem.name,l=!0)})),0==l&&n.push(e.mapItem),e.setString(h.buildMapCacheKey,JSON.stringify(n)),e.toast("保存完毕")}),t,this.bgIndex)}},a.import=function(){var e=this;this.isNowMapSaved()?this.node.getComponent(u).show((function(t){e.mapItem=t,e.mapItem&&e.mapItem.id&&e.getString(e.mapItem.id)&&e.getString(e.mapItem.id).length>10?e.loadMap(e.getString(e.mapItem.id)):e.toast("场景元数据有误")})):this.toast("当前地图 [尚未保存]")},a.isNowMapSaved=function(){return 0==this.world.children.length||!(!this.mapItem&&this.world.children.length>0)&&(!this.mapItem||!this.mapItem.id||this.getBuildSceneStr()==this.getString(this.mapItem.id))},a.checkFomart=function(){var e=0,t=0,o=0,a=0,i=0,n=!1,l=!1;return r("World/Objs").children.forEach((function(r){var s=r.getComponent(d);s&&s.type==C.player_one&&e++,s&&s.type==C.player_two&&t++,s&&s.type==C.end&&o++,s&&s.type==C.coin_group&&a++,s&&s.type==C.tigger_group&&i++,s&&s.type==C.coin&&(n=!0),s&&s.type==C.tigger&&(l=!0)})),0==e?(this.toast("1号角色尚未设置出生点"),!1):0==t?(this.toast("2号角色尚未设置出生点"),!1):0==o?(this.toast("尚未设置终点"),!1):e>1?(this.toast("1号角色设置了多个出生点"),!1):t>1?(this.toast("2号角色设置了多个出生点"),!1):o>1?(this.toast("设置了多个终点"),!1):a>1?(this.toast("设置了多个金币组"),!1):i>1?(this.toast("设置了多个开关组"),!1):n&&a<=0?(this.toast("关卡中添加了金币,但是缺少金币组"),!1):!n&&a>0?(this.toast("关卡中添加了金币组,但是缺少金币"),!1):l&&i<=0?(this.toast("关卡中添加了开关,但是缺少开关组"),!1):!(!l&&i>0)||(this.toast("关卡中添加了开关组,但是缺少开关"),!1)},a.setShowBts=function(e,t){t.getChildByName("LargeW").active=!1,t.getChildByName("LargeH").active=!1,t.getChildByName("SmallW").active=!1,t.getChildByName("SmallH").active=!1,t.getChildByName("Add").active=!1,t.getChildByName("Cut").active=!1,t.getChildByName("TrunR").active=!1,t.getChildByName("TrunL").active=!1,e.type==C.land||e.type==C.water_zone||e.type==C.wall?(t.getChildByName("LargeW").active=!0,t.getChildByName("LargeH").active=!0,t.getChildByName("SmallW").active=!0,t.getChildByName("SmallH").active=!0):e.type==C.line_left||e.type==C.line_right?(t.getChildByName("LargeW").active=!0,t.getChildByName("SmallW").active=!0):e.type==C.line_up?(t.getChildByName("LargeH").active=!0,t.getChildByName("SmallH").active=!0):e.type==C.platform_hor||e.type==C.platform_limit_hor||e.type==C.platform_ven||e.type==C.platform_limit_ven?(t.getChildByName("LargeW").active=!0,t.getChildByName("SmallW").active=!0,t.getChildByName("Add").active=!0,t.getChildByName("Cut").active=!0):e.type==C.tigger&&(t.getChildByName("TrunR").active=!0,t.getChildByName("TrunL").active=!0)},a.getToolInfoStr=function(e){switch(e){case C.wall:return"墙体:不可以调整高度";case C.land:return"地面:可以在上表面走动,跳跃";case C.player_one:return"1号玩家出生点";case C.player_two:return"2号玩家出生点";case C.end:return"终点:两个人拿到钥匙后站在终点即可获胜";case C.end_key:return"钥匙:两个人拿到钥匙后站在终点即可获胜";case C.normal_cube:return"普通方块:可以自由推动,自由跨越";case C.stone_cube:return"石头方块:必须双人才能推动";case C.wood_cube:return"木头方块:单人就可以推动";case C.freeze_cube:return"冰块:只要碰到几秒后就会自动掉落,然后再恢复原位";case C.rope_wall:return"菱形障碍物:可以用来绕绳子";case C.line_right:case C.line_left:case C.line_up:return"死亡射线:碰到就死,除非有对应方向的盾牌";case C.tan_chuang:return"弹射器:能把你弹很高的道具";case C.gun_tool:return"传送枪:打中你就会消失,再打中任何地方你就会在那里出现";case C.rope_tool:return"绳子:可以把两个人绑在一起,通过收放绳子来到达难以到达的地方";case C.gravity_tool:return"引力控制器:可以控制引力方向,自己会定住不受影响";case C.small_tool:return"缩小点:碰到就回不停缩小";case C.large_tool:return"膨胀点:碰到就回不停变大";case C.dun_hor_tool:return"竖盾:可以抵御水平方向迎面射过来的死亡射线";case C.dun_ven_tool:return"横盾:可以抵御垂直方向射过来的死亡射线";case C.coin:return"金币:集齐就会出现道具,要配合金币组使用哦";case C.coin_group:return"金币组:显示当前金币的收集数量,集齐就会出现道具";case C.tigger:return"开关:所有开关都同时按住就回出现道具,要配合开关组使用哦";case C.tigger_group:return"开关组:显示当前同时打开的开关的数量,同时打开就会出现道具";case C.save:return"自动存档点:玩家死亡后会在经过的最后一个存档点重生,游戏中不可见";case C.platform_hor:case C.platform_ven:return"移动平台:回横向或竖向来回移动,蓝色箭头之间为移动范围,加减号调整范围大小";case C.platform_limit_hor:case C.platform_limit_ven:return"限人移动平台:只有满足规定数量的人站在上面才移动";case C.red_green_light:return"红绿灯:红灯时移动就会被传送回出生点或存档点";case C.obs_cube:return"方块刺:碰到就死,绳子碰到就会断开";case C.time_cube:return"回溯路径石头:只要开始移动就会在一定时间后原路返回";case C.water_zone:return"水域:就是一片水域,没什么好说的,跳进去游一游就知道了";case C.shoes:return"二段鞋:穿上之后就可以二段跳";case C.spear:return"标枪:可以发射大飞镖,一共三支,飞镖可以支撑角色站立";case C.grass:return"草丛:装饰点缀作用,无任何交互";case C.ball:return"弹球:碰到物体就会反弹,可以帮你吃金币";default:return"未知物品"}},o}(s))||f),e("SceneObjectType",function(e){return e[e.wall=0]="wall",e[e.land=1]="land",e[e.player_one=2]="player_one",e[e.player_two=3]="player_two",e[e.end=4]="end",e[e.end_key=5]="end_key",e[e.bg=6]="bg",e[e.normal_cube=7]="normal_cube",e[e.stone_cube=8]="stone_cube",e[e.wood_cube=9]="wood_cube",e[e.freeze_cube=10]="freeze_cube",e[e.rope_wall=11]="rope_wall",e[e.line_right=12]="line_right",e[e.line_left=13]="line_left",e[e.line_up=14]="line_up",e[e.tan_chuang=15]="tan_chuang",e[e.gun_tool=16]="gun_tool",e[e.rope_tool=17]="rope_tool",e[e.gravity_tool=18]="gravity_tool",e[e.small_tool=19]="small_tool",e[e.large_tool=20]="large_tool",e[e.dun_hor_tool=21]="dun_hor_tool",e[e.dun_ven_tool=22]="dun_ven_tool",e[e.coin=23]="coin",e[e.coin_group=24]="coin_group",e[e.tigger=25]="tigger",e[e.tigger_group=26]="tigger_group",e[e.save=27]="save",e[e.platform_hor=28]="platform_hor",e[e.platform_ven=29]="platform_ven",e[e.platform_limit_hor=30]="platform_limit_hor",e[e.platform_limit_ven=31]="platform_limit_ven",e[e.red_green_light=32]="red_green_light",e[e.obs_cube=33]="obs_cube",e[e.time_cube=34]="time_cube",e[e.water_zone=35]="water_zone",e[e.shoes=36]="shoes",e[e.spear=37]="spear",e[e.grass=38]="grass",e[e.ball=39]="ball",e}({}))),w=e("SceneItemData",(function(){this.type=C.land,this.posX=0,this.posY=0,this.angle=0,this.width=0,this.height=0,this.edge=0,this.limit=1}));o._RF.pop()}}}));

System.register("chunks:///_virtual/BuildSceneLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneLoader.ts","./BuildSceneCtrl.ts","./RapierBaseCollider.ts","./FreezeCubeCtrl.ts","./CoinGroupCtrl.ts","./TiggerGroupCtrl.ts","./DeathRayCtrl.ts","./RapierLimitPlatformCtrl.ts","./RedGreenLightCtrl.ts","./GameHelper.ts","./RapierWaterCtrl.ts","./BallCtrl.ts"],(function(e){var o,t,n,i,a,l,r,p,d,s,u,g,h,m,b,f,C,c,y,L,T;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,i=e.find,a=e.resources,l=e.Prefab,r=e.UITransform,p=e.v3,d=e.instantiate},function(e){s=e.SceneLoader},function(e){u=e.SceneObjectType},function(e){g=e.RapierBaseCollider},function(e){h=e.FreezeCubeCtrl},function(e){m=e.CoinGroupCtrl},function(e){b=e.TiggerGroupCtrl},function(e){f=e.DeathRayCtrl},function(e){C=e.RapierLimitPlatformCtrl},function(e){c=e.RedGreenLightCtrl},function(e){y=e.default},function(e){L=e.RapierWaterCtrl},function(e){T=e.BallCtrl}],execute:function(){var _;t._RF.push({},"b9588W/0/RLXIXpKQwI2jTx","BuildSceneLoader",void 0);var v=n.ccclass;n.property,e("BuildSceneLoader",v("BuildSceneLoader")(_=function(e){function t(){for(var o,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(o=e.call.apply(e,[this].concat(n))||this).prefabCount=0,o.lands=void 0,o.objs=void 0,o.prefabMap=new Map,o}o(t,e);var n=t.prototype;return n.onLoad=function(){var e=this;this.lands=i("Lands");var o=this.getString(y.testMapKey);if(y.isForTest||(o=y.sceneDataStr),!o||o.length<2)console.log("场景数据有误");else if(this.objs=JSON.parse(o),!this.objs||this.objs.length<4)console.log("场景数据对象有误");else{var t=["Wall","Land-Platform-Pure","EndDoor","EndKeyTool","Land-Cube-Normal","GunTool","GravityTool","RopeTool","Land-Cube-Freeze","TanChuang","Wall-For-Rope","SmallTigger","LargeTigger","CoinGroup","Coin","TiggerGroup","Tigger","DeathRayLeft","DeathRayRight","DeathRayUp","DunHTool","DunVTool","Land-Platform-Move-H","Land-Platform-Move-V","Land-Platform-Limit-H","Land-Platform-Limit-V","Land-Cube-Limit-Stone","Land-Cube-Limit-Wood","RedGreenLight","Save","ObsBox","Land-Cube-Time","WaterZone","Shoes","SpearTool","Grass","Ball"];t.forEach((function(o){a.load("builds/"+o,l,(function(n,i){e.prefabMap.set(o,i),e.prefabMap.size==t.length&&e.buildWorld()}))}))}},n.buildWorld=function(){var o=this;this.objs.length>2&&(this.objs.forEach((function(e){console.log(e),e.type==u.end&&o.buildTool(e,"EndDoor")})),this.objs.forEach((function(e){console.log(e),e.type==u.bg?(i("Bg").getComponent(r).width=e.width,i("Bg").getComponent(r).height=e.height,i("Bg").worldPosition=p(e.posX,e.posY,0),o.sceneIndex=e.edge):e.type==u.player_one?i("PlayerOneAchor").worldPosition=p(e.posX,e.posY,0):e.type==u.player_two?i("PlayerTwoAchor").worldPosition=p(e.posX,e.posY,0):e.type==u.end_key?o.buildTool(e,"EndKeyTool"):e.type==u.normal_cube?o.buildNormalCube(e):e.type==u.gun_tool?o.buildTool(e,"GunTool"):e.type==u.gravity_tool?o.buildTool(e,"GravityTool"):e.type==u.rope_tool?o.buildTool(e,"RopeTool"):e.type==u.freeze_cube?o.buildFreezeCubeTool(e,"Land-Cube-Freeze"):e.type==u.tan_chuang?o.buildTool(e,"TanChuang"):e.type==u.rope_wall?o.buildTool(e,"Wall-For-Rope"):e.type==u.small_tool?o.buildTool(e,"SmallTigger"):e.type==u.large_tool?o.buildTool(e,"LargeTigger"):e.type==u.coin_group?o.buildCoinGroup(e):e.type==u.tigger_group?o.buildTiggerGroup(e):e.type==u.dun_hor_tool?o.buildTool(e,"DunVTool"):e.type==u.dun_ven_tool?o.buildTool(e,"DunHTool"):e.type==u.line_left?o.buildLine(e,"DeathRayLeft"):e.type==u.line_right?o.buildLine(e,"DeathRayRight"):e.type==u.line_up?o.buildLine(e,"DeathRayUp"):e.type==u.platform_hor?o.buildPlatform(e,"Land-Platform-Move-H"):e.type==u.platform_ven?o.buildPlatform(e,"Land-Platform-Move-V"):e.type==u.platform_limit_hor?o.buildPlatform(e,"Land-Platform-Limit-H"):e.type==u.platform_limit_ven?o.buildPlatform(e,"Land-Platform-Limit-V"):e.type==u.save?o.buildTool(e,"Save"):e.type==u.red_green_light?o.buildRedGreenLight(e,"RedGreenLight"):e.type==u.stone_cube?o.buildCubeLimit(e,"Land-Cube-Limit-Stone"):e.type==u.wood_cube?o.buildCubeLimit(e,"Land-Cube-Limit-Wood"):e.type==u.obs_cube?o.buildTool(e,"ObsBox"):e.type==u.time_cube?o.buildTimeCube(e):e.type==u.water_zone?o.buildWaterZone(e):e.type==u.shoes?o.buildTool(e,"Shoes"):e.type==u.spear?o.buildTool(e,"SpearTool"):e.type==u.grass?o.buildGrass(e):e.type==u.ball&&o.buildBall(e)})),this.objs.forEach((function(e){console.log(e),e.type==u.wall?o.buildWall(e):e.type==u.land&&o.buildLand(e)}))),e.prototype.onLoad.call(this)},n.buildWall=function(e){var o=d(this.prefabMap.get("Wall"));o.parent=this.lands,o.worldPosition=p(e.posX,e.posY,0),o.getComponent(r).width=e.width,o.getComponent(r).height=e.height,o.name="Wall",o.getComponent(g).load()},n.buildLand=function(e){var o=d(this.prefabMap.get("Land-Platform-Pure"));o.parent=this.lands,o.worldPosition=p(e.posX,e.posY,0),o.getComponent(r).width=e.width,o.getComponent(r).height=e.height,o.name="Land-Platform-Pure",o.getComponent(g).load()},n.buildNormalCube=function(e){var o=d(this.prefabMap.get("Land-Cube-Normal"));o.parent=this.lands,o.worldPosition=p(e.posX,e.posY,0),o.name="Land-Cube-Normal"},n.buildTimeCube=function(e){var o=d(this.prefabMap.get("Land-Cube-Time"));o.parent=this.lands,o.worldPosition=p(e.posX,e.posY,0),o.name="Land-Cube-Time"},n.buildWaterZone=function(e){var o=d(this.prefabMap.get("WaterZone"));o.parent=this.lands,o.worldPosition=p(e.posX,e.posY,0),o.getComponent(r).width=e.width,o.getComponent(r).height=e.height-4,o.getChildByName("Node").getComponent(r).width=e.width,o.getChildByName("Node").getComponent(r).height=e.height,o.name="WaterZone",o.getComponent(g).load(),o.getComponent(L).load()},n.buildGrass=function(e){var o=d(this.prefabMap.get("Grass"));o.parent=this.lands,o.worldPosition=p(e.posX,e.posY,0),o.name="Grass"},n.buildBall=function(e){var o=d(this.prefabMap.get("Ball"));o.parent=this.lands,o.worldPosition=p(e.posX,e.posY,0),o.name="Ball",o.getComponent(g).load(),o.getComponent(T).load()},n.buildTool=function(e,o){var t=d(this.prefabMap.get(o));t.parent=this.lands,t.worldPosition=p(e.posX,e.posY,0),t.name=o,t.getComponent(g).load()},n.buildLine=function(e,o){var t=d(this.prefabMap.get(o));t.parent=this.lands,t.worldPosition=p(e.posX,e.posY,0),t.getComponent(r).width=32,t.getComponent(r).height=e.height,t.name=o,t.getComponent(g).load(),t.getComponent(f).load()},n.buildFreezeCubeTool=function(e,o){var t=d(this.prefabMap.get(o));t.parent=this.lands,t.worldPosition=p(e.posX,e.posY,0),t.name=o,t.getComponent(g).load(),t.getComponent(h).load()},n.buildCoinGroup=function(e){var o=this,t=d(this.prefabMap.get("CoinGroup"));t.parent=this.lands,t.worldPosition=p(e.posX,e.posY,0),t.name="CoinGroup",this.objs.forEach((function(e){if(e.type==u.coin){var n=d(o.prefabMap.get("Coin"));n.parent=t,n.worldPosition=p(e.posX,e.posY,0),n.name="Coin",n.getChildByName("CoinTool").getComponent(g).load()}})),t.getComponent(m).load()},n.buildTiggerGroup=function(e){var o=this,t=d(this.prefabMap.get("TiggerGroup"));t.parent=this.lands,t.worldPosition=p(e.posX,e.posY,0),t.name="TiggerGroup",this.objs.forEach((function(e){if(e.type==u.tigger){var n=d(o.prefabMap.get("Tigger"));n.parent=t,n.worldPosition=p(e.posX,e.posY,0),n.eulerAngles=p(0,0,e.angle),n.name="Tigger",n.getChildByName("Cude").getComponent(g).load(),n.getChildByName("Cude").getChildByName("Tigger").getComponent(g).load()}})),t.getComponent(b).load()},n.buildPlatform=function(e,o){var t=d(this.prefabMap.get(o));t.parent=this.lands,t.worldPosition=p(e.posX,e.posY,0),t.getComponent(r).width=e.width,t.name=o;var n=p(0,0,0),i=p(0,0,0);e.type==u.platform_hor||e.type==u.platform_limit_hor?(n.x=-e.edge/2,i.x=e.edge/2):e.type!=u.platform_ven&&e.type!=u.platform_limit_ven||(n.y=-e.edge/2,i.y=e.edge/2),t.getChildByName("S").position=n,t.getChildByName("L").position=i,e.type==u.platform_hor||e.type==u.platform_ven||(e.type==u.platform_limit_hor||e.type==u.platform_limit_ven)&&(t.getComponent(C).maxNumber=e.limit)},n.buildRedGreenLight=function(e,o){var t=d(this.prefabMap.get(o));t.parent=this.lands,t.worldPosition=p(e.posX,e.posY,0),t.name=o,t.getComponent(g).load(),t.getComponent(c).load()},n.buildCubeLimit=function(e,o){var t=d(this.prefabMap.get(o));t.parent=this.lands,t.worldPosition=p(e.posX,e.posY,0),t.name=o},t}(s))||_);t._RF.pop()}}}));

System.register("chunks:///_virtual/BulletCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts","./SpiderCtrl.ts","./RopeCtrl.ts"],(function(t){var e,i,o,r,s,n,a,l,p,h;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,r=t.UITransform,s=t.v3},function(t){n=t.RapierBaseCollider},function(t){a=t.default},function(t){l=t.PlayerDir,p=t.SpiderCtrl},function(t){h=t.RopeCtrl}],execute:function(){var d;i._RF.push({},"9e0f1a6MsVIWJnJ+lgKOGv2","BulletCtrl",void 0);var c=o.ccclass,y=(o.property,o.requireComponent),g=o.executionOrder;t("BulletCtrl",c("BulletCtrl")(d=y(n)(d=g(2)(d=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).rc=void 0,e.pos=void 0,e.step=10,e.dir=0,e.player=void 0,e.index=0,e.gc=void 0,e.isDisappeared=!1,e}e(i,t);var o=i.prototype;return o.load=function(t,e){this.player=e,this.dir=t,this.rc=this.getComponent(n),this.gc=e.gc,this.rc.onStepCallback=this.onStepCallback.bind(this),this.rc.onEnterCallback=this.onEnter.bind(this);var i=this.rc.rigidBody.translation();this.pos={x:i.x,y:i.y},this.gc.playAudioEffect("broken1")},o.onStepCallback=function(){this.index++,this.index>240?this.disappear():(this.dir==l.right?this.pos.x+=this.step:this.pos.x-=this.step,this.rc.rigidBody.setTranslation(this.pos,!0))},o.onEnter=function(t,e){if(e.rigidBody){var i=this.rc.rigidBody.translation();if(this.disappear(),this.gc.playAudioEffect("broken1"),this.player.shootPlayer){var o=this.player.shootPlayer.getComponent(r).width/2+8;i.x+=this.dir==l.right?-o:o,i.y+=24,this.player.shootPlayer.getComponent(n).rigidBody.setTranslation(i,!0),this.player.shootPlayer.getComponent(n).setSpeed(s(0,0,0)),this.player.shootPlayer.node.getComponent(p).isShooted=!1,this.player.shootPlayer=null,this.gc.renderBts()}else e.getComponent(p)&&0==e.getComponent(p).isDead&&e!=this.player.getComponent(n)&&(e.getComponent(h).deleteRope(),this.player.getComponent(h).anchorTarget==e&&this.player.getComponent(h).deleteRope(),this.player.shootPlayer=e.getComponent(p),e.rigidBody.setTranslation({x:-1000001,y:-1000001},!0),e.getComponent(p).isShooted=!0,this.gc.renderBts())}},o.disappear=function(){this.isDisappeared||(this.isDisappeared=!0,this.rc.deleteFromWorld(),this.node.destroy())},i}(a))||d)||d)||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/CameraCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./Joystick.ts","./SpiderCtrl.ts","./GameCtrl.ts"],(function(t){var o,i,s,e,n,h,a,c,r,d,g,u;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,s=t._decorator,e=t.find,n=t.UITransform,h=t.Node,a=t.v2,c=t.v3},function(t){r=t.default},function(t){d=t.Joystick},function(t){g=t.SpiderCtrl},function(t){u=t.GameCtrl}],execute:function(){var P;i._RF.push({},"017105kjohAQpLJhvVczk16","CameraCtrl",void 0);var l=s.ccclass;s.property,t("default",l("CameraCtrl")(P=function(t){function i(){for(var o,i=arguments.length,s=new Array(i),e=0;e<i;e++)s[e]=arguments[e];return(o=t.call.apply(t,[this].concat(s))||this).targetObject=void 0,o.isTouching=!1,o.joyNode=void 0,o.disX=600,o.disY=300,o.pp=a(),o.gc=void 0,o.sceneLoader=void 0,o.bg=void 0,o.canvasWidth=0,o.canvasHeight=0,o.touchPos=c(),o.initPosCount=0,o}o(i,t);var s=i.prototype;return s.init=function(t){var o=this;this.gc=e("Canvas").getComponent(u),this.bg=e("Bg").getComponent(n),this.canvasWidth=e("Canvas").getComponent(n).width/2,this.canvasHeight=e("Canvas").getComponent(n).height/2,this.joyNode=e("Canvas/DownFrame/Joystick").getComponent(d),this.targetObject=t,e("Canvas/WorldMask").off(h.EventType.TOUCH_MOVE),e("Canvas/WorldMask").on(h.EventType.TOUCH_MOVE,(function(t){if(o.targetObject&&!(o.initPosCount<100||o.targetObject.getComponent(g).isShooted)){var i=t.touch.getLocation().x-t.touch.getPreviousLocation().x,s=t.touch.getLocation().y-t.touch.getPreviousLocation().y;o.pp.x=i,o.pp.y=s,o.pp.rotate(o.node.eulerAngles.z/(180/Math.PI)),i=o.pp.x,s=o.pp.y;o.touchPos.x=o.node.worldPosition.x-2*i,o.touchPos.y=o.node.worldPosition.y-2*s,o.touchPos.z=o.node.worldPosition.z,o.getByEdgePos(o.touchPos),o.node.worldPosition=o.touchPos}})),e("Canvas/WorldMask").on(h.EventType.TOUCH_START,(function(t){o.isTouching=!0,t.preventSwallow=!0})),e("Canvas/WorldMask").on(h.EventType.TOUCH_END,(function(t){o.isTouching=!1,t.preventSwallow=!0})),e("Canvas/WorldMask").on(h.EventType.TOUCH_CANCEL,(function(t){o.isTouching=!1,t.preventSwallow=!0}))},s.getByEdgePos=function(t){if(this.bg){var o=this.bg.node.getWorldPosition().x+(this.bg.width/2-this.canvasWidth),i=this.bg.node.getWorldPosition().x-(this.bg.width/2-this.canvasWidth),s=this.bg.node.getWorldPosition().y+(this.bg.height/2-this.canvasHeight),e=this.bg.node.getWorldPosition().y-(this.bg.height/2-this.canvasHeight);t.y<e?t.y=e:t.y>s&&(t.y=s),t.x<i?t.x=i:t.x>o&&(t.x=o)}},s.setPosition=function(t){t.x<this.targetObject.worldPosition.x-this.disX?t.x=this.targetObject.worldPosition.x-this.disX:t.x>this.targetObject.worldPosition.x+this.disX&&(t.x=this.targetObject.worldPosition.x+this.disX),t.y<this.targetObject.worldPosition.y-this.disY?t.y=this.targetObject.worldPosition.y-this.disY:t.y>this.targetObject.worldPosition.y+this.disY&&(t.y=this.targetObject.worldPosition.y+this.disY)},s.physicsUpdate=function(){this.targetObject&&(this.targetObject.getComponent(g).isShooted||(this.initPosCount<100?(this.updatePos2(),this.initPosCount++):this.gc.isLimitSight?this.isTouching||this.updatePos():!this.isTouching&&this.gc&&this.gc.getNowPlayer()&&0!=this.gc.getNowPlayer().speed.x&&this.updatePos()))},s.updatePos=function(){this.touchPos.x=this.node.worldPosition.x,this.touchPos.y=this.node.worldPosition.y,this.touchPos.z=this.node.worldPosition.z,this.setPosition(this.touchPos),this.getByEdgePos(this.touchPos),this.node.worldPosition=this.touchPos},s.updatePos2=function(){this.touchPos.x=this.targetObject.worldPosition.x,this.touchPos.y=this.targetObject.worldPosition.y+280,this.touchPos.z=1e3,this.setPosition(this.touchPos),this.getByEdgePos(this.touchPos),this.node.worldPosition=this.touchPos},i}(r))||P);i._RF.pop()}}}));

System.register("chunks:///_virtual/CellCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./RapierBox2DCollider.ts","./GameCtrl.ts"],(function(t){var e,o,n,i,l,s,r,c,a,d;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.find,l=t.instantiate,s=t.v3,r=t.UITransform},function(t){c=t.default},function(t){a=t.RapierBox2DCollider},function(t){d=t.GameCtrl}],execute:function(){var h,C;o._RF.push({},"eb40eCRJv5B05js5I/PAA1T","CellCtrl",void 0);var p=n.ccclass,u=(n.property,n.executionOrder),g=n.requireComponent;t("CellCtrl",p("CellCtrl")(h=g(a)(h=u(2)(((C=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).rc=void 0,e.myPhysicsScale=1,e.id=1,e.gc=void 0,e}e(o,t);var n=o.prototype;return n.load=function(){var t=this;console.log("----------load--CellCtrl--------"),this.rc=this.getComponent(a),this.gc=i("Canvas").getComponent(d),this.rc.load(),this.rc.onStepCallback=this.onStepCallback.bind(this),this.setButtonEvent(this.node,(function(){t.gc.sendCellMsg(t.id)}))},n.onStepCallback=function(){},n.add=function(){var t=l(this.gc.cellPrefab);i("Canvas").parent.addChild(t);var e=this.node.worldPosition;t.worldPosition=s(e.x,e.y,e.z),this.setScaleAndId(t),t.getComponent(o).load()},n.large=function(){this.myPhysicsScale=this.myPhysicsScale+.2;var t=l(this.gc.cellPrefab);i("Canvas").parent.addChild(t);var e=this.node.worldPosition;t.worldPosition=s(e.x,e.y,e.z),this.rc.deleteFromWorld(),d.cells.delete(this.id),this.node.destroy(),this.setScaleAndId(t),t.getComponent(o).load()},n.setScaleAndId=function(t){t.getComponent(r).width=t.getComponent(r).width*this.myPhysicsScale,t.getComponent(r).height=t.getComponent(r).height*this.myPhysicsScale,t.getComponent(o).myPhysicsScale=this.myPhysicsScale,t.getComponent(o).id=o.nowBornId,o.nowBornId++,d.cells.set(t.getComponent(o).id,t.getComponent(o)),console.log("------new_cell_id:"+this.id)},o}(c)).nowBornId=1,h=C))||h)||h)||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterSelectPannelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePannelController.ts","./LobbyCtrl.ts","./GameCtrl.ts","./ComfirmPannelCtrl.ts","./NetIns.ts","./FirstSceneCtrl.ts","./GameHelper.ts"],(function(e){var t,n,a,i,o,l,r,s,c,C,h,g,m,p,u,d,S,v;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator,i=e.find,o=e.UITransform,l=e.instantiate,r=e.v3,s=e.Label,c=e.Color,C=e.Sprite},function(e){h=e.BasePannelController},function(e){g=e.LobbyCtrl},function(e){m=e.GameMode,p=e.GameCtrl},function(e){u=e.ComfirmPannelCtrl},function(e){d=e.NetIns},function(e){S=e.FirstSceneCtrl},function(e){v=e.default}],execute:function(){var B,f;n._RF.push({},"c13c6xTLKlJL5TYDM3aPMnB","ChapterSelectPannelCtrl",void 0);var P=a.ccclass;a.property,e("ChapterSelectPannelCtrl",P("ChapterSelectPannelCtrl")(((f=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).gameMode=m.single,t.isShowBuildChapters=!1,t.isBUildAnyMap=!0,t.selectChapter=void 0,t.mapStr="",t.callback=void 0,t}t(n,e);var a=n.prototype;return a.start=function(){var e=this;this.renderItem(),this.renderItemForBuild(),this.setButtonEvent(i("Canvas/ChapterSelectPannel/Pannel/Build"),(function(){e.isShowBuildChapters=!0,e.renderTag(),0==e.isBUildAnyMap&&e.getComponent(u).show("您尚未编辑任何关卡,是否要去编辑自制关卡?",(function(){v.exchangeScene("BuildScene")}),!1,!1,"前往")})),this.setButtonEvent(i("Canvas/ChapterSelectPannel/Pannel/Inside"),(function(){e.isShowBuildChapters=!1,e.renderTag()})),this.renderTag()},a.renderTag=function(){i("Canvas/ChapterSelectPannel/Pannel/Build/Bg").active=!1,i("Canvas/ChapterSelectPannel/Pannel/Inside/Bg").active=!1,this.isShowBuildChapters?(i("Canvas/ChapterSelectPannel/Pannel/Build/Bg").active=!0,i("Canvas/ChapterSelectPannel/Pannel/ScrollView").active=!1,i("Canvas/ChapterSelectPannel/Pannel/ScrollViewBuild").active=!0):(i("Canvas/ChapterSelectPannel/Pannel/Inside/Bg").active=!0,i("Canvas/ChapterSelectPannel/Pannel/ScrollView").active=!0,i("Canvas/ChapterSelectPannel/Pannel/ScrollViewBuild").active=!1)},a.getChapterCoverByIndex=function(e){return 12==e||13==e||14==e||15==e?"c12":16==e||17==e||19==e||20==e?"c16":21==e||22==e||23==e||49==e?"c21":24==e||25==e||26==e?"c24":27==e||28==e||29==e||30==e||46==e||47==e||48==e?"c27":e>30&&e<41?"c31":e>40&&e<46?"c41":4==e||6==e?"c4":"c1"},a.renderItemForBuild=function(){var e,t=this,n=i("Canvas/ChapterSelectPannel/Pannel/ScrollViewBuild/View/Content"),a=i("Canvas/ChapterSelectPannel/Pannel/ScrollViewBuild/View/Content/ItemHide"),C=0,h=this.getString(v.buildMapCacheKey);if(!(h&&h.length>3&&JSON.parse(h)))return console.log("尚未保存任何地图2"),void(this.isBUildAnyMap=!1);if((e=JSON.parse(h)).length<=0)return console.log("尚未保存任何地图1"),void(this.isBUildAnyMap=!1);C=e.length-e.length%5+5,n.getComponent(o).height=250*C/5+50;for(var g=function(){var i=e[m];if(i){var o="Scene_"+i.name,C=l(a);C.name="Chapter"+m,C.position=r(250*(m%5-2),(m-m%5)/5*-250-50,0),C.parent=n,C.active=!0;var h=t.getInt(o,0);C.getChildByName("Status").getComponent(s).color=c.RED,1==h?(C.getChildByName("Status").getComponent(s).string="已通关",C.getChildByName("Status").getComponent(s).color=c.BLACK):(C.getChildByName("Status").getComponent(s).string="已解锁",C.getChildByName("Status").getComponent(s).color=c.BLUE),t.setButtonEvent(C,(function(){v.isForTest=!1,v.sceneDataStr=t.getString(i.id),v.sceneNameStr=i.name,t.mapStr=t.getString(i.id),t.startGame(o,!0)})),C.getChildByName("Label").getComponent(s).string=i.name}},m=0;m<C;m++)g()},a.renderItem=function(){var e=this,t=i("Canvas/ChapterSelectPannel/Pannel/ScrollView/View/Content"),a=i("Canvas/ChapterSelectPannel/Pannel/ScrollView/View/Content/ItemHide");t.getComponent(o).height=250*n.maxSceneCount/5+50;for(var h=function(i){var o="Scene_"+(i+1),h=l(a);h.name="Chapter"+i,h.position=r(250*(i%5-2),(i-i%5)/5*-250-50,0),h.parent=t,h.active=!0;var g=h.getChildByName("Sprite").getComponent(C);v.getImageByPath("covers/"+e.getChapterCoverByIndex(i+1),g);var m=e.getInt(o,0),p=!1;if(1==m)h.getChildByName("Status").getComponent(s).string="已通关",h.getChildByName("Status").getComponent(s).color=c.BLACK,p=!0;else if(0!=i){var d=v.getLastSceneName(o);1==e.getInt(d,0)||2==m?(h.getChildByName("Status").getComponent(s).string="已解锁",h.getChildByName("Status").getComponent(s).color=c.BLUE,p=!0):(h.getChildByName("Status").getComponent(s).string="未解锁",h.getChildByName("Status").getComponent(s).color=c.RED)}else h.getChildByName("Status").getComponent(s).string="已解锁",h.getChildByName("Status").getComponent(s).color=c.BLUE,p=!0;e.setButtonEvent(h,(function(){i>=n.maxSceneCount?e.toast("此关卡尚未开放,敬请期待"):0!=p?e.startGame(o,!1):e.getComponent(u).showForAd("场景尚未解锁,是否要观看广告来解锁该关卡",(function(){e.showAd((function(){e.setInt(o,2),e.startGame(o,!1)}))}))})),h.getChildByName("Label").getComponent(s).string="第"+(i+1)+"关"},g=0;g<n.maxSceneCount;g++)h(g)},a.startGame=function(e,t){if(this.gameMode==m.single){var n=S.playerInfo.getDiamondNumber(this);if(n<5)return void this.toast("不足5个钻石无法玩任何关卡,可以通过观看广告获取钻石");n-=5,S.playerInfo.setDiamondNumber(n,this),this.node.getComponent(g).renderPlayerInfo(),t?g.gotoGameScene("Scene_Test"):g.gotoGameScene(e)}else{if(S.playerInfo.getDiamondNumber(this)<20)return void this.toast("不足20个钻石无法创建房间,可以通过观看广告获取钻石");if(this.selectChapter=e,t||(this.mapStr=""),this.callback)return void this.hide();p.msgs=new Map,d.getIns().buildRoom(e,"cop",!1)}},a.show=function(e,t){this.callback=t,this.gameMode=e,this.showPannel(i("Canvas/ChapterSelectPannel"))},a.hide=function(){this.hidePannel(i("Canvas/ChapterSelectPannel")),this.callback&&this.callback(this.selectChapter,this.mapStr)},n}(h)).maxSceneCount=50,B=f))||B);n._RF.pop()}}}));

System.register("chunks:///_virtual/CoinGroupCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./GameCtrl.ts"],(function(o){var t,n,e,i,l,a,r,c,s,d,u,C;return{setters:[function(o){t=o.applyDecoratedDescriptor,n=o.inheritsLoose,e=o.initializerDefineProperty,i=o.assertThisInitialized},function(o){l=o.cclegacy,a=o._decorator,r=o.Label,c=o.find,s=o.Sprite,d=o.Component},function(o){u=o.RapierBaseCollider},function(o){C=o.GameCtrl}],execute:function(){var h,p,g,f,y,m;l._RF.push({},"2d871tXv0xLp6BJk3WBTptM","CoinGroupCtrl",void 0);var v=a.ccclass,B=a.property,b=(a.requireComponent,a.executionOrder);o("CoinGroupCtrl",(h=v("CoinGroupCtrl"),p=b(2),g=B(Boolean),h(f=p((m=t((y=function(o){function t(){for(var t,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return(t=o.call.apply(o,[this].concat(l))||this).gc=void 0,t.totalCoinCount=0,t.onEnterCoinCount=0,t.tool=void 0,t.label=void 0,t.index=0,e(t,"isDynamicAdd",m,i(t)),t}n(t,o);var l=t.prototype;return l.update=function(o){this.index++},l.onLoad=function(){this.isDynamicAdd||this.load()},l.load=function(){var o=this;this.label=this.node.getChildByName("ToolBg").getChildByName("Label").getComponent(r);for(var t=this.getComponentsInChildren(u),n=function(){var n=t[e];n.node.name.includes("CoinTool")&&(o.totalCoinCount++,n.onEnterCallback=function(t,e){(e.node.name.includes("ZhiZhu")||e.node.name.includes("Ball"))&&(n.deleteFromWorld(),n.node.destroy(),o.playAudio(),o.onEnterCoinCount++,o.checkAllCoinGet())},n.onStepCallback=function(){o.index%20==0&&(n.isFixedByRope=!n.isFixedByRope,n.node.getChildByName("Gray").active=n.isFixedByRope)}),n.node.name.includes("ShowTool")&&(o.tool=n)},e=0;e<t.length;e++)n();this.checkAllCoinGet()},l.playAudio=function(){this.gc||(this.gc=c("Canvas").getComponent(C)),this.gc.playAudioEffect("coin_down1")},l.checkAllCoinGet=function(){this.label.string=this.onEnterCoinCount+"/"+this.totalCoinCount,this.onEnterCoinCount==this.totalCoinCount&&(this.tool.load(),this.tool.getComponent(s).enabled=!0,this.node.getChildByName("ToolBg").active=!1,this.gc||(this.gc=c("Canvas").getComponent(C)),this.gc.toast("已获得全部金币,解锁了新道具"),this.gc.playAudioEffect("click_light1"))},t}(d)).prototype,"isDynamicAdd",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=y))||f)||f));l._RF.pop()}}}));

System.register("chunks:///_virtual/ColorCubeCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts","./SpiderCtrl.ts"],(function(e){var t,o,r,n,i,l,s,c,a,p,u,d,h,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,s=e.Enum,c=e.v3,a=e.Sprite,p=e.color},function(e){u=e.RapierBaseCollider},function(e){d=e.default},function(e){h=e.ColorType,C=e.SpiderCtrl}],execute:function(){var y,b,f,g,v,T,m;i._RF.push({},"2640cVReKpBMZw8x7A1n1Sv","ColorCubeCtrl",void 0);var B=l.ccclass,S=l.property,P=l.requireComponent,k=l.executionOrder;e("ColorCubeCtrl",(y=B("ColorCubeCtrl"),b=P(u),f=k(2),g=S({type:s(h)}),y(v=b(v=f((m=t((T=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(t=e.call.apply(e,[this].concat(i))||this).rc=void 0,t.sp=void 0,t.enterPlayer=void 0,r(t,"colorType",m,n(t)),t.speed=c(0,0,0),t}o(t,e);var i=t.prototype;return i.onLoad=function(){this.sp=this.node.getComponent(a),this.sp?this.renderColor():console.log("----缺少必要组件----"),this.rc=this.getComponent(u),this.rc.rigidBody.setEnabledTranslations(!1,!0,!0),this.rc.rigidBody.lockRotations(!0,!0),this.rc.onStepCallback=this.onStepCallback.bind(this),this.rc.onEnterCallback=this.onEnter.bind(this),this.rc.onQuitCallback=this.onQuit.bind(this)},i.renderColor=function(){this.colorType==h.yellow?this.sp.color=p(252,224,140,255):this.colorType==h.green&&(this.sp.color=p(156,204,124,255))},i.onStepCallback=function(){this.enterPlayer&&0!=this.enterPlayer.getComponent(C).speed.x?this.rc.rigidBody.setEnabledTranslations(!0,!0,!0):this.rc.rigidBody.setEnabledTranslations(!1,!0,!0)},i.onEnter=function(e,t){t.node.getComponent(C)&&t.node.getComponent(C).colorType==this.colorType&&(this.enterPlayer=t)},i.onQuit=function(e,t){t==this.enterPlayer&&(this.enterPlayer=null,this.rc.setSpeed(this.speed))},t}(d)).prototype,"colorType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.yellow}}),v=T))||v)||v)||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/ComfirmPannelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePannelController.ts"],(function(n){var a,e,i,l,o,t,r,s;return{setters:[function(n){a=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,l=n.find,o=n.Node,t=n.RichText,r=n.Label},function(n){s=n.BasePannelController}],execute:function(){var C;e._RF.push({},"4d0e99G6rBKEbiajgh70Xnk","ComfirmPannelCtrl",void 0);var m=i.ccclass;i.property,n("ComfirmPannelCtrl",m("ComfirmPannelCtrl")(C=function(n){function e(){return n.apply(this,arguments)||this}a(e,n);var i=e.prototype;return i.start=function(){var n=this;l("Canvas/ComfirmPannel/Pannel/Cancel").on(o.EventType.TOUCH_END,(function(){n.hide()}),this)},i.showForAd=function(n,a,e){this.show(n,a,!1,!0)},i.show=function(n,a,e,i,s){var C=this;void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===s&&(s="确定"),n=this.replaceAllStr(n,"[","<color=#ff0000>"),n="<outline color=gray width=4>"+(n=this.replaceAllStr(n,"]","</color>"))+"</outline>",l("Canvas/ComfirmPannel/Pannel/Text").getComponent(t).string=n,e?(l("Canvas/ComfirmPannel/Pannel/Ok").active=!1,l("Canvas/ComfirmPannel/Pannel/Cancel").active=!1,this.showPannel(l("Canvas/ComfirmPannel"),!0,!0)):(l("Canvas/ComfirmPannel/Pannel/Ok").active=!0,l("Canvas/ComfirmPannel/Pannel/Cancel").active=!0,this.showPannel(l("Canvas/ComfirmPannel"),!0,!1),l("Canvas/ComfirmPannel/Pannel/Ok/Label").getComponent(r).string=s,i?(l("Canvas/ComfirmPannel/Pannel/Ok/Label").active=!1,l("Canvas/ComfirmPannel/Pannel/Ok/Ad").active=!0):(l("Canvas/ComfirmPannel/Pannel/Ok/Label").active=!0,l("Canvas/ComfirmPannel/Pannel/Ok/Ad").active=!1)),l("Canvas/ComfirmPannel/Pannel/Ok").off(o.EventType.TOUCH_END),l("Canvas/ComfirmPannel/Pannel/Ok").on(o.EventType.TOUCH_END,(function(){C.hidePannel(l("Canvas/ComfirmPannel")),a()}),this)},i.hide=function(){this.hidePannel(l("Canvas/ComfirmPannel"))},e}(s))||C);e._RF.pop()}}}));

System.register("chunks:///_virtual/CubeWeightCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts"],(function(e){var t,i,r,n,o,s,a,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Sprite},function(e){c=e.RapierBaseCollider},function(e){l=e.default}],execute:function(){var p,u,d,h,m,C,f,g,y;o._RF.push({},"4b4c9ivWXxNMKwXP+4p7jww","CubeWeightCtrl",void 0);var b=s.ccclass,v=s.property,F=s.requireComponent,B=s.executionOrder;e("CubeWeightCtrl",(p=b("CubeWeightCtrl"),u=F(c),d=B(-1),h=v(Boolean),m=v(Boolean),p(C=u(C=d((g=t((f=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).rc=void 0,r(t,"isForOne",g,n(t)),r(t,"isDynamicAdd",y,n(t)),t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.isDynamicAdd||this.load()},o.load=function(){this.rc=this.getComponent(c),this.rc.density=0,this.isForOne?(this.rc.mass=16e3,this.node.getComponent(a).spriteFrame=this.node.getChildByName("Wood").getComponent(a).spriteFrame):(this.rc.mass=4e4,this.node.getComponent(a).spriteFrame=this.node.getChildByName("Stone").getComponent(a).spriteFrame)},t}(l)).prototype,"isForOne",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=t(f.prototype,"isDynamicAdd",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=f))||C)||C)||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/DeathRayCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts","./SpiderCtrl.ts"],(function(t){var e,i,o,r,n,a,s,l,h,p,c,d,y,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Sprite,l=t.Enum,h=t.UITransform,p=t.sys},function(t){c=t.RapierBaseCollider},function(t){d=t.default},function(t){y=t.SpiderCtrl,u=t.PlayerDir}],execute:function(){var f,m,g,_,v,C,D,P,w,z;n._RF.push({},"5af61PGkApDYpR4M8hMjho6","DeathRayCtrl",void 0);var b=a.ccclass,x=a.property,R=a.requireComponent,B=a.executionOrder,S=function(t){return t[t.vertical_up=0]="vertical_up",t[t.vertical_down=1]="vertical_down",t[t.horizontal_left=2]="horizontal_left",t[t.horizontal_right=3]="horizontal_right",t}(S||{});t("DeathRayCtrl",(f=b("DeathRayCtrl"),m=R(c),g=R(s),_=B(2),v=x({type:l(S)}),C=x(Boolean),f(D=m(D=g(D=_((w=e((P=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,o(e,"type",w,r(e)),e.time=0,e.rc=void 0,e.worldPos=0,e.x=0,e.y=0,o(e,"isDynamicAdd",z,r(e)),e}i(e,t);var n=e.prototype;return n.onLoad=function(){this.isDynamicAdd||this.load()},n.load=function(){this.rc=this.getComponent(c),this.rc.onStepCallback=this.onStepCallback.bind(this)},n.onStepCallback=function(){var t=this;this.worldPos=999999;var e=null;if(this.node.getComponent(c).collisonSet.forEach((function(i){if(0==i.isDeleteFromWorld&&i.isRigidbody&&i.node.name.includes("ZhiZhu"))if(e){var o=e.rigidBody.translation(),r=i.rigidBody.translation();t.type==S.horizontal_left?e=o.x-r.x<0?e:i:t.type==S.horizontal_right?e=o.x-r.x>0?e:i:t.type==S.vertical_up?e=o.y-r.y>0?e:i:t.type==S.vertical_down&&(e=o.y-r.y<0?e:i)}else e=i})),e){this.x=e.getComponent(h).width/2,this.y=e.getComponent(h).height/2;var i=e.rigidBody.translation();this.type==S.horizontal_left?this.worldPos=i.x-1.5*this.x:this.type==S.horizontal_right?this.worldPos=i.x+1.5*this.x:this.type==S.vertical_up?this.worldPos=i.y+this.y:this.type==S.vertical_down&&(this.worldPos=i.y-this.y);var o=e.getComponent(y),r=!1;this.type!=S.horizontal_right||o.hasVDun?this.type==S.horizontal_right&&o.hasVDun&&o.dir==u.left?r=!0:this.type!=S.horizontal_left||o.hasVDun?this.type==S.horizontal_left&&o.hasVDun&&o.dir==u.right?r=!0:this.type!=S.vertical_up||o.hasHDun?this.type==S.vertical_down&&(r=!0):r=!0:r=!0:r=!0,r&&!o.isDead&&o.dead(50,!0)}},n.start=function(){p.platform==p.Platform.WECHAT_GAME?this.node.getComponent(s).materials[0].setProperty("permeter",.1):this.node.getComponent(s).materials[0].setProperty("permeter",1),this.node.getComponent(s).materials[0].setProperty("type",this.type)},n.update=function(t){this.time+=1*t,this.node.getComponent(s).materials[0].setProperty("time",this.time),this.node.getComponent(s).materials[0].setProperty("worldPos",this.worldPos)},e}(d)).prototype,"type",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.vertical_up}}),z=e(P.prototype,"isDynamicAdd",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=P))||D)||D)||D)||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DecorationSelectPannelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePannelController.ts","./GameHelper.ts","./ComfirmPannelCtrl.ts"],(function(e){var n,t,a,o,l,c,r,i,s,u;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,a=e._decorator,o=e.find,l=e.instantiate,c=e.v3,r=e.Sprite},function(e){i=e.BasePannelController},function(e){s=e.default},function(e){u=e.ComfirmPannelCtrl}],execute:function(){var h;t._RF.push({},"f686748Zr9OZah9gmV9h//Z","DecorationSelectPannelCtrl",void 0);var p=a.ccclass;a.property,e("DecorationSelectPannelCtrl",p("DecorationSelectPannelCtrl")(h=function(e){function t(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(n=e.call.apply(e,[this].concat(a))||this).callback=void 0,n.type=1,n}n(t,e);var a=t.prototype;return a.show=function(e,n){this.type=e,this.callback=n,this.showPannel(o("Canvas/DecorationSelectPannel"),!0,!0),this.renderData()},a.renderData=function(){for(var e=this,n=o("Canvas/DecorationSelectPannel/Pannel/ScrollView/Content"),t=o("Canvas/DecorationSelectPannel/Pannel/ScrollView/Content/ItemHide"),a=this.getInt("sign_count",0),i=function(o){var i=l(t);i.name="Chapter"+o,i.position=c(250*(o%3-1),(o-o%3)/3*-250-50,0),i.parent=n,i.active=!0;var h=i.getChildByName("Sprite").getComponent(r);s.getImageByPath(1==e.type?"caps/cap"+(o+1):"glasses/glass"+(o+1),h),o<a+1||1==e.getInt("zhuang_ban_"+e.type+o,0)?i.getChildByName("Lock").active=!1:i.getChildByName("Lock").active=!0,e.setButtonEvent(h.node,(function(){o<a+1||1==e.getInt("zhuang_ban_"+e.type+o,0)?(e.hide(),e.callback(e.type,o+1)):e.getComponent(u).showForAd("该装饰品尚未通过每日签到解锁,是否要通过看广告来解锁?",(function(){e.showAd((function(){e.setInt("zhuang_ban_"+e.type+o,1),e.renderData()}))}))}))},h=0;h<6;h++)i(h);this.setButtonEvent(o("Canvas/DecorationSelectPannel/Pannel/Clear"),(function(){e.hide(),e.callback(e.type,0)}))},a.hide=function(){this.hidePannel(o("Canvas/DecorationSelectPannel"))},t}(i))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/DragComp.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var o,e,t,r,i,s;return{setters:[function(n){o=n.inheritsLoose},function(n){e=n.cclegacy,t=n._decorator,r=n.Node,i=n.Vec3,s=n.Component}],execute:function(){var c;e._RF.push({},"35b4c6dtSRA9bMqnOyD2clC","DragComp",void 0);var a=t.ccclass;t.property,t.requireComponent,t.executionOrder,n("DragComp",a("DragComp")(c=function(n){function e(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(o=n.call.apply(n,[this].concat(t))||this).screenPos=new i(0,0,0),o}o(e,n);var t=e.prototype;return t.start=function(){this.node.on(r.EventType.TOUCH_MOVE,this.onDrag,this),this.node.on(r.EventType.TOUCH_END,this.onCancelDrag,this),this.node.on(r.EventType.TOUCH_START,this.onBeginDrag,this)},t.onBeginDrag=function(n){},t.onDrag=function(n){var o=n.getUILocation();this.screenPos.x=o.x,this.screenPos.y=o.y,this.node.worldPosition=this.screenPos},t.onCancelDrag=function(n){},e}(s))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/DragItemCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./AnchorCtrl.ts","./BuildCameraCtrl.ts","./BuildItemComp.ts","./BuildSceneCtrl.ts"],(function(t){var n,e,o,i,s,r,a,h,l,c,d,g,C,u,p,m,y,f,v,P;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Enum,h=t.Vec3,l=t.find,c=t.UITransform,d=t.Node,g=t.Sprite,C=t.Label,u=t.v3},function(t){p=t.default},function(t){m=t.AnchorCtrl},function(t){y=t.default},function(t){f=t.BuildItemComp},function(t){v=t.SceneObjectType,P=t.BuildSceneCtrl}],execute:function(){var D,b,w,I,x;s._RF.push({},"42856ZBKaxFZolRmg6+S3rr","DragItemCtrl",void 0);var T=r.ccclass,S=r.property;t("DragItemCtrl",(D=T("DragItemCtrl"),b=S({type:a(v)}),D((x=n((I=function(t){function n(){for(var n,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return(n=t.call.apply(t,[this].concat(s))||this).screenPos=new h(0,0,0),n.targetPos=new h(0,0,0),n.beginDragPos=new h(0,0,0),o(n,"type",x,i(n)),n.world=void 0,n.ins=void 0,n.anchorCtrl=void 0,n.camCtrl=void 0,n.buildSceneCtrl=void 0,n.canvasWidth=0,n.canvasHeight=0,n}e(n,t);var s=n.prototype;return s.start=function(){this.canvasWidth=l("Canvas").getComponent(c).width/2,this.canvasHeight=l("Canvas").getComponent(c).height/2,this.world=l("World/Objs"),this.anchorCtrl=l("World/Anchor").getComponent(m),this.camCtrl=l("Canvas/Camera").getComponent(y),this.buildSceneCtrl=l("Canvas").getComponent(P),this.node.on(d.EventType.TOUCH_MOVE,this.onDrag,this),this.node.on(d.EventType.TOUCH_END,this.onCancelDrag,this),this.node.on(d.EventType.TOUCH_START,this.onBeginDrag,this),this.node.on(d.EventType.TOUCH_CANCEL,this.onCancelDrag,this)},s.onBeginDrag=function(t){var n=t.getUILocation();if(this.beginDragPos.x=n.x,this.beginDragPos.y=n.y,this.ins=this.buildSceneCtrl.getIns(this.type),!this.ins)return this.toast("对象类型错误"),void console.error("对象类型错误");this.ins.active=!0,this.ins.parent=this.world,this.buildSceneCtrl.setIndex(this.ins,this.type),this.ins.addComponent(f).type=this.type,this.onDrag(t),this.showOrHideToolFrame(!1)},s.onDrag=function(t){var n=t.getUILocation();this.screenPos.x=n.x+this.camCtrl.node.position.x,this.screenPos.y=n.y+this.camCtrl.node.position.y+0,this.ins.worldPosition=this.screenPos},s.showOrHideToolFrame=function(t){l("Canvas/DownFrame").getComponentsInChildren(g).forEach((function(n){n.enabled=t})),l("Canvas/DownFrame").getComponentsInChildren(C).forEach((function(n){n.enabled=t}))},s.onCancelDrag=function(t){this.showOrHideToolFrame(!0);var n=t.getUILocation();this.screenPos.x=n.x+this.camCtrl.node.position.x,this.screenPos.y=n.y+this.camCtrl.node.position.y+0,this.isInNearArea(t)?(this.ins.destroy(),console.log("screenPos",this.screenPos)):this.world.children.length>60?(this.ins.destroy(),this.toast("关卡物体数量超过限制")):(this.targetPos=this.getFormatPos(this.screenPos),this.ins.worldPosition=this.targetPos,this.anchorCtrl.reset(this.targetPos,this.ins.getComponent(f),!0))},s.isInNearArea=function(t){var n=t.getUILocation(),e=Math.abs(n.x-this.beginDragPos.x),o=Math.abs(n.y-this.beginDragPos.y);return e<80&&o<80},s.getFormatPos=function(t){var n=Math.floor(t.x)-Math.floor(t.x)%50,e=Math.floor(t.y)-Math.floor(t.y)%50;n<0&&(n-=50),e<0&&(e-=50),console.log(n+"  ---  "+e);var o=l("World/Node");return u(n+o.worldPosition.x%50+25,e+o.worldPosition.y%50-25,0)},n}(p)).prototype,"type",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.wall}}),w=I))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/EffectComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./ObstaclesComp.ts"],(function(t){var e,i,r,o,n,s,a,p,l,c,u,m,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.Node,p=t.Sprite,l=t.Label,c=t.v2,u=t.v4},function(t){m=t.default},function(t){f=t.ObstaclesComp}],execute:function(){var h,y,d,b,v,C,P,g;n._RF.push({},"52cefqNbA1OB5FIMZiMxm5Q","EffectComp",void 0);var x=s.ccclass,L=s.property,w=(s.requireComponent,s.executionOrder);t("EffectComp",(h=x("EffectComp"),y=w(2),d=L(a),b=L(Boolean),h(v=y((P=e((C=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,r(e,"player",P,o(e)),e.mt=null,e.index=0,r(e,"isLand",g,o(e)),e}i(e,t);var n=e.prototype;return n.onLoad=function(){this.node.getComponent(p)?this.mt=this.node.getComponent(p).materials[0]:this.node.getComponent(l)&&(this.mt=this.node.getComponent(l).materials[0]),this.isLand?this.mt.setProperty("permeter",.5):this.mt.setProperty("permeter",0),this.initObses()},n.update=function(){if(this.index++,this.mt&&this.player){this.mt.setProperty("playerPos",c(this.player.worldPosition.x,this.player.worldPosition.y));var t=this.player.up;this.mt.setProperty("playerDir",c(t.x,t.y));this.mt.setProperty("view",1)}},n.initObses=function(){for(var t=[],e=0;e<100;e++){var i=u(1e4,1e4,1e4,1e4);f.obs[e]&&(i.x=f.obs[e][0],i.y=f.obs[e][1],i.z=f.obs[e][2],i.w=f.obs[e][3]),t.push(i)}this.mt&&this.mt.setProperty("obsLines",t)},e}(m)).prototype,"player",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(C.prototype,"isLand",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=C))||v)||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/EndCheckEggCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts"],(function(t){var e,n,i,r,o,c,s,l,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,s=t.CCInteger,l=t.Component},function(t){a=t.RapierBaseCollider}],execute:function(){var u,g,p,h,C,d,f,v;o._RF.push({},"c7516aadKRP0bEzavXNKAsR","EndCheckEggCtrl",void 0);var E=c.ccclass,y=c.property,b=c.requireComponent,k=c.executionOrder;t("EndCheckEggCtrl",(u=E("EndCheckEggCtrl"),g=b(a),p=k(2),h=y(s),u(C=g(C=p(((v=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))||this).rc=void 0,i(e,"eggsCount",f,r(e)),e.isAllArrived=!1,e}n(e,t);var o=e.prototype;return o.onLoad=function(){e.ins=this,this.rc=this.getComponent(a),this.rc.onStepCallback=this.onStepCallback.bind(this)},o.onStepCallback=function(){this.getEggCount()==this.eggsCount?this.isAllArrived=!0:this.isAllArrived=!1},o.getEggCount=function(){var t=0;return this.rc.collisonSet.forEach((function(e){e.node.name.includes("Egg")&&t++})),t},o.onDestroy=function(){e.ins=null},e}(l)).ins=void 0,f=e((d=v).prototype,"eggsCount",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=d))||C)||C)||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/EventBus.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"de3caUHtdRDzbxlk5yibQEG","EventBus",void 0),t("default",function(){function t(){this.funsMap=new Map}t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance};var n=t.prototype;return n.removeAll=function(){this.funsMap.clear()},n.sub=function(t,n,e){var s=this.getId(),o={fun:t,type:n,comp:e,id:s};return this.funsMap.set(s,o),s},n.unSub=function(t){this.funsMap.delete(t)},n.board=function(t,n){this.funsMap.forEach((function(e,s){if(e){var o=e;o.comp&&o.type==t&&o.fun.bind(o.comp)(n,o.id)}}))},n.getId=function(){for(var t=[],n="0123456789abcdef",e=0;e<36;e++)t[e]=n.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=n.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},t}()).instance=void 0;t("EventMsg",function(){function t(){this.str=void 0,this.code=void 0,this.node=void 0,this.component=void 0,this.object=void 0,this.id=void 0,this.data=void 0}t.GetIns=function(){return new t};var n=t.prototype;return n.setStr=function(t){return this.str=t,this},n.setCode=function(t){return this.code=t,this},n.setNode=function(t){return this.node=t,this},n.setObject=function(t){return this.object=t,this},n.setId=function(t){return this.id=t,this},n.setData=function(t){return this.data=t,this},n.setComponent=function(t){return this.component=t,this},t}()),t("EventType",function(t){return t[t.socket=0]="socket",t[t.socket_error=1]="socket_error",t[t.secket_conenect=2]="secket_conenect",t[t.step=3]="step",t[t.collison=4]="collison",t[t.room_change=5]="room_change",t[t.stop_frame=6]="stop_frame",t[t.server_msg=7]="server_msg",t}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/FirstSceneCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./GameHelper.ts","./BaseComponent.ts"],(function(t){var n,e,o,i,s,a,c,r,l,g;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.sys,s=t.find,a=t.assetManager,c=t.director},function(t){r=t.default},function(t){l=t.default},function(t){g=t.default}],execute:function(){var u,f;e._RF.push({},"534040MFk9IPLQgAEcVQB8M","FirstSceneCtrl",void 0);var h=o.ccclass,d=(o.property,t("FirstSceneCtrl",h("FirstSceneCtrl")(((f=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){var t=this;e.ins=this;var n=l.getRoomIdFromCode("001234"),o=l.getRoomCodeFromId(n);console.log(n+"--"+o);var a=l.getRoomIdFromCode("776584"),c=l.getRoomCodeFromId(a);console.log(a+"--"+c);var g=l.getRoomIdFromCode("342654"),u=l.getRoomCodeFromId(g);if(console.log(g+"--"+u),r.getInstance().removeAll(),i.platform!=i.Platform.WECHAT_GAME&&i.platform!=i.Platform.BYTEDANCE_MINI_GAME&&i.platform!=i.Platform.MOBILE_BROWSER&&(s("Canvas/Bts").active=!0),i.platform==i.Platform.WECHAT_GAME){console.log("--------执行微信小程序登陆逻辑--------");var f=globalThis.wx,h=f.getAccountInfoSync(),d=h.miniProgram.version;console.log("--------当前版本号--------"+d,h),f.getSystemInfo({success:function(t){console.log("打印手机型号",t),e.getWechatDeviceData(t)}});var m=f.getUpdateManager();if(m.onCheckForUpdate((function(t){console.log(t.hasUpdate?"当前有可更新的版本":"当前没有可更新的版本")})),m.onUpdateReady((function(){f.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",showCancel:!1,success:function(t){t.confirm&&m.applyUpdate()}})})),m.onUpdateFailed((function(){console.log("新版本下载失败")})),this.getString("wechat_userinfo")&&this.getString("wechat_userinfo").length>6){var p=JSON.parse(this.getString("wechat_userinfo"));e.getMiniGameUserData(p)}else f.getUserProfile({desc:"用于完善资料",success:function(n){console.log("获取权限成功：",n);var o=JSON.stringify(n);console.log("wechat_userinfo",o),t.setString("wechat_userinfo",o),e.getMiniGameUserData(n)},fail:function(t){console.log("获取权限失败：",t)}})}else if(i.platform==i.Platform.BYTEDANCE_MINI_GAME){var v=globalThis.tt;v.login({force:!0,success:function(t){console.log("login 调用成功"+t.code+" "+t.anonymousCode),v.getUserInfo({withCredentials:!0,success:function(t){console.log("getUserInfo 调用成功",t);var n=t.rawData.nickName,o=t.rawData.avatarUrl;console.log("nickName",n),console.log("avatarUrl",o),e.getMiniGameUserData(t)},fail:function(t){console.log("getUserInfo 调用失败")}})},fail:function(t){console.log("login 调用失败")}})}else i.platform==i.Platform.MOBILE_BROWSER&&this.makeDefaultUserData()},o.makeDefaultUserData=function(){if(!this.getString("default_account")||this.getString("default_account").length<6){var t=l.getIdStr();this.setString("default_account",t)}var n=this.getString("default_account");e.ins.getInfoByAccountAndGotoLoginScene(n,"1",n,0)},e.getMiniGameUserData=function(t){var n=JSON.parse(t.rawData),o=n.avatarUrl,i=n.avatarUrl.slice(o.length-13,o.length-1),s=n.avatarUrl,a=n.nickName,c=n.gender;console.log("id "+i),console.log("nickName "+a),console.log("avatarUrl "+s),console.log("gender "+c),e.ins.getInfoByAccountAndGotoLoginScene(i,s,a,c)},e.getWechatDeviceData=function(t){console.log("platform "+t.platform),console.log("brand "+t.brand)},o.onClick=function(t,n){"000001"==n?this.getInfoByAccountAndGotoLoginScene(n,"1","玩家1",0):"000002"==n?this.getInfoByAccountAndGotoLoginScene(n,"2","玩家2",0):"000003"==n?this.getInfoByAccountAndGotoLoginScene(n,"3","玩家3",1):"000004"==n?this.getInfoByAccountAndGotoLoginScene(n,"4","玩家4",0):"000005"==n?this.getInfoByAccountAndGotoLoginScene(n,"5","玩家5",1):"000006"==n&&this.getInfoByAccountAndGotoLoginScene(n,"6","玩家6",1)},o.getInfoByAccountAndGotoLoginScene=function(t,n,o,i){var s=new d;s.account=t,s.headUrl=n,s.nickName=o,s.gender=i,s.clientVersion=e.gameVersion,s.loadInfo(this),9527==this.getInt(t,9527)&&(console.log(t+"第一次进入游戏,送100钻石"),this.setInt(t,100)),e.playerInfo=s,a.loadBundle("scenes",(function(t,n){n.loadScene("LoginScene",(function(t,n){c.runScene(n)}))}))},e}(g)).gameVersion=2,f.playerInfo=void 0,f.ins=void 0,u=f))||u),t("MyPlayerInfo",function(){function t(){this.nickName=void 0,this.playerId=void 0,this.account=void 0,this.headUrl=void 0,this.ranking=0,this.gender=0,this.cap1=0,this.glass1=0,this.cap2=0,this.glass2=0,this.clientVersion=void 0}t.getIns=function(){return new t};var n=t.prototype;return n.setName=function(t){return this.nickName=t,this},n.setHeadUrl=function(t){return this.headUrl=t,this},n.setPlayerId=function(t){return this.playerId=t,this},n.setRanking=function(t){return this.ranking=t,this},n.setAccount=function(t){return this.account=t,this},n.setClientVersion=function(t){return this.clientVersion=t,this},n.setGender=function(t){return this.gender=t,this},n.setCap1=function(t){return this.cap1=t,this},n.setGlass1=function(t){return this.glass1=t,this},n.setCap2=function(t){return this.cap2=t,this},n.setGlass2=function(t){return this.glass2=t,this},n.getDiamondNumber=function(t){return t.getInt(this.account,0)},n.setDiamondNumber=function(t,n){n.setInt(this.account,t)},n.saveInfo=function(t){var n=JSON.stringify(this);t.setString(this.account+"_info",n)},n.loadInfo=function(t){var n=t.getString(this.account+"_info");if(n&&n.length>10){var e=JSON.parse(n);this.setCap1(e.cap1),this.setGlass1(e.glass1),this.setCap2(e.cap2),this.setGlass2(e.glass2)}},t}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/FreezeCubeCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./SpiderCtrl.ts","./ProcessCtrl.ts"],(function(t){var i,n,e,o,r,s,l,a,c;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,o=t.Sprite,r=t.v2,s=t.v3,l=t.Component},function(t){a=t.RapierBaseCollider},function(t){c=t.SpiderCtrl},null],execute:function(){var h;n._RF.push({},"8bbc5CpRi5IOZyZ/akCw/qL","FreezeCubeCtrl",void 0);var u=e.ccclass,d=(e.property,e.requireComponent),C=e.executionOrder;t("FreezeCubeCtrl",u("FreezeCubeCtrl")(h=d(a)(h=C(2)(h=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).rc=void 0,i.sp=void 0,i.limitTimeCount=0,i.isEnterPlayer=!1,i.bornPos=void 0,i.fallTimeCount=0,i}i(n,t);var e=n.prototype;return e.onLoad=function(){this.node.getComponent(a).isDynamicAdd||this.load()},e.load=function(){this.sp=this.node.getComponent(o),this.rc=this.getComponent(a),this.rc.rigidBody.lockTranslations(!0,!0),this.rc.rigidBody.lockRotations(!0,!0);var t=this.rc.rigidBody.translation();this.bornPos=r(t.x,t.y),this.rc.onStepCallback=this.onStepCallback.bind(this),this.rc.onEnterCallback=this.onEnter.bind(this),this.rc.onQuitCallback=this.onQuit.bind(this)},e.onStepCallback=function(){this.isEnterPlayer&&this.limitTimeCount>0&&(this.limitTimeCount--,this.limitTimeCount<=0&&(this.rc.rigidBody.lockTranslations(!1,!0),this.fallTimeCount=80)),this.onStep()},e.onEnter=function(t,i){i.node.getComponent(c)&&0==this.isEnterPlayer&&(this.limitTimeCount=50,this.sp.enabled=!1,this.isEnterPlayer=!0)},e.onQuit=function(t,i){i.node.getComponent(c)},e.onStep=function(){this.fallTimeCount--,0==this.fallTimeCount&&(this.rc.rigidBody.setTranslation({x:this.bornPos.x,y:this.bornPos.y},!0),this.rc.setSpeed(s(0,0,0)),this.isEnterPlayer=!1,this.limitTimeCount=0,this.sp.enabled=!0,this.rc.rigidBody.lockTranslations(!0,!0))},n}(l))||h)||h)||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./Joystick.ts","./NetIns.ts","./RapierWorld.ts","./GameHelper.ts","./BaseComponent.ts","./EventBus.ts","./CameraCtrl.ts","./SpiderCtrl.ts","./ProcessCtrl.ts","./FirstSceneCtrl.ts","./SettingPannelCtrl.ts","./RopeCtrl.ts"],(function(e){var t,n,o,a,s,i,r,m,p,h,d,g,l,c,C,v,u,f,y,I,F,B,M,w,D,L,S,N,R,T,P,A,G,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){s=e.cclegacy,i=e._decorator,r=e.Prefab,m=e.find,p=e.Label,h=e.Sprite,d=e.Node,g=e.KeyCode,l=e.input,c=e.Input,C=e.game,v=e.director,u=e.Color,f=e.v2,y=e.instantiate,I=e.v3},function(e){F=e.RapierBaseCollider},function(e){B=e.Joystick},function(e){M=e.NetIns},function(e){w=e.RapierWorld},function(e){D=e.default},function(e){L=e.default},function(e){S=e.default,N=e.EventType},function(e){R=e.default},function(e){T=e.SpiderCtrl},function(e){P=e.ProcessCtrl},function(e){A=e.FirstSceneCtrl},function(e){G=e.SettingPannelCtrl},function(e){x=e.RopeCtrl}],execute:function(){var b,k,E,_,H,J,U,Y;s._RF.push({},"e5b1ancmTxJeqyyFADZF+gl","GameCtrl",void 0);var j=i.ccclass,K=i.property,O=e("GameMode",function(e){return e[e.net=0]="net",e[e.single=1]="single",e}({}));e("CoopMode",function(e){return e[e.none=0]="none",e[e.match=1]="match",e}({})),e("GameCtrl",(b=j("GameCtrl"),k=K(B),E=K(r),b(((Y=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))||this).index=0,t.spider1=void 0,t.spider2=void 0,o(t,"joyNode",J,a(t)),t.catchFrameMaskNode=void 0,t.timeLimitLabel=void 0,t.timeLimit=300,t.isStopedFrame=!1,t.cameraCtrl=void 0,t.processCtrl=void 0,t.playerId=void 0,t.maxRopeLength=0,t.isLimitSight=!0,t.frameIndex=1,t.roomPlayers=void 0,t.timeCount=0,t.timeIndex=0,t.emptyFrameCount=0,t.emptyFrameLogCount=0,t.maxSecond=300,t.isDoNetFrame=!1,t.isTogetherMoveAndJump=!1,t.msgItem=void 0,t.singleFrameIndex=1,t.lateUpdateIndex=0,o(t,"cellPrefab",U,a(t)),t.frameMd5Map=new Map,t}n(t,e);var s=t.prototype;return s.start=function(){S.getInstance().sub(this.onStopFrame,N.stop_frame,this),this.initPlayerMoveEvent(),this.setButtonEvent(m("Canvas/TopFrame/Head"),(function(){}))},s.onStopFrame=function(){this.timeLimit<2&&this.toast("时间限制到了"),this.invoke((function(){D.exchangeScene("FirstScene")}),2)},s.setting=function(){this.node.getComponent(G).show()},s.renderPlayerInfo=function(){m("Canvas/TopFrame/NickName").getComponent(p).string=A.playerInfo.nickName,m("Canvas/TopFrame/CoinsCount").getComponent(p).string=A.playerInfo.getDiamondNumber(this)+"",D.getHeadByUrl(A.playerInfo.headUrl,m("Canvas/TopFrame/Head").getComponent(h))},s.initPlayerMoveEvent=function(){var e=this;m("Canvas/DownFrame/ButtonGoLeft").on(d.EventType.TOUCH_START,(function(){e.moveLeft()}),this),m("Canvas/DownFrame/ButtonGoRight").on(d.EventType.TOUCH_START,(function(){e.moveRight()}),this),m("Canvas/DownFrame/ButtonJump").on(d.EventType.TOUCH_START,(function(){e.jump()}),this),m("Canvas/DownFrame/ButtonGoLeft").on(d.EventType.TOUCH_END,(function(){e.stopMoveLeft()}),this),m("Canvas/DownFrame/ButtonGoRight").on(d.EventType.TOUCH_END,(function(){e.stopMoveRight()}),this),m("Canvas/DownFrame/ButtonGoLeft").on(d.EventType.TOUCH_CANCEL,(function(){e.stopMoveLeft()}),this),m("Canvas/DownFrame/ButtonGoRight").on(d.EventType.TOUCH_CANCEL,(function(){e.stopMoveRight()}),this)},s.onKeyDown=function(e){switch(e.keyCode){case g.KEY_A:this.moveLeft();break;case g.KEY_D:this.moveRight();break;case g.SPACE:this.jump();break;case g.TAB:this.qh();break;case g.SHIFT_LEFT:case g.SHIFT_RIGHT:this.isTogetherMoveAndJump?this.yb():this.tb()}},s.onKeyUp=function(e){switch(e.keyCode){case g.KEY_A:this.stopMoveLeft();break;case g.KEY_D:this.stopMoveRight()}},s.onLoad=function(){if(this.maxRopeLength=m("Bg").getComponent("SceneLoader").sceneRopeLength,l.on(c.EventType.KEY_DOWN,this.onKeyDown,this),l.on(c.EventType.KEY_UP,this.onKeyUp,this),C.frameRate=60,this.playerId=M.getIns().client.playerId,this.catchFrameMaskNode=m("Canvas/LodingBg"),this.catchFrameMaskNode.active=!0,this.timeLimitLabel=m("Canvas/TimeLimit").getComponent(p),this.renderPlayerInfo(),this.cameraCtrl=m("Canvas/Camera").getComponent(R),this.processCtrl=this.getComponent(P),this.spider1=m("ZhiZhu1").getComponent(F),this.spider2=m("ZhiZhu2").getComponent(F),t.gameMode==O.net){var e=M.getIns().getRoomMap(),n=M.getIns().getRoomName();if(e&&n){var o=n.split("_")[1];m("Canvas/ChapterIndex").getComponent(p).string="自制关卡-"+o}else{var a=v.getScene().name.split("_")[1];m("Canvas/ChapterIndex").getComponent(p).string="第 "+a+" 关"}}else{var s=v.getScene().name.split("_")[1];"Scene_Test"==v.getScene().name?!D.isForTest&&D.sceneNameStr?m("Canvas/ChapterIndex").getComponent(p).string="自制关卡-"+D.sceneNameStr:m("Canvas/ChapterIndex").getComponent(p).string="测试关卡":m("Canvas/ChapterIndex").getComponent(p).string="第 "+s+" 关"}if(t.gameMode==O.single){this.spider1.getComponent(T).id=this.playerId;var i=A.playerInfo;this.spider1.getComponent(T).playerInfo=i,this.spider2.getComponent(T).id=this.playerId,this.spider2.getComponent(T).playerInfo=i}else{if(!(M.getIns().room&&M.getIns().room.players&&M.getIns().room.players[0]&&M.getIns().room.players[1]))return M.getIns().leaveRoom(),this.invoke((function(){D.exchangeScene("FirstScene")}),2),void this.toast("房间内数据错误");this.roomPlayers=M.getIns().room.players,this.roomPlayers.sort((function(e,t){return parseInt(e.playerId.slice(6,e.playerId.length-1))-parseInt(t.playerId.slice(6,t.playerId.length-1))})),this.spider1.getComponent(T).id=this.roomPlayers[0].playerId;var r=JSON.parse(this.roomPlayers[0].customPlayerProperties);this.spider1.getComponent(T).playerInfo=r,this.spider2.getComponent(T).id=this.roomPlayers[1].playerId;var h=JSON.parse(this.roomPlayers[1].customPlayerProperties);this.spider2.getComponent(T).playerInfo=h}this.spider1.getComponent(T).gc=this,this.spider2.getComponent(T).gc=this,this.spider1.getComponent(x).gc=this,this.spider2.getComponent(x).gc=this,this.spider1.getComponent(T).otherPlayer=this.spider2.getComponent(T),this.spider2.getComponent(T).otherPlayer=this.spider1.getComponent(T),t.gameMode==O.net?this.cameraCtrl.init(this.getClientCtrlById(this.playerId).node):this.cameraCtrl.init(this.spider1.node),this.spider1.getComponent(x).init(),this.spider2.getComponent(x).init(),t.gameMode==O.single?this.spider1.getComponent(T).renderArrow(!0):this.getClientCtrlById(this.playerId).renderArrow(!0),w.getIns().back(),this.renderBts(),this.renderAllPlayerCapAndGlass()},s.renderAllPlayerCapAndGlass=function(){if(t.gameMode==O.net){if(M.getIns().room&&M.getIns().room.players[0]){var e=M.getIns().room.players[0],n=JSON.parse(e.customPlayerProperties);this.renderCapAndGlassForNet(n,this.spider1)}if(M.getIns().room&&M.getIns().room.players[1]){var o=M.getIns().room.players[1],a=JSON.parse(o.customPlayerProperties);this.renderCapAndGlassForNet(a,this.spider2)}}else this.renderCapAndGlass(A.playerInfo,this.spider1,!0),this.renderCapAndGlass(A.playerInfo,this.spider2,!1)},s.renderCapAndGlassForNet=function(e,t){if(e.cap1>0){var n=t.node.getChildByName("Spirte").getChildByName("Cap").getComponent(h),o=t.node.getChildByName("Spirte").getChildByName("CapDead").getComponent(h);n.node.active=!0,D.getImageByPath("caps/cap"+e.cap1,n),D.getImageByPath("caps/cap"+e.cap1,o),t.getComponent(T).hasCap=!0}if(e.glass1>0){var a=t.node.getChildByName("Spirte").getChildByName("Glass").getComponent(h),s=t.node.getChildByName("Spirte").getChildByName("GlassDead").getComponent(h);a.node.active=!0,D.getImageByPath("glasses/glass"+e.glass1,a),D.getImageByPath("glasses/glass"+e.glass1,s),t.getComponent(T).hasGlass=!0}},s.renderCapAndGlass=function(e,t,n){if(n){if(e.cap1>0){var o=t.node.getChildByName("Spirte").getChildByName("Cap").getComponent(h),a=t.node.getChildByName("Spirte").getChildByName("CapDead").getComponent(h);o.node.active=!0,D.getImageByPath("caps/cap"+e.cap1,o),D.getImageByPath("caps/cap"+e.cap1,a),t.getComponent(T).hasCap=!0}if(e.glass1>0){var s=t.node.getChildByName("Spirte").getChildByName("Glass").getComponent(h),i=t.node.getChildByName("Spirte").getChildByName("GlassDead").getComponent(h);s.node.active=!0,D.getImageByPath("glasses/glass"+e.glass1,s),D.getImageByPath("glasses/glass"+e.glass1,i),t.getComponent(T).hasGlass=!0}}else{if(e.cap2>0){var r=t.node.getChildByName("Spirte").getChildByName("Cap").getComponent(h),m=t.node.getChildByName("Spirte").getChildByName("CapDead").getComponent(h);r.node.active=!0,D.getImageByPath("caps/cap"+e.cap2,r),D.getImageByPath("caps/cap"+e.cap2,m),t.getComponent(T).hasCap=!0}if(e.glass2>0){var p=t.node.getChildByName("Spirte").getChildByName("Glass").getComponent(h),d=t.node.getChildByName("Spirte").getChildByName("GlassDead").getComponent(h);p.node.active=!0,D.getImageByPath("glasses/glass"+e.glass2,p),D.getImageByPath("glasses/glass"+e.glass2,d),t.getComponent(T).hasGlass=!0}}},s.onTouchEnd=function(){this.sendFrame(this.playerId+" d 0 0")},s.getClientCtrlById=function(e){return this.spider1.getComponent(T).id==e?this.spider1.getComponent(T):this.spider2.getComponent(T)},s.update=function(e){this.timeCount+=e,this.timeIndex++,this.timeCount>1&&(this.timeCount=0,this.timeIndex=0);try{if(this.onReceiveFrameMsg(),this.index++,this.index%2==0)return}catch(e){console.error("-----------update_error---------",e),M.getIns().leaveRoom(),D.exchangeScene("FirstScene")}},s.setMaxSecond=function(e){this.maxSecond=e},s.onReceiveFrameMsg=function(){if(!this.isStopedFrame){if(t.gameMode==O.net){if(this.frameIndex%20==0&&(this.timeLimit=this.maxSecond-this.frameIndex/20,this.timeLimitLabel.string="倒计时:"+this.timeLimit+"秒",this.timeLimit<100&&(this.timeLimitLabel.color=u.RED)),this.timeLimit<=0)return this.isStopedFrame=!0,void M.getIns().stopSyncFrame()}else if(this.frameIndex%30==0&&(this.timeLimit=this.maxSecond-this.frameIndex/30,this.timeLimitLabel.string="倒计时:"+this.timeLimit+"秒",this.timeLimit<100&&(this.timeLimitLabel.color=u.RED),this.timeLimit<101&&this.timeLimit>99&&this.toast("还剩最后100秒,时间不多了哦")),this.timeLimit<=0)return this.isStopedFrame=!0,void this.processCtrl.showResult(!1);if(this.isDoNetFrame)w.getIns().onStep(),t.gameMode==O.net&&w.getIns().onStep(),this.cameraCtrl.physicsUpdate(),this.processCtrl.onStep(),this.isDoNetFrame=!1;else{var e=t.msgs.get(this.frameIndex);if(!e)return this.emptyFrameCount++,void(this.emptyFrameCount>40&&(console.log("----------缺帧----------"+this.frameIndex,t.msgs),this.emptyFrameLogCount++,M.getIns().resetRoomFrameId(this.frameIndex-1),this.emptyFrameCount=0,this.emptyFrameLogCount>5?(this.isStopedFrame=!0,D.exchangeScene("FirstScene")):this.emptyFrameLogCount>3&&(this.catchFrameMaskNode.active=!0)));this.emptyFrameCount=0,this.emptyFrameLogCount=0,w.getIns().onStep(),this.doRecvFrameMessage(e),this.cameraCtrl.physicsUpdate(),this.processCtrl.onStep(),this.isDoNetFrame=!0,this.frameIndex++}M.getIns().receivedFrameIndex-this.frameIndex>40?(t.isCatchingFrame=!0,this.catchFrameMaskNode.active||(this.catchFrameMaskNode.active=!0),this.invoke(this.onReceiveFrameMsg.bind(this),0)):(t.isCatchingFrame=!1,this.catchFrameMaskNode.active&&(this.catchFrameMaskNode.active=!1))}},s.doRecvFrameMessage=function(e){var n=this;e&&e.frameInfo&&e.frameInfo.forEach((function(e){e&&e.data&&e.data.length>0&&e.data.forEach((function(e){var o=e.split(" "),a=null;a=n.getClientCtrlById(o[0]),o[1]&&"d"==o[1]||(o[1]&&"ml"==o[1]?t.gameMode==O.single&&n.isTogetherMoveAndJump?(n.spider1.getComponent(T).moveLeft(),n.spider2.getComponent(T).moveLeft()):a.moveLeft():o[1]&&"sml"==o[1]?t.gameMode==O.single&&n.isTogetherMoveAndJump?(n.spider1.getComponent(T).stopMoveLeft(),n.spider2.getComponent(T).stopMoveLeft()):a.stopMoveLeft():o[1]&&"mr"==o[1]?t.gameMode==O.single&&n.isTogetherMoveAndJump?(n.spider1.getComponent(T).moveRight(),n.spider2.getComponent(T).moveRight()):a.moveRight():o[1]&&"smr"==o[1]?t.gameMode==O.single&&n.isTogetherMoveAndJump?(n.spider1.getComponent(T).stopMoveRight(),n.spider2.getComponent(T).stopMoveRight()):a.stopMoveRight():o[1]&&"j"==o[1]?t.gameMode==O.single&&n.isTogetherMoveAndJump?(n.spider1.getComponent(T).jump(),n.spider2.getComponent(T).jump()):a.jump():o[1]&&"sd"==o[1]?a.shorten():o[1]&&"yc"==o[1]?a.extend():o[1]&&"dk"==o[1]?(a.deleteRope(),n.renderBts()):o[1]&&"gw"==o[1]?(a.isFixedTransfrom&&(w.getIns().back(),n.setCameraRotation()),a.changeTransform(),n.renderBts()):o[1]&&"fs"==o[1]?a.shoot():o[1]&&"cell"==o[1]?n.boardCellMsg(e):o[1]&&"rope"==o[1]&&(a.makeRope(o),n.renderBts()))}))}))},s.setCameraRotation=function(){var e=w.getIns().gravity.signAngle(f(0,-1));this.cameraCtrl.node.angle=-e*(180/Math.PI)},s.moveRight=function(){this.sendFrame(this.playerId+" mr")},s.stopMoveRight=function(){this.sendFrame(this.playerId+" smr")},s.moveLeft=function(){this.sendFrame(this.playerId+" ml")},s.stopMoveLeft=function(){this.sendFrame(this.playerId+" sml")},s.jump=function(){this.sendFrame(this.playerId+" j")},s.sd=function(){var e=this.getNowPlayer();e&&e.ropeCtrl.getRopeLength()<4?this.toast("绳子无法再缩短了"):(this.sendFrame(this.playerId+" sd"),console.log("-----------sendFrame----sd-----"))},s.yc=function(){var e=this.getNowPlayer();e&&e.ropeCtrl.getRopeLength()>this.maxRopeLength-1?this.toast("绳子已经全部放出,无法再延长了"):(this.sendFrame(this.playerId+" yc"),console.log("-----------sendFrame----yc------"))},s.dk=function(){var e=this.getClientCtrlById(this.playerId);e&&0==e.ropeCtrl.joints.length?e.ropeCtrl.sendMakeRopeMsg():(console.log("-----dk----------error------------"),this.sendFrame(this.playerId+" dk")),console.log("-----------dk----------")},s.qh=function(){if(t.gameMode!=O.net){this.stopAction(),console.log("-----------qh----------");var e=this.spider1;this.spider1=this.spider2,this.spider2=e,this.cameraCtrl.init(this.spider1.node),this.spider1.getComponent(T).renderArrow(!0),this.spider2.getComponent(T).renderArrow(!1),this.renderBts()}else this.toast("网络对战无法切换")},s.stopAction=function(){this.spider1.getComponent(T).stopMoveLeft(),this.spider1.getComponent(T).stopMoveRight(),this.spider2.getComponent(T).stopMoveLeft(),this.spider2.getComponent(T).stopMoveRight()},s.fs=function(){console.log("-----------fs----------"),this.sendFrame(this.playerId+" fs")},s.gw=function(){console.log("-----------gw----------"),this.sendFrame(this.playerId+" gw")},s.tb=function(){t.gameMode!=O.net?(this.stopAction(),console.log("-----------tb----------"),this.isTogetherMoveAndJump=!0,this.renderTBYB(),this.spider1.getComponent(T).renderArrow(!0),this.spider2.getComponent(T).renderArrow(!0)):this.toast("网络对战无法同步")},s.yb=function(){t.gameMode!=O.net?(this.stopAction(),console.log("-----------yb----------"),this.isTogetherMoveAndJump=!1,this.renderTBYB(),this.spider1.getComponent(T).renderArrow(!0),this.spider2.getComponent(T).renderArrow(!1)):this.toast("网络对战无法异步")},s.toast=function(n){t.isCatchingFrame?console.log("isCatchingFrameOnToast:"+n):e.prototype.toast.call(this,n)},s.playerToast=function(e,n){t.gameMode==O.net?n==this.getNowPlayer()&&this.toast(e):this.toast(e)},s.sendFrame=function(e){t.gameMode==O.net?M.getIns().sendFrame(e):this.msgItem?this.addMsgToMsgItem(e):this.msgItem=this.makeMsgItem(e)},s.lateUpdate=function(){t.gameMode!=O.net&&(this.lateUpdateIndex++,this.lateUpdateIndex%2==0&&(this.msgItem||(this.msgItem=this.makeMsgItem("")),t.msgs.set(this.singleFrameIndex,this.msgItem),this.msgItem=null,this.singleFrameIndex++))},s.makeMsgItem=function(e){var t={data:[e],timestamp:0,playerId:""};return{isReplay:!1,time:0,currentRoomFrameId:this.singleFrameIndex,ext:{seed:0},frameInfo:[t]}},s.addMsgToMsgItem=function(e){var t={data:[e],timestamp:0,playerId:""};this.msgItem.frameInfo.push(t)},s.playAudioEffect=function(e,n){void 0===n&&(n=1),t.isCatchingFrame||D.playMusic(this.node,e,!1,n)},s.sendRopeMsg=function(e,t,n){this.sendFrame(this.playerId+" rope "+e+" "+t.toFixed(2)+" "+n.toFixed(2))},s.addCell=function(){var e=y(this.cellPrefab);if(m("Canvas")&&m("Canvas").parent){e.worldPosition=I(555,1585,0),m("Canvas").parent.addChild(e);var t=e.getComponent("CellCtrl");t.load(),t.setScaleAndId(t.node)}else console.log("---------loadCellError----------")},s.sendCellMsg=function(e){this.sendFrame(this.playerId+" cell "+e)},s.boardCellMsg=function(e){var n=e.split(" ");if(n[2]){var o=parseInt(n[2]);if(t.cells.has(o)){var a=t.cells.get(o);a?a.large():console.log("---------cell_not_found---------")}}},s.getNowPlayer=function(){return t.gameMode==O.single?this.spider1.getComponent(T):this.getClientCtrlById(this.playerId)},s.renderBts=function(){var e=this.getNowPlayer();m("Canvas/Tags").children.forEach((function(e){e.active=!1})),e.tagPathes.forEach((function(e){m(e)&&(m(e).active=!0)})),this.hideAll(),e.isShooted||(m("Canvas/DownFrame/ButtonGoLeft").active=!0,m("Canvas/DownFrame/ButtonGoRight").active=!0,m("Canvas/DownFrame/ButtonJump").active=!0,e.hasGun&&(m("Canvas/DownFrame/ButtonFS").active=!0),e.hasGrivity?(m("Canvas/DownFrame/ButtonGW").active=!0,m("Canvas/DownFrame/ButtonGoLeft/Node").active=!1,m("Canvas/DownFrame/ButtonGoLeft/Arrow").active=!1,m("Canvas/DownFrame/ButtonGoRight/Node").active=!1,m("Canvas/DownFrame/ButtonGoRight/Arrow").active=!1,e.isFixedTransfrom?(m("Canvas/DownFrame/ButtonGW/Label").getComponent(p).string="归位",m("Canvas/DownFrame/ButtonGoLeft/Arrow").active=!0,m("Canvas/DownFrame/ButtonGoRight/Arrow").active=!0):(m("Canvas/DownFrame/ButtonGW/Label").getComponent(p).string="锁定",m("Canvas/DownFrame/ButtonGoLeft/Node").active=!0,m("Canvas/DownFrame/ButtonGoRight/Node").active=!0)):(m("Canvas/DownFrame/ButtonGoLeft/Node").active=!0,m("Canvas/DownFrame/ButtonGoLeft/Arrow").active=!1,m("Canvas/DownFrame/ButtonGoRight/Node").active=!0,m("Canvas/DownFrame/ButtonGoRight/Arrow").active=!1),e.hasRope&&(e.getComponent(x).joints.length<=0?(m("Canvas/DownFrame/ButtonSD").active=!1,m("Canvas/DownFrame/ButtonYC").active=!1,m("Canvas/DownFrame/RopeInfo").active=!1):(m("Canvas/DownFrame/ButtonSD").active=!0,m("Canvas/DownFrame/ButtonYC").active=!0,m("Canvas/DownFrame/RopeInfo").active=!0),m("Canvas/DownFrame/ButtonDK").active=!0,e.ropeCtrl.renderRopeInfo())),t.gameMode==O.single&&this.renderTBYB()},s.renderTBYB=function(){var e=this.getNowPlayer();m("Canvas/DownFrame/ButtonTB").active=!1,m("Canvas/DownFrame/ButtonYB").active=!1,m("Canvas/DownFrame/ButtonQH").active=!1,e.isShooted?m("Canvas/DownFrame/ButtonQH").active=!0:e.otherPlayer&&!e.otherPlayer.isShooted&&(this.isTogetherMoveAndJump?(m("Canvas/DownFrame/ButtonYB").active=!0,m("Canvas/DownFrame/ButtonQH").active=!1):(m("Canvas/DownFrame/ButtonTB").active=!0,m("Canvas/DownFrame/ButtonQH").active=!0))},s.hideAll=function(){m("Canvas/DownFrame/ButtonSD").active=!1,m("Canvas/DownFrame/ButtonYC").active=!1,m("Canvas/DownFrame/RopeInfo").active=!1,m("Canvas/DownFrame/ButtonGW").active=!1,m("Canvas/DownFrame/ButtonDK").active=!1,m("Canvas/DownFrame/ButtonFS").active=!1,m("Canvas/DownFrame/ButtonQH").active=!1,m("Canvas/DownFrame/ButtonGoLeft").active=!1,m("Canvas/DownFrame/ButtonGoRight").active=!1,m("Canvas/DownFrame/ButtonJump").active=!1,m("Canvas/DownFrame/ButtonTB").active=!1,m("Canvas/DownFrame/ButtonYB").active=!1},s.onRecvFromClient=function(e){var t=e.split("%%%%");if(console.log(t),t[0]&&t[1]&&t[1].length>8){var n=t[0],o=this.frameMd5Map.get(n);o?o!=t[1]&&(this.toast("网络同步异常"),console.log("网络同步异常 "+e+" 平台: "+D.getPlatformStr())):this.frameMd5Map.set(n,t[1])}},t}(L)).msgs=void 0,Y.gameMode=void 0,Y.isCatchingFrame=!1,Y.cells=new Map,J=t((H=Y).prototype,"joyNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(H.prototype,"cellPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=H))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameHelper.ts",["cc","./EventBus.ts","./SettingPannelCtrl.ts","./ChapterSelectPannelCtrl.ts","./BaseComponent.ts"],(function(e){var t,n,o,a,r,s,i,l,c,u,p,d,g,f,h,m,v;return{setters:[function(e){t=e.cclegacy,n=e._decorator,o=e.resources,a=e.AudioClip,r=e.log,s=e.AudioSource,i=e.assetManager,l=e.Texture2D,c=e.SpriteFrame,u=e.UITransform,p=e.find,d=e.director,g=e.sys},function(e){f=e.default},function(e){h=e.SettingPannelCtrl},function(e){m=e.ChapterSelectPannelCtrl},function(e){v=e.default}],execute:function(){var M,y;t._RF.push({},"56e48/XoItAhoB+bKrpbMp4","GameHelper",void 0);var C=n.ccclass;n.property,e("default",C(((y=function(){function e(){}return e.playMusic=function(e,t,n,s){var i=this;void 0===s&&(s=1),this.audioMap.get(t)?this.playMusicCallback(this.audioMap.get(t),e,n,s):o.load("audios/"+t,a,(function(o,a){o?r("------加载音频失败-----",o):(i.audioMap.set(t,a),i.playMusicCallback(a,e,n,s))}))},e.playMusicCallback=function(e,t,n,o){if(void 0===o&&(o=1),t&&t.isValid){null==t.getComponent(s)&&t.addComponent(s);var a=t.getComponent(s);a.clip=e,a.loop=n;var r=h.effectValue*o;a.volume=r,a.play()}},e.getHeadByUrl=function(e,t){var n=this;if(this.headImageCacaheMap.get(e))t&&t.node?t.spriteFrame=this.headImageCacaheMap.get(e):console.log("------加载图片失败,节点已经销毁-----");else if(e.length>5)console.log("---------------getHeadByUrl---loadRemote------------"),i.loadRemote(e,{ext:".png"},(function(o,a){if(o)console.log("------加载图片失败-----",o);else{var r=new l;r.image=a;var s=new c;s.texture=r,console.log("------获取图片数据成功-----",s),n.headImageCacaheMap.set(e,s),t&&t.node?t.spriteFrame=s:console.log("------加载图片失败,节点已经销毁-----")}}));else{var a="heads/"+e+"/spriteFrame";o.load(a,c,(function(o,a){o?console.log("------加载图片失败-----",o):(n.headImageCacaheMap.set(e,a),t&&t.node?t.spriteFrame=a:console.log("------加载图片失败,节点已经销毁-----"))}))}},e.getImageByPath=function(e,t){var n=t.node.getComponent(u).width,a=t.node.getComponent(u).height,r=e+"/spriteFrame";o.load(r,c,(function(e,o){e?console.log("------加载图片失败-----",e):t&&t.node?(t.spriteFrame=o,t.node.getComponent(u).width=n,t.node.getComponent(u).height=a):console.log("------加载图片失败,节点已经销毁-----")}))},e.getNameByAccount=function(e,t){void 0===t&&(t=3);return e?e.length<=2*t?e:e.slice(0,t)+"*"+e.slice(e.length-t,e.length):""},e.getRandom=function(e,t){var n=t-e+1;return Math.floor(Math.random()*n+e)},e.initHeads=function(){var e=this;this.heads=new Map;for(var t=function(t){o.load("sprites/heads/"+t,c,(function(n,o){e.heads.set(t+"",o)}))},n=1;n<21;n++)t(n)},e.getHeadByIndex=function(e){return this.heads.get(e)},e.getId=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},e.getIdStr=function(e){void 0===e&&(e=8);for(var t=[],n=0;n<e;n++)t[n]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t.join("")},e.exchangeScene=function(e){p("Canvas/LobbyMask")&&(v.zIndex++,p("Canvas/LobbyMask").setSiblingIndex(v.zIndex),p("Canvas/LobbyMask").active=!0),f.getInstance().removeAll(),d.loadScene(e)},e.spliceItemFormArray=function(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return void t.splice(n,1);r("---------有BUG-要删除的元素不存在---------")},e.httpGeter=function(e,t){console.log("----------httpGeter---------"+e);var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){200===n.status&&3===n.readyState&&n.responseText&&n.responseText.length>0?(console.log(n.responseText,n),t&&t(1,n.responseText)):t&&t(0,"请求的错误状态码为:"+n.status)},n.send()},e.httpPoster=function(e,t,n){console.log("----------httpPoster---------"+e);var o=new XMLHttpRequest;o.open("POST",e,!0),o.onreadystatechange=function(){200===o.status&&3===o.readyState&&o.responseText&&o.responseText.length>0?(console.log(o.responseText,o),n&&n(1,o.responseText)):n&&n(0,"请求的错误状态码为:"+o.status)},o.send(t)},e.getRoomIdFromCode=function(e){for(var t="",n=0;n<e.length;n++){t+=(parseInt(e[n])+n+5)%10}return t},e.getRoomCodeFromId=function(e){for(var t="",n=0;n<e.length;n++){var o=parseInt(e[n]);o-(n+5)<0&&(o+=10),t+=o-(n+5)}return t},e.getNextSceneName=function(e){var t=e.split("_"),n=parseInt(t[1]);return n<=m.maxSceneCount-1?"Scene_"+(n+1):"Scene_1"},e.getLastSceneName=function(e){var t=e.split("_"),n=parseInt(t[1]);return n>1?"Scene_"+(n-1):"Scene_1"},e.getStrByDataArry=function(e){var t=JSON.parse(e),n=new Uint16Array(8*t.length),o=0;return t.forEach((function(e){n[8*o+0]=e.type,n[8*o+1]=e.posX,n[8*o+2]=e.posY,n[8*o+3]=e.angle,n[8*o+4]=e.width,n[8*o+5]=e.height,n[8*o+6]=e.edge,n[8*o+7]=e.limit,o++})),this.uint32ArrayToString(n)},e.getDataArrayByStr=function(e){for(var t=this.stringToUint32Array(e),n=[],o=0;o<t.length;o+=8){var a={type:0,posX:0,posY:0,angle:0,width:0,height:0,edge:0,limit:0};a.type=t[o+0],a.posX=t[o+1],a.posY=t[o+2],a.angle=t[o+3],a.width=t[o+4],a.height=t[o+5],a.edge=t[o+6],a.limit=t[o+7],a.posX=a.posX>3e4?a.posX-65536:a.posX,a.posY=a.posY>3e4?a.posY-65536:a.posY,a.angle=a.angle>3e4?a.angle-65536:a.angle,n.push(a)}return JSON.stringify(n)},e.uint32ArrayToString=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e.stringToUint32Array=function(e){for(var t=[],n=0,o=e.length;n<o;++n)t.push(e.charCodeAt(n));return new Uint16Array(t)},e.getPlatformStr=function(){return g.platform==g.Platform.BYTEDANCE_MINI_GAME?"字节小游戏":g.platform==g.Platform.WECHAT_GAME?"微信小游戏":g.platform==g.Platform.ANDROID?"安卓原生":g.platform==g.Platform.IOS?"IOS原生":g.platform==g.Platform.DESKTOP_BROWSER?"桌面浏览器":g.platform==g.Platform.MOBILE_BROWSER?"移动浏览器":"未知"},e.isPlatformDouYin=function(){return g.platform==g.Platform.BYTEDANCE_MINI_GAME},e}()).audioMap=new Map,y.headImageCacaheMap=new Map,y.heads=void 0,y.audios=new Map,y.buildMapCacheKey="build_map_cache",y.testMapKey="build_scene",y.isForTest=!1,y.sceneDataStr="",y.sceneNameStr="",M=y))||M),e("BuildMapCacheItem",(function(){this.name=void 0,this.id=void 0,this.version=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/GmeUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameCtrl.ts","./NetIns.ts"],(function(e){var t,n,r,i,o,c,s,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,i=e.find,o=e.Label,c=e.Component},function(e){s=e.GameCtrl},function(e){a=e.NetIns}],execute:function(){var u;n._RF.push({},"6eb36iNKbNH/L3drPDPIoz0","GmeUICtrl",void 0);var l=r.ccclass;r.property,e("GmeUICtrl",l("GmeUICtrl")(u=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).index=0,t}t(n,e);var r=n.prototype;return r.start=function(){},r.update=function(e){this.index++,this.index%2==0&&this.renderTimePercent()},r.renderTimePercent=function(){var e=i("Canvas/LodingBg/Percent").getComponent(o),t=a.getIns().receivedFrameIndex,n=this.node.getComponent(s).frameIndex;if(t<=0)e.string="0%";else{var r=n/t*100;r>=100&&(r=99.99),e.string=r.toFixed(1)+"%"}},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/GravitySwitchCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts","./RapierWorld.ts","./GameHelper.ts"],(function(i){var t,e,n,r,o,s,a,c,l,h;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){o=i.cclegacy,s=i._decorator},function(i){a=i.RapierBaseCollider},function(i){c=i.default},function(i){l=i.RapierWorld},function(i){h=i.default}],execute:function(){var u,d,p,f,y,C;o._RF.push({},"3e565/BgBpE57iB3uCztzPx","GravitySwitchCtrl",void 0);var w=s.ccclass,v=s.property,g=(s.requireComponent,s.executionOrder);i("GravitySwitchCtrl",(u=w("GravitySwitchCtrl"),d=g(2),p=v(Boolean),u(f=d((C=t((y=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return(t=i.call.apply(i,[this].concat(o))||this).switchers=[],t.isDirUp=!1,n(t,"isAutoSwitch",C,r(t)),t.index=0,t.coolFrameCount=0,t}e(t,i);var o=t.prototype;return o.onLoad=function(){var i=this;this.node.getComponentsInChildren(a).forEach((function(t){t.node.name.includes("Switch")&&i.switchers.push(t)})),this.switchers.forEach((function(t){t.onEnterCallback=i.onHandEnter.bind(i),t.onStepCallback=i.onStepCallback.bind(i)})),this.renderSwitch()},o.onStepCallback=function(){this.isAutoSwitch&&(this.index++,this.index%200==0&&(this.isDirUp=!this.isDirUp,this.renderSwitch(),h.playMusic(this.node,"yili3",!1))),this.coolFrameCount>0&&this.coolFrameCount--},o.onHandEnter=function(i,t){t.node.name.includes("Hand")&&this.coolFrameCount<=0&&(this.isDirUp=!this.isDirUp,this.renderSwitch(),h.playMusic(this.node,"yili3",!1),this.coolFrameCount=40*this.switchers.length)},o.renderSwitch=function(){var i=this;if(this.switchers.forEach((function(t){i.isDirUp?(t.node.getChildByName("On").active=!0,t.node.getChildByName("Off").active=!1):(t.node.getChildByName("On").active=!1,t.node.getChildByName("Off").active=!0)})),this.isDirUp){l.getIns().world.gravity={x:0,y:600}}else{l.getIns().world.gravity={x:0,y:-800}}},o.onDestroy=function(){l.getIns().world.gravity={x:0,y:-800}},t}(c)).prototype,"isAutoSwitch",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=y))||f)||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/GuidePannelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePannelController.ts","./GameCtrl.ts"],(function(e){var s,n,t,i,h,c,d,a,o,l;return{setters:[function(e){s=e.inheritsLoose},function(e){n=e.cclegacy,t=e._decorator,i=e.find,h=e.RichText,c=e.Label,d=e.director},function(e){a=e.BasePannelController},function(e){o=e.GameCtrl,l=e.GameMode}],execute:function(){var x;n._RF.push({},"777d2v7MlVGJ7kINgi/PkwC","GuidePannelCtrl",void 0);var r=t.ccclass;t.property,e("GuidePannelCtrl",r("GuidePannelCtrl")(x=function(e){function n(){for(var s,n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return(s=e.call.apply(e,[this].concat(t))||this).tipses=[],s.index=0,s.sceneIndex=1,s.isMustShow=!1,s}s(n,e);var t=n.prototype;return t.start=function(){this.initData(),o.gameMode==l.single&&this.isMustShow&&this.show()},t.onTipsClick=function(){this.tipses[0]?this.show():this.toast("本关卡没有任何提示")},t.show=function(){var e=this;this.tipses[0]&&(this.index=0,this.showPannel(i("Canvas/GuidePannel"),!0,!1),this.setButtonEvent(i("Canvas/GuidePannel/Pannel/Ok"),(function(){e.index++,e.tipses[e.index]?e.showData():e.hide()})),this.showData())},t.showData=function(){if(this.tipses[this.index]){var e=this.tipses[this.index]+"";e=this.replaceAllStr(e,"[","<color=#ff0000>"),e="<outline color=gray width=4>"+(e=this.replaceAllStr(e,"]","</color>"))+"</outline>",i("Canvas/GuidePannel/Pannel/Text").getComponent(h).string=e,i("Canvas/GuidePannel/Pannel/Ok/Label/Label").getComponent(c).string="[ "+(this.index+1)+"/"+this.tipses.length+" ]"}},t.hide=function(){this.hidePannel(i("Canvas/GuidePannel"))},t.initData=function(){this.sceneIndex=parseInt(d.getScene().name.split("_")[1]),1==this.sceneIndex||2==this.sceneIndex||3==this.sceneIndex?this.tipses.push("本游戏单人模式一人同时控制两人,可以通过右侧[切换]按钮来切换控制人物,网络多人模式就分别控制一个人","每关都有一个[钥匙]和[终点],获取钥匙并两人[同时]站立在终点即可过关","可以通过右侧[同步]按钮来同时换控制两个人的左右移动和跳跃,再点[解除]即可取消","很多地方都需要双人紧密配合,才能过关,开动脑筋闯关吧,实在不行还可以从设置菜单里重开一局","死亡不会导致钥匙掉落,所以可以放心大胆的[多死几次],嘻嘻"):5==this.sceneIndex?this.tipses.push("如果移动平台有数字就代表必须有对应数量的人直接站在上面平台才能移动"):6==this.sceneIndex||4==this.sceneIndex?this.tipses.push("石头方块很重,所以需要[两个人]才能推动,木头方块很轻就不需要了"):12==this.sceneIndex||13==this.sceneIndex||14==this.sceneIndex||15==this.sceneIndex?this.tipses.push("红色的波浪射线就是死亡射线,必须用护盾道具才能挡住,游戏中方块箱子是挡不住的","特定方向的[射线]只能被特定方向的[护盾]挡住,注意不要随便换方向"):16==this.sceneIndex||17==this.sceneIndex||19==this.sceneIndex||20==this.sceneIndex?this.tipses.push("地上[+][-]两个盒子可以让你变大变小,快让你的怪兽变大吧,斯巴达"):21==this.sceneIndex||22==this.sceneIndex||23==this.sceneIndex?this.tipses.push("[枪]这个道具击中就可以把角色吸走,再射击就会把角色[射]到碰撞点"):24==this.sceneIndex||25==this.sceneIndex||26==this.sceneIndex?this.tipses.push("本关卡含红绿灯,[红灯]亮时不可以移动,否则会[瞬移]到出生点"):27==this.sceneIndex||28==this.sceneIndex||29==this.sceneIndex||30==this.sceneIndex?this.tipses.push("快来收集[金币]吧,集齐所有金币钥匙才会出现哦,恭喜发财啦"):31==this.sceneIndex||32==this.sceneIndex||33==this.sceneIndex||34==this.sceneIndex||35==this.sceneIndex?this.tipses.push("获取[绳子]道具可以[连接]你的队友,绳子可以[缩短]和[延长],但是有长度限制哦","获取[引力]道具后按[锁定]键就可以通过[左右键]来控制引力方向,不用担心掉下去,锁定状态下自己会[固定]住","注意,场景里有很多[刺块],绳子碰到这些[刺块]就会断开,角色碰到也会死哦"):36!=this.sceneIndex&&37!=this.sceneIndex&&38!=this.sceneIndex&&39!=this.sceneIndex&&40!=this.sceneIndex||this.tipses.push("注意观察,场景里有很多[开关]方块,同时触发所有开关钥匙才能出现哦"),1!=this.sceneIndex&&4!=this.sceneIndex&&12!=this.sceneIndex&&16!=this.sceneIndex&&21!=this.sceneIndex&&24!=this.sceneIndex&&27!=this.sceneIndex&&31!=this.sceneIndex&&36!=this.sceneIndex||(this.isMustShow=!0)},n}(a))||x);n._RF.pop()}}}));

System.register("chunks:///_virtual/HotUpdateCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameHelper.ts"],(function(e){var t,i,o,n,s,r,a;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,o=e._decorator,n=e.find,s=e.Label,r=e.Component},function(e){a=e.default}],execute:function(){var l,d;i._RF.push({},"3544aAR+ldBRY7USUZyey35","HotUpdateCtrl",void 0);var h=o.ccclass;o.property,e("HotUpdateCtrl",h("HotUpdateCtrl")(((d=function(e){function i(){for(var t,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).androidBridge=void 0,t.remoteUrl=void 0,t.versionLocal=void 0,t.projectLocal=void 0,t.label=void 0,t.fileLabel=void 0,t.needUpdateFileCount=0,t.needUpdateFileTotalCount=0,t}t(i,e);var o=i.prototype;return o.start=function(){i.ins=this,this.label=n("Canvas/Label").getComponent(s),this.fileLabel=n("Canvas/Label/File").getComponent(s),this.label.string="正在加载资源...",this.androidBridge=globalThis.Android,globalThis.downloadCallback=this.downloadCallback.bind(this),globalThis.readRemoteJsonFileCallback=this.readRemoteJsonFileCallback.bind(this),console.log("HotUpdateVersion:"+this.getVersion()),this.remoteUrl=this.getRemoteUrl(),this.versionLocal=this.readDataJosnFile("dist/version.manifest"),this.projectLocal=this.readDataJosnFile("dist/project.manifest"),!this.versionLocal||this.versionLocal.length<10?console.log("--------版本文件异常-------"):!this.projectLocal||this.projectLocal.length<10?console.log("--------项目清单文件异常-------"):this.readRemoteJosnFile(this.remoteUrl+"version.manifest")},o.initBridge=function(){this.androidBridge=globalThis.Android},o.showToast=function(e){this.initBridge(),this.androidBridge.showToast(e)},o.downloadFile=function(e,t){this.initBridge(),this.label.string="正在加载文件 "+t,this.androidBridge.downloadFile(e,t)},o.restart=function(){this.initBridge(),this.androidBridge.restart()},o.quit=function(){this.initBridge(),this.androidBridge.quit()},o.downloadCallback=function(e,t){e?(this.needUpdateFileCount--,this.needUpdateFileCount<=0?this.restart():(this.fileLabel.string="正在下载文件: "+t,this.label.string=this.needUpdateFileTotalCount-this.needUpdateFileCount+"/"+this.needUpdateFileTotalCount)):this.fileLabel.string="文件下载错误: "+t},o.readDataJosnFile=function(e){return this.initBridge(),this.androidBridge.readDataJsonFile(e)},o.readRemoteJosnFile=function(e){this.initBridge(),this.label.string="正在获取资源清单文件",this.androidBridge.readRemoteJsonFile(e)},o.getVersion=function(){return this.initBridge(),this.androidBridge.getVersion()},o.getRemoteUrl=function(){return this.initBridge(),this.androidBridge.getRemoteUrl()},o.readRemoteJsonFileCallback=function(e,t){var i=this;if("error"!=t)if(e==this.remoteUrl+"version.manifest"){var o=JSON.parse(this.versionLocal),n=JSON.parse(t);o.version&&n.version&&o.version.length>3&&n.version.length>3?o.version!=n.version?this.readRemoteJosnFile(this.remoteUrl+"project.manifest"):(this.label.string="资源加载完毕",this.scheduleOnce((function(){a.exchangeScene("FirstScene")}),1)):this.label.string="资源数据异常"}else if(e==this.remoteUrl+"project.manifest"){this.label.string="资源清单加载完毕";var s=JSON.parse(this.projectLocal).assets,r=JSON.parse(t).assets;this.needUpdateFileCount++,this.needUpdateFileTotalCount++,this.downloadFile(this.remoteUrl+"version.manifest","/dist/version.manifest"),this.needUpdateFileCount++,this.needUpdateFileTotalCount++,this.downloadFile(this.remoteUrl+"project.manifest","/dist/project.manifest"),Object.keys(r).forEach((function(e){s[e]&&r[e].md5==s[e].md5||(i.needUpdateFileCount++,i.needUpdateFileTotalCount++,i.downloadFile(i.remoteUrl+e,"/dist/"+e))}))}else console.log("-----异常结果传入-----",e,t);else this.label.string="资源清单加载错误"},i}(r)).ins=void 0,l=d))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/JoinRoomPannelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePannelController.ts","./NetIns.ts","./LobbyCtrl.ts"],(function(o){var n,t,e,r,i,s,l,a;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,e=o._decorator,r=o.find,i=o.Label},function(o){s=o.BasePannelController},function(o){l=o.NetIns},function(o){a=o.LobbyCtrl}],execute:function(){var c;t._RF.push({},"a4435hKTlVJS6mHXpTB0DVa","JoinRoomPannelCtrl",void 0);var m=e.ccclass;e.property,o("JoinRoomPannelCtrl",m("JoinRoomPannelCtrl")(c=function(o){function t(){for(var n,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(n=o.call.apply(o,[this].concat(e))||this).roomId="",n}n(t,o);var e=t.prototype;return e.start=function(){},e.show=function(){this.roomId="",r("Canvas/JoinRoomPannel/Pannel/Number").getComponent(i).string=this.roomId,this.showPannel(r("Canvas/JoinRoomPannel"))},e.hide=function(){this.hidePannel(r("Canvas/JoinRoomPannel"))},e.onClick=function(o,n){"cancel"==n?1==this.roomId.length?this.roomId="":this.roomId=this.roomId.slice(0,this.roomId.length-1):"clear"==n?this.roomId="":(this.roomId+=n,6==this.roomId.trim().length&&(console.log(this.roomId),this.hide(),l.getIns().enterRoomCallback=r("Canvas").getComponent(a).enterRoomCallback2.bind(this),l.getIns().joinRoom(this.roomId))),r("Canvas/JoinRoomPannel/Pannel/Number").getComponent(i).string=this.roomId},t}(s))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameCtrl.ts"],(function(t){var o,n,i,e,s,r,h,d,a,c,l,u,g,p,y;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,h=t.Node,d=t.Vec2,a=t.UITransform,c=t.NodeEventType,l=t.v3,u=t.v2,g=t.find,p=t.Component},function(t){y=t.GameCtrl}],execute:function(){var f,T,_,m,v,x,C;s._RF.push({},"930a0wdKz1JnaKWsVoPhnVm","Joystick",void 0);var L=r.ccclass,A=r.property;t("Joystick",(f=L("Joystick"),T=A({type:h,displayName:"摇杆bg"}),_=A({type:h,displayName:"摇杆中间点"}),f((x=o((v=function(t){function o(){for(var o,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return o=t.call.apply(t,[this].concat(s))||this,i(o,"node_dotBg",x,e(o)),i(o,"node_dot",C,e(o)),o.UITf_dot=null,o.maxLength=0,o.dir=new d(0,0),o.roleAngle=0,o.isTouching=!1,o}n(o,t);var s=o.prototype;return s.onLoad=function(){this.init()},s.init=function(){this.UITf_dot=this.node_dotBg.getComponent(a),this.maxLength=this.node_dotBg.getComponent(a).width/2,this.node_dotBg.on(c.TOUCH_START,this.onTouchMove,this),this.node_dotBg.on(c.TOUCH_MOVE,this.onTouchMove,this),this.node_dotBg.on(c.TOUCH_END,this.onTouchEnd,this),this.node_dotBg.on(c.TOUCH_CANCEL,this.onTouchEnd,this)},s.onTouchMove=function(t){var o=t.getUILocation(),n=this.UITf_dot.convertToNodeSpaceAR(l(o.x,o.y,0)),i=n.length();i>0&&(this.dir.x=n.x/i,this.dir.y=n.y/i,i>this.maxLength&&(n.x=this.maxLength*this.dir.x,n.y=this.maxLength*this.dir.y),this.node_dot.setPosition(n)),this.isTouching=!0},s.onTouchEnd=function(t){this.dir=u(0,0),this.node_dot.setPosition(0,0,0),g("Canvas").getComponent(y).onTouchEnd(),this.isTouching=!1},s.calculateAngle=function(){if(0==this.dir.x&&0==this.dir.y)return this.roleAngle;var t=Math.atan2(this.dir.y,this.dir.x);return this.roleAngle=180*t/Math.PI,this.roleAngle},o}(p)).prototype,"node_dotBg",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=o(v.prototype,"node_dot",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/Light2D.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./GameHelper.ts","./LightMask.ts"],(function(t){var i,e,n,r,a,o,s,u,c,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator},function(t){s=t.default},function(t){u=t.default},function(t){c=t.LightData,l=t.LightMask}],execute:function(){var h,p,d,f,g,L,v;a._RF.push({},"dafc90+KzFKGp6hc9gLq94n","Light2D",void 0);var b=o.ccclass,y=o.property;t("Light2D",(h=b("Light2D"),p=y(Number),d=y(Number),h((L=i((g=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,n(i,"raduis",L,r(i)),n(i,"view",v,r(i)),i.id=void 0,i.data=new c,i}e(i,t);var a=i.prototype;return a.onEnable=function(){this.addLight()},a.onDisable=function(){this.removeLight()},a.addLight=function(){this.id=u.getId(),l.lightMap.set(this.id,this)},a.removeLight=function(){this.id&&l.lightMap.has(this.id)&&l.lightMap.delete(this.id)},i}(s)).prototype,"raduis",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=i(g.prototype,"view",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=g))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/LightMask.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,e,n,a,r,s,u;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,n=t.Sprite,a=t.v4,r=t.v2,s=t.v3,u=t.Component}],execute:function(){var p,c;i._RF.push({},"4b71aS4EtlA9JyBva/73/7X","LightMask",void 0);var d=e.ccclass,h=(e.property,e.requireComponent);t("LightMask",d("LightMask")(p=h(n)(((c=function(t){function i(){for(var o,i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return(o=t.call.apply(t,[this].concat(e))||this).mt=null,o.index=0,o}o(i,t);var e=i.prototype;return e.onLoad=function(){i.lightMap=new Map},e.onDestroy=function(){},e.update=function(){this.index++,this.updateLightDataes()},e.updateLightDataes=function(){var t=this,o=[],e=0;i.lightMap.forEach((function(i){var n=i.data;if(t.updateLightData(n,i),!(e>=5)){var r=a(n.pos.x,n.pos.y,n.radius,n.dir);o.push(r);var s=a(n.view,n.color.x,n.color.y,n.color.z);o.push(s),e++}})),this.node.getComponent(n).materials[0].setProperty("obsLines",o)},e.updateLightData=function(t,o){t.radius=o.raduis,t.dir=o.node.eulerAngles.z,t.view=o.view,t.pos=r(o.node.worldPosition.x,o.node.worldPosition.y),t.color=s(o.node.up.x,o.node.up.y,0)},i}(u)).lightMap=new Map,p=c))||p)||p),t("LightData",(function(){this.pos=void 0,this.radius=void 0,this.dir=void 0,this.view=void 0,this.color=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/LimitCubeCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts","./SpiderCtrl.ts"],(function(e){var t,i,r,n,o,a,l,s,u,c,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.v3,s=e.Label},function(e){u=e.RapierBaseCollider},function(e){c=e.default},function(e){d=e.SpiderCtrl}],execute:function(){var p,m,b,h,C,f,y,g,v;o._RF.push({},"f4fc8CqVwxA7qiYLdxPX/N2","LimitCubeCtrl",void 0);var N=a.ccclass,x=a.property,L=a.requireComponent,P=a.executionOrder;e("LimitCubeCtrl",(p=N("LimitCubeCtrl"),m=L(u),b=P(2),h=x(Number),C=x(Boolean),p(f=m(f=b((g=t((y=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"maxNumber",g,n(t)),t.rc=void 0,t.label=void 0,t.enterPlayerCount=0,r(t,"isDynamicAdd",v,n(t)),t.speed=l(0,0,0),t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.isDynamicAdd||this.load()},o.load=function(){this.label=this.node.getChildByName("Label").getComponent(s),this.label.node.active=!1},o.onStepCallback=function(){this.enterPlayerCount==this.maxNumber?this.rc.rigidBody.setEnabledTranslations(!0,!0,!0):(this.rc.rigidBody.setEnabledTranslations(!1,!0,!0),this.rc.setSpeed(this.speed))},o.onEnter=function(e,t){t.node.getComponent(d)&&(this.enterPlayerCount++,this.renderNumber())},o.onQuit=function(e,t){t.node.getComponent(d)&&(this.enterPlayerCount--,this.renderNumber())},o.renderNumber=function(){this.onStepCallback();var e=this.enterPlayerCount>this.maxNumber?this.maxNumber:this.enterPlayerCount;this.label.string=this.maxNumber-e+""},t}(c)).prototype,"maxNumber",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),v=t(y.prototype,"isDynamicAdd",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=y))||f)||f)||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/LobbyCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetIns.ts","./GameCtrl.ts","./RapierWorld.ts","./GameHelper.ts","./ComfirmPannelCtrl.ts","./BaseComponent.ts","./RoomInfoPannelCtrl.ts","./ChapterSelectPannelCtrl.ts","./FirstSceneCtrl.ts","./TTBarPannelCtrl.ts"],(function(n){var o,e,t,i,a,s,r,c,l,m,h,u,d,f,g,C,p,b,v;return{setters:[function(n){o=n.inheritsLoose},function(n){e=n.cclegacy,t=n._decorator,i=n.find,a=n.Label,s=n.sys,r=n.Sprite,c=n.EditBox},function(n){l=n.NetIns},function(n){m=n.GameCtrl,h=n.GameMode},function(n){u=n.RapierWorld},function(n){d=n.default},function(n){f=n.ComfirmPannelCtrl},function(n){g=n.default},function(n){C=n.RoomInfoPannelCtrl},function(n){p=n.ChapterSelectPannelCtrl},function(n){b=n.FirstSceneCtrl},function(n){v=n.TTBarPannelCtrl}],execute:function(){var w;e._RF.push({},"6b7edUkDzFEza9wqH4K8xMY","LobbyCtrl",void 0);var I=t.ccclass;t.property,n("LobbyCtrl",I("LobbyCtrl")(w=function(n){function e(){for(var o,e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(o=n.call.apply(n,[this].concat(t))||this).isEnterFromSideBar=!1,o}o(e,n);var t=e.prototype;return t.onLoad=function(){l.getIns().startSyncFrameCallback=function(){i("Canvas/RoomInfoPannel/Cover").active=!0,u.getIns().initPhysics((function(){if(m.gameMode=h.net,!l.getIns().room)return i("Canvas/RoomInfoPannel/Cover").active=!1,void console.error("--房间对象不存在--");var n=l.getIns().getRoomName(),o=l.getIns().getRoomMap();o?(d.isForTest=!1,d.sceneDataStr=o,d.exchangeScene("Scene_Test")):n&&n.includes("Scene")?d.exchangeScene(n):(i("Canvas/RoomInfoPannel/Cover").active=!1,console.error("--未能获取正确的房间名--"))}))},l.getIns().enterRoomCallback=this.enterRoomCallback.bind(this)},t.showLobbyMask=function(){i("Canvas/LobbyMask").active=!0},t.start=function(){this.initTT(),i("Canvas/Version").getComponent(a).string="Version 0."+b.gameVersion,this.showLobbyMask(),this.renderPlayerInfo();var n=l.getIns().client;n.lastRoomId?(console.log("已经加入房间,房间ID为%s",n.lastRoomId,n),this.invoke((function(){l.getIns().joinRoom(n.lastRoomId)}),.2)):(i("Canvas/LobbyMask").active=!1,this.getPermeter())},t.getPermeter=function(){if(s.platform==s.Platform.WECHAT_GAME||s.platform==s.Platform.BYTEDANCE_MINI_GAME){var n=this.getMiniGamePermeter("roomCode");n&&n.length>4&&this.invoke((function(){l.getIns().joinRoom(n)}),.2)}},t.enterRoomCallback=function(n,o){this&&this.node&&this.node.isValid&&1==n&&(this.node.getComponent(C).show(),this.showOrHideMatching(!1))},t.enterRoomCallback2=function(n,o){this&&this.node&&this.node.isValid&&(1==n?(this.node.getComponent(C).show(),this.showOrHideMatching(!1)):this.toast(o))},t.renderPlayerInfo=function(){i("Canvas/TopFrame/NickName").getComponent(a).string=b.playerInfo.nickName,i("Canvas/TopFrame/CoinsCount").getComponent(a).string=b.playerInfo.getDiamondNumber(this)+"",d.getHeadByUrl(b.playerInfo.headUrl,i("Canvas/TopFrame/Head").getComponent(r))},t.buildRoom=function(){var n=this;d.isPlatformDouYin()?this.toast("测试中,暂未开放"):b.playerInfo.getDiamondNumber(this)<20?this.node.getComponent(f).showForAd("钻石不足20无法创建房间,要通过观看广告获取钻石吗?",(function(){n.showAd((function(){n.addDiamondNumber(),n.buildRoomCallback()}))})):this.buildRoomCallback()},t.buildRoomCallback=function(){m.msgs=new Map,l.getIns().buildRoom("Scene_1","cop",!1)},t.joinRoom=function(){},t.levelRoom=function(){this.node.getComponent(f).show("确定要离开房间么?",(function(){l.getIns().leaveRoom()}))},t.startGame=function(){l.getIns().startSyncFrame()},t.sendFrameMsg=function(){l.getIns().sendFrame(i("Canvas/EditBox").getComponent(c).string)},t.showConfirm=function(){this.node.getComponent(p).show(h.single,null)},t.buildMap=function(){d.isPlatformDouYin()?this.toast("测试中,暂未开放"):d.exchangeScene("BuildScene")},t.matchRoom=function(){var n=this;b.playerInfo.getDiamondNumber(this)<20?this.node.getComponent(f).showForAd("钻石不足20无法匹配房间,要通过观看广告获取钻石吗?",(function(){n.showAd((function(){n.addDiamondNumber(),n.matchRoomCallback()}))})):this.matchRoomCallback()},t.matchRoomCallback=function(){var n=this;this.showOrHideMatching(!0),m.msgs=new Map,l.getIns().buildRoom("Scene_1","cop",!0,(function(){n.showOrHideMatching(!1)}))},t.showOrHideMatching=function(n){n?i("Canvas/Matching")&&(i("Canvas/Matching").active=!0,this.addAndSortIndex(i("Canvas/Matching"))):i("Canvas/Matching")&&(i("Canvas/Matching").active=!1)},e.gotoGameScene=function(n){m.msgs=new Map,u.getIns().initPhysics((function(){m.gameMode=h.single,d.exchangeScene(n)}))},t.onQuestions=function(){this.node.getComponent(f).show("本游戏所有关卡除非特殊说明都可以单机或双人联网游玩,但是双人联网过关会简单一些",(function(){}),!0)},t.onAd=function(){var n=this;this.node.getComponent(f).showForAd("看完30秒广告才可以获取[100个钻石]奖励,确定要看广告吗?",(function(){n.showAd((function(){n.addDiamondNumber()}))}))},t.addDiamondNumber=function(n){void 0===n&&(n=100);var o=b.playerInfo.getDiamondNumber(this);b.playerInfo.setDiamondNumber(o+n,this),this.renderPlayerInfo()},t.initTT=function(){var n=this;if(console.log("----------qqwwee---------1----------"),d.isPlatformDouYin()){console.log("----------qqwwee------2-------------");var o=globalThis.tt;console.log("----------qqwwee-----3--------------",o),o.onShow((function(o){console.log("启动参数：",o.query),console.log("来源信息：",o.refererInfo),console.log("场景值：",o.scene),console.log("启动场景字段：",o.launch_from,", ",o.location),console.log("----------qqwwee--------4-----------",o),"homepage"==o.launch_from&&"sidebar_card"==o.location?(n.isEnterFromSideBar=!0,i("Canvas/ButtonTT/Label").getComponent(a).string="入口有奖"):i("Canvas/ButtonTT/Label").getComponent(a).string="入口有奖"})),o.checkScene({scene:"sidebar",success:function(n){console.log("----------qqwwee--------5-----------",n),console.log("check scene success: ",n.isExist),n.isExist&&(i("Canvas/ButtonTT").active=!0)},fail:function(n){console.log("----------qqwwee------6-------------",n),console.log("check scene fail:",n)}}),console.log("----------qqwwee----------7---------")}},t.ttEnterReward=function(){this.isEnterFromSideBar?(this.toast("恭喜获得5个钻石的奖励",5),this.addDiamondNumber(5)):this.node.getComponent(v).show()},e}(g))||w);e._RF.pop()}}}));

System.register("chunks:///_virtual/LoginCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./NetIns.ts","./FirstSceneCtrl.ts","./GameHelper.ts"],(function(t){var n,e,o,r,c,i,s,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.game},function(t){c=t.default},function(t){i=t.NetIns},function(t){s=t.FirstSceneCtrl},function(t){u=t.default}],execute:function(){var a;e._RF.push({},"3a6b9OfuaxBfbAmpcZPw+F9","LoginCtrl",void 0);var l=o.ccclass;o.property,t("LoginCtrl",l("LoginCtrl")(a=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.start=function(){var t=this;i.getIns().initClient(s.playerInfo.account,(function(n,e){1==n?u.exchangeScene("LobbyScene"):(t.toast("网络初始化异常"),t.invoke((function(){r.restart()}),2))}))},e}(c))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AnimationCtrl.ts","./BackgroundCtrl.ts","./BallCtrl.ts","./BirdCtrl.ts","./BulletCtrl.ts","./CameraCtrl.ts","./CellCtrl.ts","./CoinGroupCtrl.ts","./ColorCubeCtrl.ts","./CubeWeightCtrl.ts","./DeathRayCtrl.ts","./EndCheckEggCtrl.ts","./FirstSceneCtrl.ts","./FreezeCubeCtrl.ts","./GameCtrl.ts","./GravitySwitchCtrl.ts","./HotUpdateCtrl.ts","./LimitCubeCtrl.ts","./LobbyCtrl.ts","./LoginCtrl.ts","./PlatfromSwitchCtrl.ts","./ProcessCtrl.ts","./RedGreenLightCtrl.ts","./RopeCtrl.ts","./SamllLargeTiggerCtrl.ts","./SceneLoader.ts","./SizeCtrl.ts","./SpearCtrl.ts","./SpiderCtrl.ts","./TanChuangCtrl.ts","./TestScript.ts","./TiggerGroupCtrl.ts","./TimeCubeCtrl.ts","./WallCtrl.ts","./WxSceneCtrl.ts","./AnchorCtrl.ts","./BuildCameraCtrl.ts","./BuildItemComp.ts","./BuildSceneCtrl.ts","./BuildSceneLoader.ts","./DragItemCtrl.ts","./EffectComp.ts","./ObstaclesComp.ts","./WallComp.ts","./BaseComponent.ts","./BasePannelController.ts","./DragComp.ts","./EventBus.ts","./GameHelper.ts","./Joystick.ts","./MD5Helper.ts","./NewComponent.ts","./WaveCtrl.ts","./NetIns.ts","./Light2D.ts","./LightMask.ts","./RapierBalloonGroupCtrl.ts","./RapierBaseCollider.ts","./RapierBaseJoint.ts","./RapierBox2DCollider.ts","./RapierFix2DJoint.ts","./RapierGroupCollider.ts","./RapierLightningCtrl.ts","./RapierLimitPlatformCtrl.ts","./RapierMesh2DCollider.ts","./RapierPlatformCtrl.ts","./RapierRevolute2DJoint.ts","./RapierRoundBox2DCollider.ts","./RapierSphere2DCollider.ts","./RapierStaticMesh2DCollider.ts","./RapierStringJoint.ts","./RapierToolCtrl.ts","./RapierWaterCtrl.ts","./RapierWorld.ts","./BuildMapSelectPannelCtrl.ts","./BuildMapSetPannelCtrl.ts","./ChapterSelectPannelCtrl.ts","./ComfirmPannelCtrl.ts","./DecorationSelectPannelCtrl.ts","./GmeUICtrl.ts","./GuidePannelCtrl.ts","./JoinRoomPannelCtrl.ts","./PlayerInfoPannelCtrl.ts","./ResultPannelCtrl.ts","./RoomInfoPannelCtrl.ts","./SettingPannelCtrl.ts","./SignPannelCtrl.ts","./TTBarPannelCtrl.ts","./SpeechIns.ts","./debug-view-runtime-control.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MD5Helper.ts",["cc"],(function(r){var d,_;return{setters:[function(r){d=r.cclegacy,_=r._decorator}],execute:function(){d._RF.push({},"23c6bAnENFBYoeu2jXT8aMi","MD5Helper",void 0);_.ccclass,_.property;var n=r("default",function(){function r(){}return r.hex_md5=function(d){return r.binl2hex(r.core_md5(r.str2binl(d),d.length*r.chrsz))},r.b64_md5=function(d){return r.binl2b64(r.core_md5(r.str2binl(d),d.length*r.chrsz))},r.str_md5=function(d){return r.binl2str(r.core_md5(r.str2binl(d),d.length*r.chrsz))},r.hex_hmac_md5=function(d,_){return r.binl2hex(r.core_hmac_md5(d,_))},r.b64_hmac_md5=function(d,_){return r.binl2b64(r.core_hmac_md5(d,_))},r.str_hmac_md5=function(d,_){return r.binl2str(r.core_hmac_md5(d,_))},r.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==r.hex_md5("abc")},r.core_md5=function(d,_){d[_>>5]|=128<<_%32,d[14+(_+64>>>9<<4)]=_;for(var n=1732584193,m=-271733879,t=-1732584194,e=271733878,c=0;c<d.length;c+=16){var f=n,i=m,h=t,a=e;n=r.md5_ff(n,m,t,e,d[c+0],7,-680876936),e=r.md5_ff(e,n,m,t,d[c+1],12,-389564586),t=r.md5_ff(t,e,n,m,d[c+2],17,606105819),m=r.md5_ff(m,t,e,n,d[c+3],22,-1044525330),n=r.md5_ff(n,m,t,e,d[c+4],7,-176418897),e=r.md5_ff(e,n,m,t,d[c+5],12,1200080426),t=r.md5_ff(t,e,n,m,d[c+6],17,-1473231341),m=r.md5_ff(m,t,e,n,d[c+7],22,-45705983),n=r.md5_ff(n,m,t,e,d[c+8],7,1770035416),e=r.md5_ff(e,n,m,t,d[c+9],12,-1958414417),t=r.md5_ff(t,e,n,m,d[c+10],17,-42063),m=r.md5_ff(m,t,e,n,d[c+11],22,-1990404162),n=r.md5_ff(n,m,t,e,d[c+12],7,1804603682),e=r.md5_ff(e,n,m,t,d[c+13],12,-40341101),t=r.md5_ff(t,e,n,m,d[c+14],17,-1502002290),m=r.md5_ff(m,t,e,n,d[c+15],22,1236535329),n=r.md5_gg(n,m,t,e,d[c+1],5,-165796510),e=r.md5_gg(e,n,m,t,d[c+6],9,-1069501632),t=r.md5_gg(t,e,n,m,d[c+11],14,643717713),m=r.md5_gg(m,t,e,n,d[c+0],20,-373897302),n=r.md5_gg(n,m,t,e,d[c+5],5,-701558691),e=r.md5_gg(e,n,m,t,d[c+10],9,38016083),t=r.md5_gg(t,e,n,m,d[c+15],14,-660478335),m=r.md5_gg(m,t,e,n,d[c+4],20,-405537848),n=r.md5_gg(n,m,t,e,d[c+9],5,568446438),e=r.md5_gg(e,n,m,t,d[c+14],9,-1019803690),t=r.md5_gg(t,e,n,m,d[c+3],14,-187363961),m=r.md5_gg(m,t,e,n,d[c+8],20,1163531501),n=r.md5_gg(n,m,t,e,d[c+13],5,-1444681467),e=r.md5_gg(e,n,m,t,d[c+2],9,-51403784),t=r.md5_gg(t,e,n,m,d[c+7],14,1735328473),m=r.md5_gg(m,t,e,n,d[c+12],20,-1926607734),n=r.md5_hh(n,m,t,e,d[c+5],4,-378558),e=r.md5_hh(e,n,m,t,d[c+8],11,-2022574463),t=r.md5_hh(t,e,n,m,d[c+11],16,1839030562),m=r.md5_hh(m,t,e,n,d[c+14],23,-35309556),n=r.md5_hh(n,m,t,e,d[c+1],4,-1530992060),e=r.md5_hh(e,n,m,t,d[c+4],11,1272893353),t=r.md5_hh(t,e,n,m,d[c+7],16,-155497632),m=r.md5_hh(m,t,e,n,d[c+10],23,-1094730640),n=r.md5_hh(n,m,t,e,d[c+13],4,681279174),e=r.md5_hh(e,n,m,t,d[c+0],11,-358537222),t=r.md5_hh(t,e,n,m,d[c+3],16,-722521979),m=r.md5_hh(m,t,e,n,d[c+6],23,76029189),n=r.md5_hh(n,m,t,e,d[c+9],4,-640364487),e=r.md5_hh(e,n,m,t,d[c+12],11,-421815835),t=r.md5_hh(t,e,n,m,d[c+15],16,530742520),m=r.md5_hh(m,t,e,n,d[c+2],23,-995338651),n=r.md5_ii(n,m,t,e,d[c+0],6,-198630844),e=r.md5_ii(e,n,m,t,d[c+7],10,1126891415),t=r.md5_ii(t,e,n,m,d[c+14],15,-1416354905),m=r.md5_ii(m,t,e,n,d[c+5],21,-57434055),n=r.md5_ii(n,m,t,e,d[c+12],6,1700485571),e=r.md5_ii(e,n,m,t,d[c+3],10,-1894986606),t=r.md5_ii(t,e,n,m,d[c+10],15,-1051523),m=r.md5_ii(m,t,e,n,d[c+1],21,-2054922799),n=r.md5_ii(n,m,t,e,d[c+8],6,1873313359),e=r.md5_ii(e,n,m,t,d[c+15],10,-30611744),t=r.md5_ii(t,e,n,m,d[c+6],15,-1560198380),m=r.md5_ii(m,t,e,n,d[c+13],21,1309151649),n=r.md5_ii(n,m,t,e,d[c+4],6,-145523070),e=r.md5_ii(e,n,m,t,d[c+11],10,-1120210379),t=r.md5_ii(t,e,n,m,d[c+2],15,718787259),m=r.md5_ii(m,t,e,n,d[c+9],21,-343485551),n=r.safe_add(n,f),m=r.safe_add(m,i),t=r.safe_add(t,h),e=r.safe_add(e,a)}return Array(n,m,t,e)},r.md5_cmn=function(d,_,n,m,t,e){return r.safe_add(r.bit_rol(r.safe_add(r.safe_add(_,d),r.safe_add(m,e)),t),n)},r.md5_ff=function(d,_,n,m,t,e,c){return r.md5_cmn(_&n|~_&m,d,_,t,e,c)},r.md5_gg=function(d,_,n,m,t,e,c){return r.md5_cmn(_&m|n&~m,d,_,t,e,c)},r.md5_hh=function(d,_,n,m,t,e,c){return r.md5_cmn(_^n^m,d,_,t,e,c)},r.md5_ii=function(d,_,n,m,t,e,c){return r.md5_cmn(n^(_|~m),d,_,t,e,c)},r.core_hmac_md5=function(d,_){var n=r.str2binl(d);n.length>16&&(n=r.core_md5(n,d.length*r.chrsz));for(var m=Array(16),t=Array(16),e=0;e<16;e++)m[e]=909522486^n[e],t[e]=1549556828^n[e];var c=r.core_md5(m.concat(r.str2binl(_)),512+_.length*r.chrsz);return r.core_md5(t.concat(c),640)},r.safe_add=function(r,d){var _=(65535&r)+(65535&d);return(r>>16)+(d>>16)+(_>>16)<<16|65535&_},r.bit_rol=function(r,d){return r<<d|r>>>32-d},r.str2binl=function(d){for(var _=Array(),n=(1<<r.chrsz)-1,m=0;m<d.length*r.chrsz;m+=r.chrsz)_[m>>5]|=(d.charCodeAt(m/r.chrsz)&n)<<m%32;return _},r.binl2str=function(d){for(var _="",n=(1<<r.chrsz)-1,m=0;m<32*d.length;m+=r.chrsz)_+=String.fromCharCode(d[m>>5]>>>m%32&n);return _},r.binl2hex=function(d){for(var _=r.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",m=0;m<4*d.length;m++)n+=_.charAt(d[m>>2]>>m%4*8+4&15)+_.charAt(d[m>>2]>>m%4*8&15);return n},r.binl2b64=function(d){for(var _="",n=0;n<4*d.length;n+=3)for(var m=(d[n>>2]>>n%4*8&255)<<16|(d[n+1>>2]>>(n+1)%4*8&255)<<8|d[n+2>>2]>>(n+2)%4*8&255,t=0;t<4;t++)8*n+6*t>32*d.length?_+=r.b64pad:_+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(m>>6*(3-t)&63);return _},r}());n.hexcase=0,n.b64pad="",n.chrsz=8,d._RF.pop()}}}));

System.register("chunks:///_virtual/NetIns.ts",["cc","./EventBus.ts","./GameCtrl.ts","./GameHelper.ts","./BaseComponent.ts","./FirstSceneCtrl.ts","./RoomInfoPannelCtrl.ts","./SpeechIns.ts"],(function(o){var n,e,t,s,r,i,c,a,l,m,u,g,h;return{setters:[function(o){n=o.cclegacy,e=o._decorator,t=o.game,s=o.find},function(o){r=o.default,i=o.EventType,c=o.EventMsg},function(o){a=o.GameCtrl},function(o){l=o.default},function(o){m=o.default},function(o){u=o.FirstSceneCtrl},function(o){g=o.RoomInfoPannelCtrl},function(o){h=o.SpeechIns}],execute:function(){n._RF.push({},"2f98bBnRN9M84JhIv30y7Qq","NetIns",void 0);e.ccclass,e.property;o("NetIns",function(){function o(){this.client=void 0,this.room=void 0,this.group=void 0,this.receivedFrameIndex=0,this.isRestarting=!1,this.enterRoomCallback=void 0,this.startSyncFrameCallback=void 0}o.getIns=function(){return null!=o.ins&&null!=o.ins||(o.ins=new o),o.ins};var n=o.prototype;return n.initClient=function(o,n){var e=this;h.getIns().init(),this.client=null,this.room=null,this.group=null,this.receivedFrameIndex=0,this.isRestarting=!1,a.msgs=new Map,this.client=new window.GOBE.Client({appId:"112013315",openId:o,clientId:"1507981081888997312",clientSecret:"5A292CA87A75AD2363A8967FD6C25C775DC276A8AD183B3FB2414B743376DACA"}),this.client.onInitResult((function(o){0===o?(console.log("-----初始化成功------"),console.log("playerId: "+e.client.playerId),u.playerInfo.playerId=e.client.playerId):console.log("------初始化失败-----")})),this.client.onKickOff((function(){e.room&&e.leaveRoom(),t.restart()})),this.client.init().then((function(o){n(1,"")})).catch((function(o){console.log("-----初始化请求失败------",o),n(0,"初始化请求失败")}))},n.setRoomEvents=function(){var o=this;this.room.onJoin((function(n){r.getInstance().board(i.room_change,c.GetIns()),n.playerId===o.client.playerId&&(console.log("------创建或加入房间成功-----roomId:"+o.room.roomCode),o.enterRoomCallback(1,""))})),this.room.onStartFrameSync((function(){console.log("------onStartFrameSync-----"),o.startSyncFrameCallback()})),this.room.onStopFrameSync((function(){console.log("-----onStopFrameSync------"),r.getInstance().board(i.stop_frame,c.GetIns())})),this.room.onRecvFrame((function(n){n instanceof Array&&n.length>10&&console.log("---------补帧--------",n),n instanceof Array?n.forEach((function(n){a.msgs.set(n.currentRoomFrameId,n),n.currentRoomFrameId>o.receivedFrameIndex&&(o.receivedFrameIndex=n.currentRoomFrameId)})):(a.msgs.set(n.currentRoomFrameId,n),n.currentRoomFrameId>o.receivedFrameIndex&&(o.receivedFrameIndex=n.currentRoomFrameId))})),this.room.onLeave((function(n){n.playerId!==o.client.playerId?console.log("------onLeave-----player:"+n.playerId):(o.room.removeAllListeners(),o.room=null),r.getInstance().board(i.room_change,c.GetIns())})),this.room.onDismiss((function(){console.log("------onDismiss-----"),o.room.removeAllListeners(),o.room=null,r.getInstance().board(i.room_change,c.GetIns())})),this.room.onRequestFrameError((function(n){10002===n.code&&(console.log("------补帧失败-----",n),o.leaveRoom(),t.restart())})),this.room.onRecvFromServer((function(o){console.log("后端服务器发来的消息: "+o.msg),r.getInstance().board(i.server_msg,c.GetIns().setStr(o.msg))})),this.room.onRecvFromClient((function(o){console.log("其他客户端发来的消息: "+o.msg),s("Canvas")&&s("Canvas").getComponent(g)&&s("Canvas").getComponent(g).onRecvFromClient(o.msg),s("Canvas")&&s("Canvas").getComponent(a)&&s("Canvas").getComponent(a).onRecvFromClient(o.msg)})),this.room.onDisconnect((function(n){console.log("有玩家掉线"),n.playerId===o.client.playerId&&0==o.isRestarting&&(o.isRestarting=!0,console.log("------掉线-----"),l.exchangeScene("FirstScene"))})),this.room.onSendToServerFailed((function(o){console.log("发送后端消息失败",o)})),this.room.onRoomPropertiesChangeFailed((function(o){console.log("------更新房间信息失败-----",o)})),this.room.onRoomPropertiesChange((function(o){console.log("------同步更新房间信息成功-----"),r.getInstance().board(i.room_change,c.GetIns())}))},n.buildRoom=function(o,n,e,t,s){var r=this;void 0===t&&(t=null),void 0===s&&(s="");var i=JSON.stringify(u.playerInfo),c={maxPlayers:2,isPrivate:e?0:1,roomName:o,roomType:n,matchParams:{param1:u.gameVersion+"",param2:"{param2}"},customRoomProperties:JSON.stringify({roomName:o,isForFreeMatch:e,mapStr:s})},a={customPlayerStatus:0,customPlayerProperties:i};e?this.client.matchRoom(c,a).then((function(o){r.room=o,r.setRoomEvents(),console.log("-----玩家网络数据更新------")})).catch((function(o){console.log("-----房间匹配失败------",o),r.toast("匹配繁忙,请稍后几十秒再次尝试"),t&&t()})):this.client.createRoom(c,a).then((function(o){r.room=o,r.setRoomEvents(),console.log("-----玩家网络数据更新------")})).catch((function(o){console.log("-----创建房间失败------",o)}))},n.setEnterRoomCallback=function(o){this.enterRoomCallback=o},n.resetRoomFrameId=function(o){this.room.resetRoomFrameId(o)},n.joinRoom=function(o){var n=this,e=JSON.stringify(u.playerInfo);this.client.onJoinRoomFailed((function(o){console.log("-----加入房间失败------",o)})),this.client.joinRoom(o,{customPlayerStatus:0,customPlayerProperties:e}).then((function(o){n.room=o,n.setRoomEvents(),console.log("----------房间名称:"+n.room.roomName+"-----------"),console.log("----------房间类型:"+n.room.roomType+"-----------"),n.room.isSyncing?n.startSyncFrameCallback():s("Canvas/LobbyMask")&&s("Canvas/LobbyMask").isValid&&(s("Canvas/LobbyMask").active=!1)})).catch((function(o){console.log("-----加入房间失败------",o),101117==o.code?n.enterRoomCallback(0,"房间可能不存在"):n.leaveRoom()}))},n.leaveRoom=function(){this.client.leaveRoom().then((function(o){console.log("-----离开房间------")})).catch((function(o){console.log("-----离开房间失败------")}))},n.dismissRoom=function(){this.client.dismissRoom().then((function(o){console.log("-----解散房间成功------")})).catch((function(o){console.log("-----解散房间失败------")}))},n.removePlayer=function(o){var n=this;this.room.removePlayer(o).then((function(){console.log("------移除玩家成功，更新room-------"),n.room.update().then((function(){console.log("-------------")}))})).catch((function(o){console.log("------移除玩家失败-------")}))},n.sendFrame=function(o){this.room.sendFrame(o)},n.startSyncFrame=function(){this.room.startFrameSync()},n.stopSyncFrame=function(){try{this.room.stopFrameSync()}catch(o){console.log("停帧异常",o),this.leaveRoom(),t.restart()}},n.sendMsgToServer=function(o){console.log("发送后端消息:"+o),this.room?this.room.sendToServer(o):console.log("房间不存在,无法通过房间发消息")},n.getRoomName=function(){if(this.room&&this.room.customRoomProperties){var o=this.room.customRoomProperties,n=JSON.parse(o).roomName;return n||(console.log("获取房间信息JSON数据错误1"),null)}return console.log("获取房间信息数据错误"),null},n.getRoomMap=function(){if(this.room&&this.room.customRoomProperties){var o=this.room.customRoomProperties,n=JSON.parse(o).mapStr;return n&&n.length>10?l.getDataArrayByStr(n):(console.log("获取房间信息JSON数据错误2"),null)}return console.log("获取房间信息数据错误"),null},n.toast=function(o){s("Canvas")&&s("Canvas").getComponent(m)?s("Canvas").getComponent(m).toast(o):console.log("没有找到toast组件,直接打印消息: "+o)},n.sendToClient=function(o){this.room.sendToClient({type:1,msg:o})},o}()).ins=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/NewComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,o,c;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,c=n.Component}],execute:function(){var r;t._RF.push({},"9d5bfDr0U9PornUhIvmBRCA","NewComponent",void 0);var i=o.ccclass;o.property,n("NewComponent",i("NewComponent")(r=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var o=t.prototype;return o.start=function(){var n={client:null,room:null,group:null,player:null};window.GOBE.Logger.level=window.GOBE.LogLevel.INFO,n.client=new window.GOBE.Client({appId:"101*****795",openId:"258*****049",clientId:"382*****115",clientSecret:"C1BD67*****52DD13",accessToken:"3AC36D*****2B428E",cerPath:"{cerPath}"}),n.client.onInitResult((function(n){})),n.client.init().then((function(n){n.playerId})).catch((function(n){}))},o.update=function(n){},t}(c))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/ObstaclesComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts"],(function(o){var t,e,i,s,n;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,i=o._decorator,s=o.UITransform},function(o){n=o.default}],execute:function(){var r,d;e._RF.push({},"8e566LtF6JAKI4yO9fTDQtn","ObstaclesComp",void 0);var l=i.ccclass,h=(i.property,i.requireComponent);i.executionOrder,o("ObstaclesComp",l("ObstaclesComp")(r=h(s)(((d=function(o){function e(){for(var t,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(t=o.call.apply(o,[this].concat(i))||this).uiTransform=null,t}return t(e,o),e.prototype.onLoad=function(){this.uiTransform=this.getComponent(s);var o=this.uiTransform.width,t=this.uiTransform.height,i=[1e4,1e4,1e4,1e4];i[0]=this.node.getWorldPosition().x-o/2,i[1]=this.node.getWorldPosition().y+t/2,i[2]=this.node.getWorldPosition().x+o/2,i[3]=this.node.getWorldPosition().y+t/2,e.obs.push(i);var n=[1e4,1e4,1e4,1e4];n[0]=this.node.getWorldPosition().x-o/2,n[1]=this.node.getWorldPosition().y-t/2,n[2]=this.node.getWorldPosition().x+o/2,n[3]=this.node.getWorldPosition().y-t/2,e.obs.push(n);var r=[1e4,1e4,1e4,1e4];r[0]=this.node.getWorldPosition().x-o/2,r[1]=this.node.getWorldPosition().y+t/2,r[2]=this.node.getWorldPosition().x-o/2,r[3]=this.node.getWorldPosition().y-t/2,e.obs.push(r);var d=[1e4,1e4,1e4,1e4];d[0]=this.node.getWorldPosition().x+o/2,d[1]=this.node.getWorldPosition().y+t/2,d[2]=this.node.getWorldPosition().x+o/2,d[3]=this.node.getWorldPosition().y-t/2,e.obs.push(d)},e}(n)).obs=[],r=d))||r)||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/PlatfromSwitchCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts","./RapierPlatformCtrl.ts","./GameHelper.ts"],(function(t){var e,n,o,i,r,c,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){i=t.RapierBaseCollider},function(t){r=t.default},function(t){c=t.RapierPlatformCtrl},function(t){a=t.default}],execute:function(){var l;n._RF.push({},"0a7ad0JtpVBcbKwhfDmum9D","PlatfromSwitchCtrl",void 0);var s=o.ccclass,h=(o.property,o.requireComponent,o.executionOrder);t("PlatfromSwitchCtrl",s("PlatfromSwitchCtrl")(l=h(2)(l=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).switchers=[],e.coolFrameCount=0,e}e(n,t);var o=n.prototype;return o.onLoad=function(){var t=this;this.node.getComponentsInChildren(i).forEach((function(e){e.node.name.includes("Switch")&&t.switchers.push(e)})),this.switchers.forEach((function(e){e.onEnterCallback=t.onHandEnter.bind(t),e.onStepCallback=t.onStepCallback.bind(t)})),this.renderSwitch()},o.onStepCallback=function(){this.coolFrameCount>0&&this.coolFrameCount--},o.onHandEnter=function(t,e){e.node.name.includes("Hand")&&(c.isStop=!c.isStop,this.renderSwitch(),a.playMusic(this.node,"yili3",!1),this.coolFrameCount=40*this.switchers.length)},o.renderSwitch=function(){this.switchers.forEach((function(t){c.isStop?(t.node.getChildByName("On").active=!0,t.node.getChildByName("Off").active=!1):(t.node.getChildByName("On").active=!1,t.node.getChildByName("Off").active=!0)}))},n}(r))||l)||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerInfoPannelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePannelController.ts","./FirstSceneCtrl.ts","./GameHelper.ts","./DecorationSelectPannelCtrl.ts"],(function(e){var n,a,t,l,o,r,s,P,c,i;return{setters:[function(e){n=e.inheritsLoose},function(e){a=e.cclegacy,t=e._decorator,l=e.find,o=e.Label,r=e.Sprite},function(e){s=e.BasePannelController},function(e){P=e.FirstSceneCtrl},function(e){c=e.default},function(e){i=e.DecorationSelectPannelCtrl}],execute:function(){var y;a._RF.push({},"8c908QSOE9E9qNnG/s2fuhz","PlayerInfoPannelCtrl",void 0);var f=t.ccclass;t.property,e("PlayerInfoPannelCtrl",f("PlayerInfoPannelCtrl")(y=function(e){function a(){for(var n,a=arguments.length,t=new Array(a),l=0;l<a;l++)t[l]=arguments[l];return(n=e.call.apply(e,[this].concat(t))||this).isSelectPlayer1=!0,n}n(a,e);var t=a.prototype;return t.start=function(){var e=this;this.setButtonEvent(l("Canvas/TopFrame/Head"),(function(){e.show()})),this.setButtonEvent(l("Canvas/PlayerInfoPannel/Pannel/Cap"),(function(){e.node.getComponent(i).show(1,e.onSelected.bind(e))})),this.setButtonEvent(l("Canvas/PlayerInfoPannel/Pannel/Glass"),(function(){e.node.getComponent(i).show(2,e.onSelected.bind(e))})),this.setButtonEvent(l("Canvas/PlayerInfoPannel/Pannel/Player1/Select"),(function(){e.isSelectPlayer1=!0,e.renderData()})),this.setButtonEvent(l("Canvas/PlayerInfoPannel/Pannel/Player2/Select"),(function(){e.isSelectPlayer1=!1,e.renderData()}))},t.onSelected=function(e,n){console.log(e+"---------onSelected--------"+n),1==e?this.isSelectPlayer1?P.playerInfo.setCap1(n):P.playerInfo.setCap2(n):2==e&&(this.isSelectPlayer1?P.playerInfo.setGlass1(n):P.playerInfo.setGlass2(n)),P.playerInfo.saveInfo(this),this.renderData()},t.show=function(){this.showPannel(l("Canvas/PlayerInfoPannel"),!0,!0),this.renderData()},t.renderData=function(){l("Canvas/PlayerInfoPannel/Pannel/Nickname").getComponent(o).string="昵称: "+P.playerInfo.nickName,l("Canvas/PlayerInfoPannel/Pannel/PlayerId").getComponent(o).string="ID   : "+P.playerInfo.account,this.isSelectPlayer1?(l("Canvas/PlayerInfoPannel/Pannel/Player1/Select").getComponent(r).enabled=!0,l("Canvas/PlayerInfoPannel/Pannel/Player2/Select").getComponent(r).enabled=!1):(l("Canvas/PlayerInfoPannel/Pannel/Player1/Select").getComponent(r).enabled=!1,l("Canvas/PlayerInfoPannel/Pannel/Player2/Select").getComponent(r).enabled=!0);var e=l("Canvas/PlayerInfoPannel/Pannel/Player1/Cap").getComponent(r);P.playerInfo.cap1>0?(e.node.active=!0,c.getImageByPath("caps/cap"+P.playerInfo.cap1,e)):e.node.active=!1;var n=l("Canvas/PlayerInfoPannel/Pannel/Player1/Glass").getComponent(r);P.playerInfo.glass1>0?(n.node.active=!0,c.getImageByPath("glasses/glass"+P.playerInfo.glass1,n)):n.node.active=!1;var a=l("Canvas/PlayerInfoPannel/Pannel/Player2/Cap").getComponent(r);P.playerInfo.cap2>0?(a.node.active=!0,c.getImageByPath("caps/cap"+P.playerInfo.cap2,a)):a.node.active=!1;var t=l("Canvas/PlayerInfoPannel/Pannel/Player2/Glass").getComponent(r);P.playerInfo.glass2>0?(t.node.active=!0,c.getImageByPath("glasses/glass"+P.playerInfo.glass2,t)):t.node.active=!1},t.hide=function(){this.hidePannel(l("Canvas/PlayerInfoPannel"))},a}(s))||y);a._RF.pop()}}}));

System.register("chunks:///_virtual/ProcessCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameCtrl.ts","./RapierBaseCollider.ts","./SpiderCtrl.ts","./BaseComponent.ts","./ResultPannelCtrl.ts","./NetIns.ts","./GameHelper.ts"],(function(e){var t,i,n,s,o,r,a,d,l,h,g,u,c,p;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,s=e.director,o=e.find,r=e.UITransform},function(e){a=e.GameCtrl,d=e.GameMode},function(e){l=e.RapierBaseCollider},function(e){h=e.SpiderCtrl},function(e){g=e.default},function(e){u=e.ResultPannelCtrl},function(e){c=e.NetIns},function(e){p=e.default}],execute:function(){var y,m;i._RF.push({},"5c35cvazm1IipH06kVn+vH5","ProcessCtrl",void 0);var f=n.ccclass,C=(n.property,n.requireComponent);e("ProcessCtrl",f("ProcessCtrl")(y=C(a)(((m=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).gc=void 0,t.player1=void 0,t.player2=void 0,t.isGameFinished=!1,t.inEndPoolCount=50,t.showResultPannelFrameCount=80,t.bg=void 0,t.sceneIndex=0,t}t(i,e);var n=i.prototype;return n.onLoad=function(){var e=s.getScene().name;this.sceneIndex=parseInt(e.split("_")[1]),this.bg=o("Bg").getComponent(r),this.gc=this.node.getComponent(a),this.player1=this.gc.spider1.getComponent(h),this.player2=this.gc.spider2.getComponent(h)},n.onStep=function(){if(this.showResultPannelFrameCount<80&&this.showResultPannelFrameCount--,0==this.showResultPannelFrameCount&&a.gameMode==d.net&&(c.getIns().stopSyncFrame(),p.exchangeScene("FirstScene")),this.player1.isDead){if(this.player1.deadCoolTime<=0)return void this.player1.revive();this.player1.deadCoolTime--}if(this.player2.isDead){if(this.player2.deadCoolTime<=0)return void this.player2.revive();this.player2.deadCoolTime--}!this.player1.isDead&&this.isPlayerOutOfEdge(this.player1,0)&&this.player1.dead(20,!1),!this.player2.isDead&&this.isPlayerOutOfEdge(this.player2,0)&&this.player2.dead(20,!1),this.isAllPlayerArrivedEnd()&&!this.isGameFinished?this.inEndPoolCount<=0?(this.toast("到达终点拉,胜利!!!"),this.showResult(!0)):this.inEndPoolCount--:this.inEndPoolCount=50},n.showResult=function(e){if(!this.isGameFinished){this.isGameFinished=!0;var t=this.player1.deadTimeCount,i=this.player2.deadTimeCount,n=this.getComponent(a),o=n.frameIndex/30;a.gameMode==d.net&&(o=n.frameIndex/20);var r=Math.floor(o/60),l=Math.floor(o%60),h=r+"分"+l+"秒";r<=0&&(h=l+"秒"),this.node.getComponent(u).show(h,t,i,e),e&&("Scene_Test"!=s.getScene().name?this.setInt(s.getScene().name,1):!p.isForTest&&p.sceneNameStr&&this.setInt("Scene_"+p.sceneNameStr,1)),this.showResultPannelFrameCount--}},n.isPlayerOutOfEdge=function(e,t){return this.isNodeOutOfEdge(e.node,t)},n.isNodeOutOfEdge=function(e,t){var n=e.getComponent(l).rigidBody.translation();return i.edgeX=this.bg.node.getWorldPosition().x+(this.bg.width/2-t),i.edge_X=this.bg.node.getWorldPosition().x-(this.bg.width/2-t),i.edgeY=this.bg.node.getWorldPosition().y+(this.bg.height/2-t),i.edge_Y=this.bg.node.getWorldPosition().y-(this.bg.height/2-t),!e.getComponent(h).isShooted&&(n.y<i.edge_Y||(n.y>i.edgeY||(n.x<i.edge_X||n.x>i.edgeX)))},n.isAllPlayerArrivedEnd=function(){return!(!this.player1.isInEndTigger||!this.player2.isInEndTigger||!this.player1.hasEndKey&&!this.player2.hasEndKey)},i}(g)).edgeX=5e3,m.edge_X=-5e3,m.edgeY=5e3,m.edge_Y=-5e3,y=m))||y)||y);i._RF.pop()}}}));

System.register("chunks:///_virtual/RapierBalloonGroupCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts","./GameHelper.ts"],(function(n){var e,t,o,i,r,a;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator},function(n){i=n.RapierBaseCollider},function(n){r=n.default},function(n){a=n.default}],execute:function(){var c;t._RF.push({},"e0412Y/6k5C24UtYaZyk+Pb","RapierBalloonGroupCtrl",void 0);var l=o.ccclass,s=(o.property,o.requireComponent,o.executionOrder);n("RapierBalloonGroupCtrl",l("RapierBalloonGroupCtrl")(c=s(2)(c=function(n){function t(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))||this).balloons=[],e.switchers=[],e.isSwitchOn=!1,e.coolFrameCount=0,e}e(t,n);var o=t.prototype;return o.onLoad=function(){var n=this;this.node.getComponentsInChildren(i).forEach((function(e){e.node.name.includes("Balloon")?n.balloons.push(e):e.node.name.includes("Switch")&&n.switchers.push(e)})),this.switchers.forEach((function(e){e.onEnterCallback=n.onHandEnter.bind(n),e.onStepCallback=n.onStepCallback.bind(n)})),this.renderSwitch()},o.onStepCallback=function(){this.coolFrameCount>0&&this.coolFrameCount--},o.onHandEnter=function(n,e){e.node.name.includes("Hand")&&(this.isSwitchOn=!this.isSwitchOn,this.renderSwitch(),a.playMusic(this.node,"yili3",!1),this.coolFrameCount=40*this.switchers.length)},o.renderSwitch=function(){var n=this;this.balloons.forEach((function(e){e.rigidBody.wakeUp(),n.isSwitchOn?e.rigidBody.setGravityScale(.5,!0):e.rigidBody.setGravityScale(-1,!0)})),this.switchers.forEach((function(e){n.isSwitchOn?(e.node.getChildByName("On").active=!0,e.node.getChildByName("Off").active=!1):(e.node.getChildByName("On").active=!1,e.node.getChildByName("Off").active=!0)}))},t}(r))||c)||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/RapierBaseCollider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./rapier.cjs.mjs_cjs=&original=.js","./EventBus.ts","./RapierWorld.ts","./GameCtrl.ts","./GameHelper.ts","./rapier.cjs.js"],(function(i){var e,t,o,n,s,r,l,a,d,c,u,h,p,y,g,C,f,m,b,v;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){s=i.cclegacy,r=i._decorator,l=i.Enum,a=i.CCInteger,d=i.CCFloat,c=i.v3,u=i.Node,h=i.v2,p=i.AudioSource,y=i.Component},null,function(i){g=i.default,C=i.EventType},function(i){f=i.RapierWorld},function(i){m=i.GameCtrl},function(i){b=i.default},function(i){v=i.default}],execute:function(){var R,B,A,I,w,F,E,S,k,T,W,x,D,N,z,L,P,_,M,G,H,Q,j,O,V,Z,U,Y,q,J;s._RF.push({},"0ab04Wh+ZxKYoLDdAVJ5nwa","RapierBaseCollider",void 0);var K=r.ccclass,X=r.property;i("RapierBaseCollider",(R=K("RapierBaseCollider"),B=X({type:l(v.RigidBodyType)}),A=X(Boolean),I=X(Boolean),w=X(Boolean),F=X(Boolean),E=X(Boolean),S=X(Boolean),k=X(a),T=X(d),W=X(d),x=X(d),D=X({type:l(v.CoefficientCombineRule)}),N=X(Boolean),R(((J=function(i){function e(){for(var e,t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return e=i.call.apply(i,[this].concat(s))||this,o(e,"rigidBodyType",P,n(e)),o(e,"isFixRotation",_,n(e)),o(e,"isFixTranslation",M,n(e)),o(e,"isRigidbody",G,n(e)),o(e,"isTigger",H,n(e)),o(e,"isCCD",Q,n(e)),o(e,"isComputeImpulse",j,n(e)),o(e,"dampNum",O,n(e)),o(e,"mass",V,n(e)),o(e,"density",Z,n(e)),o(e,"frictionNum",U,n(e)),o(e,"frictionCombineRule",Y,n(e)),e.collider=void 0,e.rigidBody=void 0,e.rapierWorld=void 0,e.eventBusStepId=void 0,e.eventBusCollisonId=void 0,e.handles=void 0,e.colliders=void 0,e.onEnterCallback=void 0,e.onQuitCallback=void 0,e.onStepCallback=void 0,e.permeter=57.2958,e.savePosition=void 0,e.saveRotation=void 0,e.isFixedByRope=!1,o(e,"isDynamicAdd",q,n(e)),e.collisonSet=new Set,e.onPlatformStepCallback=void 0,e.playerFriction=2,e.stepCount=0,e.lastFramePosY=void 0,e.isDeleteFromWorld=!1,e}t(e,i);var s=e.prototype;return s.load=function(){console.log("----------load_bug-----------")},s.init=function(){this.handles=[],this.colliders=[],this.eventBusStepId=g.getInstance().sub(this.onStep,C.step,this),this.eventBusCollisonId=g.getInstance().sub(this.onCollison,C.collison,this),this.rapierWorld=f.getIns(),this.isRigidbody&&this.initRigidbody()},s.setCollisonGroup=function(i){this.node.name.includes("RopeIns")?i.setCollisionGroups(524289):this.node.name.includes("ZhiZhu")?i.setCollisionGroups(655362):this.node.name.includes("AnchorNode")?i.setCollisionGroups(786436):i.setCollisionGroups(983048)},s.initGroupCollider=function(i){i.setActiveEvents(v.ActiveEvents.COLLISION_EVENTS),this.isComputeImpulse&&i.setActiveHooks(v.ActiveHooks.FILTER_CONTACT_PAIRS),i.setFriction(this.frictionNum),i.setDensity(this.density),i.setFrictionCombineRule(this.frictionCombineRule);var t=this.rapierWorld.world.createCollider(i,this.rigidBody),o=t.handle;this.handles.push(o),this.colliders.push(t),e.allWroldColliders.set(o,this),this.setCollisonGroup(t)},s.initCollider=function(i){if(i.setActiveEvents(v.ActiveEvents.COLLISION_EVENTS),this.isComputeImpulse&&i.setActiveHooks(v.ActiveHooks.FILTER_CONTACT_PAIRS),this.node.name.includes("Land")?i.setFriction(2):this.node.name.includes("ZhiZhu")?i.setFriction(this.playerFriction):i.setFriction(.02),this.node.name.includes("Land-Cube-Color")&&i.setFriction(.2),this.node.name.includes("Land-Cube-Normal")&&i.setFriction(1),this.node.name.includes("Land-Cube-Time")&&i.setFriction(1),this.node.name.includes("Stone-Short")&&i.setFriction(1),this.node.name.includes("Stone-Long")&&i.setFriction(1),i.setDensity(this.density),i.setFrictionCombineRule(v.CoefficientCombineRule.Min),i.setRestitution(0),i.setRestitutionCombineRule(v.CoefficientCombineRule.Average),this.isRigidbody)this.collider=this.rapierWorld.world.createCollider(i,this.rigidBody);else{var t=this.node.worldPosition;i.setTranslation(t.x,t.y),i.setRotation(this.getAllEulerAngles(this.node,0)/this.permeter),this.collider=this.rapierWorld.world.createCollider(i),this.collider.setSensor(this.isTigger)}var o=this.collider.handle;this.setCollisonGroup(this.collider),this.handles.push(o),e.allWroldColliders.set(o,this)},s.initRigidbody=function(){var i=this.node.worldPosition,e=new v.RigidBodyDesc(this.rigidBodyType).setTranslation(i.x,i.y);this.isFixRotation&&e.lockRotations(),this.isFixTranslation&&e.lockTranslations();var t=this.getAllEulerAngles(this.node,0)/this.permeter;e.setRotation(t),e.setAdditionalMass(this.mass),e.setCcdEnabled(this.isCCD),this.rigidBody=this.rapierWorld.world.createRigidBody(e),this.saveStatus(0)},s.saveStatus=function(i){var e=this.rigidBody.translation();this.savePosition=c(e.x,e.y+i,0),this.saveRotation=this.rigidBody.rotation()},s.getAllEulerAngles=function(i,e){var t=i.eulerAngles.z+e;return i.parent&&i.parent instanceof u?this.getAllEulerAngles(i.parent,t):t},s.onStep=function(i,e){if(this.stepCount++,this.wakeUp(),this.isRigidbody){var t=this.rigidBody.translation();this.lastFramePosY=t.y,this.node.worldPosition=c(t.x,t.y,0);var o=this.rigidBody.rotation();this.node.setWorldRotationFromEuler(0,0,o*this.permeter)}else{var n=this.collider.translation();this.node.worldPosition=c(n.x,n.y,0);var s=this.collider.rotation();this.node.setWorldRotationFromEuler(0,0,s*this.permeter)}this.onStepCallback&&this.onStepCallback(),this.onPlatformStepCallback&&this.onPlatformStepCallback()},s.onCollison=function(i,e){var t=i.object.handle1,o=i.object.handle2,n=i.object.started;(this.checkIsArrayContainsHandle(t)||this.checkIsArrayContainsHandle(o))&&(n?this.checkIsArrayContainsHandle(t)?this.onEnter(o):this.onEnter(t):this.checkIsArrayContainsHandle(t)?this.onQuit(o):this.onQuit(t))},s.checkIsArrayContainsHandle=function(i){var e=!1;return this.handles.forEach((function(t){t==i&&(e=!0)})),e},s.wakeUp=function(){this.rigidBody&&this.rigidBodyType==v.RigidBodyType.Dynamic&&this.rigidBody.wakeUp()},s.rayQuery2=function(i,t){var o=null,n=i.rigidBody.translation(),s=t.rigidBody.translation(),r=Math.abs(n.x-s.x),l=Math.abs(n.y-s.y),a=Math.sqrt(r*r+l*l),d=Math.atan2(s.y-n.y,s.x-n.x)+Math.PI/2;return f.getIns().world.intersectionsWithShape(h((n.x+s.x)/2,(n.y+s.y)/2),d,new v.Cuboid(20,a/2),(function(n){var s=e.allWroldColliders.get(n.handle);return!s||(!(s.node.name!=i.node.name&&s.node.name!=t.node.name&&s.isRigidbody&&!s.node.name.includes("RopeIns"))||(o=s,!0))})),o},s.rayQuery=function(i,t){console.log("dis:"+t+" ray",i);var o=f.getIns().world.castRay(i,t,!0,v.QueryFilterFlags.EXCLUDE_DYNAMIC);if(null!=o){var n=i.pointAt(o.timeOfImpact);console.log("Collider",o.collider,"hit at point",n);var s=e.allWroldColliders.get(o.collider.handle);return s||(console.log("Collider_rayQuery1"),null)}return console.log("Collider_rayQuery2"),null},s.onEnter=function(i){var t=e.allWroldColliders.get(i);t&&this.collisonSet.add(t),this.onEnterCallback&&this.onEnterCallback(this,t)},s.onQuit=function(i){var t=e.allWroldColliders.get(i);t&&this.collisonSet.delete(t),this.onQuitCallback&&this.onQuitCallback(this,t)},s.setSpeed=function(i){this.isRigidbody?this.rigidBody&&this.rigidBody.setLinvel(new v.Vector2(i.x,i.y),!0):console.log("--------非刚体无法设置速度-"+this.node.name+"--------")},s.addForce=function(i,e){this.isRigidbody?this.rigidBody&&this.rigidBody.applyImpulse(new v.Vector2(1e3*i,1e3*e),!0):console.log("--------非刚体无法施加力"+this.node.name+"--------")},s.setDir=function(i){this.isRigidbody?this.rigidBody&&this.rigidBody.setRotation(i,!0):console.log("--------非刚体无法设置角速度-"+this.node.name+"--------")},s.deleteFromWorld=function(){var i=this;this.isDeleteFromWorld=!0,this.handles.forEach((function(i){e.allWroldColliders.delete(i)})),this.colliders.forEach((function(e){i.rapierWorld.world.removeCollider(e,!0)})),g.getInstance().unSub(this.eventBusStepId),g.getInstance().unSub(this.eventBusCollisonId),this.isRigidbody&&this.rapierWorld.world.removeRigidBody(this.rigidBody),this.collider&&this.rapierWorld.world.removeCollider(this.collider,!0)},s.setAddMass=function(i){this.rigidBody.setAdditionalMass(i,!0)},s.playAudioEffectByNode=function(i,e,t){m.isCatchingFrame||b.playMusic(this.node,i,e,t)},s.stopAudioEffectByNode=function(){this.node.getComponent(p)&&this.node.getComponent(p).stop()},e}(y)).allWroldColliders=void 0,P=e((L=J).prototype,"rigidBodyType",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.RigidBodyType.Dynamic}}),_=e(L.prototype,"isFixRotation",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=e(L.prototype,"isFixTranslation",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=e(L.prototype,"isRigidbody",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),H=e(L.prototype,"isTigger",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=e(L.prototype,"isCCD",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=e(L.prototype,"isComputeImpulse",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=e(L.prototype,"dampNum",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),V=e(L.prototype,"mass",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=e(L.prototype,"density",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=e(L.prototype,"frictionNum",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Y=e(L.prototype,"frictionCombineRule",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.CoefficientCombineRule.Min}}),q=e(L.prototype,"isDynamicAdd",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=L))||z));s._RF.pop()}}}));

System.register("chunks:///_virtual/RapierBaseJoint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierWorld.ts","./RapierBaseCollider.ts"],(function(e){var i,r,n,o,t,l,a,c,u,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){t=e.cclegacy,l=e._decorator,a=e.Node,c=e.Component},function(e){u=e.RapierWorld},function(e){p=e.RapierBaseCollider}],execute:function(){var s,d,f,h,b,y,m,B,R,g,v,w,z;t._RF.push({},"46098lCfAxLHZTr8xVS9R4h","RapierBaseJoint",void 0);var A=l.ccclass,D=l.property;e("RapierBaseJoint",(s=A("RapierBaseJoint"),d=D(Boolean),f=D(p),h=D(p),b=D(a),y=D(a),s((R=i((B=function(e){function i(){for(var i,r=arguments.length,t=new Array(r),l=0;l<r;l++)t[l]=arguments[l];return i=e.call.apply(e,[this].concat(t))||this,n(i,"isDynamicAdd",R,o(i)),n(i,"colliderA",g,o(i)),n(i,"colliderB",v,o(i)),n(i,"anchor1",w,o(i)),n(i,"anchor2",z,o(i)),i.joint=void 0,i}r(i,e);var t=i.prototype;return t.load=function(){},t.free=function(e){e||(this.colliderB=null,this.anchor2=null),this.joint&&u.getIns().world.removeImpulseJoint(this.joint,!1)},i}(c)).prototype,"isDynamicAdd",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=i(B.prototype,"colliderA",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=i(B.prototype,"colliderB",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=i(B.prototype,"anchor1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(B.prototype,"anchor2",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=B))||m));t._RF.pop()}}}));

System.register("chunks:///_virtual/RapierBox2DCollider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./rapier.cjs.mjs_cjs=&original=.js","./RapierBaseCollider.ts","./rapier.cjs.js"],(function(i){var e,o,r,t,n,s;return{setters:[function(i){e=i.inheritsLoose},function(i){o=i.cclegacy,r=i._decorator,t=i.UITransform},null,function(i){n=i.RapierBaseCollider},function(i){s=i.default}],execute:function(){var l;o._RF.push({},"42864BhorZIQ47ykEkZAmlK","RapierBox2DCollider",void 0);var c=r.ccclass,a=(r.property,r.requireComponent);i("RapierBox2DCollider",c("RapierBox2DCollider")(l=a(t)(l=function(i){function o(){return i.apply(this,arguments)||this}e(o,i);var r=o.prototype;return r.onLoad=function(){this.isDynamicAdd||this.load()},r.load=function(){this.isCCD=!0,this.init();var i,e=this.getComponent(t);i=s.ColliderDesc.cuboid(e.contentSize.width/2,e.contentSize.height/2),this.initCollider(i)},o}(n))||l)||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/RapierFix2DJoint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./rapier.cjs.mjs_cjs=&original=.js","./RapierBaseJoint.ts","./RapierWorld.ts","./rapier.cjs.js"],(function(i){var o,t,e,r,n,l,s;return{setters:[function(i){o=i.inheritsLoose},function(i){t=i.cclegacy,e=i._decorator,r=i.Node},null,function(i){n=i.RapierBaseJoint},function(i){l=i.RapierWorld},function(i){s=i.default}],execute:function(){var c;t._RF.push({},"42709Cg6QxCR4VzGwvqDUGc","RapierFix2DJoint",void 0);var a=e.ccclass,d=(e.property,e.executionOrder);i("RapierFix2DJoint",a("RapierFix2DJoint")(c=d(1)(c=function(i){function t(){return i.apply(this,arguments)||this}o(t,i);var e=t.prototype;return e.onLoad=function(){this.isDynamicAdd||this.load()},e.load=function(){this.colliderA&&this.colliderB&&this.colliderA.rigidBody&&this.colliderB.rigidBody?this.loadByPos(this.anchor1.position,this.anchor2.position):console.log("刚体不存在,无法连接")},e.loadByPos=function(i,o){if(this.colliderA&&this.colliderB&&this.colliderA.rigidBody&&this.colliderB.rigidBody){var t=s.JointData.fixed(i,0,o,0);this.joint=l.getIns().world.createImpulseJoint(t,this.colliderA.rigidBody,this.colliderB.rigidBody,!0),console.log("------RapierFix2DJoint------")}else console.log("刚体不存在,无法连接")},e.getAllEulerAngles=function(i,o){var t=i.eulerAngles.z+o;return i.parent&&i.parent instanceof r?this.getAllEulerAngles(i.parent,t):t},t}(n))||c)||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/RapierGroupCollider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./rapier.cjs.mjs_cjs=&original=.js","./rapier.cjs.js"],(function(e){var i,r,o,t,n,l;return{setters:[function(e){i=e.inheritsLoose},function(e){r=e.cclegacy,o=e._decorator,t=e.UITransform},function(e){n=e.RapierBaseCollider},null,function(e){l=e.default}],execute:function(){var s;r._RF.push({},"80207tCblJK1qvMhJv+RsTq","RapierGroupCollider",void 0);var a=o.ccclass,c=(o.property,o.requireComponent);e("RapierGroupCollider",a("RapierGroupCollider")(s=c(t)(s=function(e){function r(){return e.apply(this,arguments)||this}i(r,e);var o=r.prototype;return o.onLoad=function(){this.isDynamicAdd||this.load()},o.load=function(){var e=this;this.init(),this.getComponentsInChildren(t).forEach((function(i){var r=null;r=i.width!=i.height?l.ColliderDesc.cuboid(i.width/2*i.node.scale.x,i.height/2*i.node.scale.x):l.ColliderDesc.ball(i.width/2*i.node.scale.x);var o=i.node.position;r.setTranslation(o.x,o.y),r.setRotation(e.getAllEulerAngles(i.node,0)/e.permeter),e.initGroupCollider(r)}))},r}(n))||s)||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/RapierLightningCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts"],(function(t){var i,e,n,h,s,o,r,a,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,h=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,r=t.Enum},function(t){a=t.RapierBaseCollider},function(t){c=t.default}],execute:function(){var d,g,l,p,m,u,L;s._RF.push({},"c2ec2dVtIxKq56COavI+imp","RapierLightningCtrl",void 0);var f=o.ccclass,y=o.property,C=o.executionOrder,I=o.requireComponent,v=t("LightningStep",function(t){return t[t.one=0]="one",t[t.two=1]="two",t[t.three=2]="three",t}({}));t("RapierLightningCtrl",(d=f("RapierLightningCtrl"),g=I(a),l=C(2),p=y({type:r(v)}),d(m=g(m=l((L=i((u=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return(i=t.call.apply(t,[this].concat(s))||this).rc=void 0,i.gc=void 0,i.isLight=!0,i.index=0,n(i,"step",L,h(i)),i}e(i,t);var s=i.prototype;return s.onLoad=function(){this.rc=this.getComponent(a),this.rc.onPlatformStepCallback=this.onPlatformStep.bind(this)},s.onPlatformStep=function(){this.index++,this.index%600>400?this.index%600==401&&(this.step==v.three?this.setLight():this.cancelLight()):this.index%600>200?this.index%600==201&&(this.step==v.two?this.setLight():this.cancelLight()):this.index%600==1&&(this.step==v.one?this.setLight():this.cancelLight()),this.isLight&&(this.index%60==10?this.showOrHideLightImage(3):this.index%60==20?this.showOrHideLightImage(5):this.index%60==30?this.showOrHideLightImage(7):this.index%60==40?this.showOrHideLightImage(3):this.index%60==50?this.showOrHideLightImage(5):this.index%60==0&&this.showOrHideLightImage(7))},s.setLight=function(){this.isLight=!0,this.rc.playAudioEffectByNode("lightning1",!0,.03)},s.cancelLight=function(){this.showOrHideLightImage(1),this.isLight=!1,this.rc.stopAudioEffectByNode()},s.showOrHideLightImage=function(t){this.node.getChildByName("Item3").active=!1,this.node.getChildByName("Item4").active=!1,this.node.getChildByName("Item5").active=!1,this.node.getChildByName("Item6").active=!1,this.node.getChildByName("Item7").active=!1,this.node.getChildByName("Item8").active=!1,t<3||(this.node.getChildByName("Item"+t).active=!0,this.node.getChildByName("Item"+(t+1)).active=!0)},i}(c)).prototype,"step",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.one}}),m=u))||m)||m)||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/RapierLimitPlatformCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./RapierPlatformCtrl.ts"],(function(e){var r,t,i,o,n,a,l,u,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,l=e.Label},function(e){u=e.RapierBaseCollider},function(e){c=e.RapierPlatformCtrl}],execute:function(){var m,s,p,d,f,h,b;n._RF.push({},"29897ynYb9KaZpJ0Vmddv+O","RapierLimitPlatformCtrl",void 0);var y=a.ccclass,C=a.property,N=a.requireComponent,R=a.executionOrder;e("RapierLimitPlatformCtrl",(m=y("RapierLimitPlatformCtrl"),s=N(u),p=R(2),d=C(Number),m(f=s(f=p((b=r((h=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r=e.call.apply(e,[this].concat(n))||this,i(r,"maxNumber",b,o(r)),r}t(r,e);var n=r.prototype;return n.onLoad=function(){this.isDynamicAdd||this.load()},n.load=function(){var r=this;e.prototype.load.call(this),this.rc.onPlatformStepCallback=function(){var e=0;r.node.getComponent(u).collisonSet.forEach((function(r){!r.isDeleteFromWorld&&r.isRigidbody&&r.node&&r.node.name.includes("ZhiZhu")&&e++})),e>r.maxNumber&&(e=r.maxNumber),e==r.maxNumber&&r.onPlatformStep.bind(r)(),r.renderNum(e)}},n.renderNum=function(e){this.node.getChildByName("Number").getComponent(l).string=this.maxNumber-e+""},r}(c)).prototype,"maxNumber",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),f=h))||f)||f)||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/RapierMesh2DCollider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./rapier.cjs.mjs_cjs=&original=.js","./rapier.cjs.js"],(function(e){var i,r,o,t,n,s;return{setters:[function(e){i=e.inheritsLoose},function(e){r=e.cclegacy,o=e._decorator,t=e.PolygonCollider2D},function(e){n=e.RapierBaseCollider},null,function(e){s=e.default}],execute:function(){var l;r._RF.push({},"bb92a81En9JpYNICgemBSv5","RapierMesh2DCollider",void 0);var a=o.ccclass,c=(o.property,o.requireComponent);e("RapierMesh2DCollider",a("RapierMesh2DCollider")(l=c(t)(l=function(e){function r(){return e.apply(this,arguments)||this}i(r,e);var o=r.prototype;return o.onLoad=function(){this.isDynamicAdd||this.load()},o.load=function(){this.isCCD=!0,this.init();for(var e=this.getComponent(t).points,i=new Float32Array(2*e.length+2),r=0;r<e.length;r++)i[2*r]=e[r].x*this.node.scale.x,i[2*r+1]=e[r].y*this.node.scale.y;var o=s.ColliderDesc.convexHull(i);this.initCollider(o)},r}(n))||l)||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/RapierPlatformCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./rapier.cjs.mjs_cjs=&original=.js","./rapier.cjs.js"],(function(i){var t,o,r,e,s,n,l,a,h,d,m;return{setters:[function(i){t=i.applyDecoratedDescriptor,o=i.inheritsLoose,r=i.initializerDefineProperty,e=i.assertThisInitialized},function(i){s=i.cclegacy,n=i._decorator,l=i.Enum,a=i.UITransform,h=i.Component},function(i){d=i.RapierBaseCollider},null,function(i){m=i.default}],execute:function(){var p,c,y,u,g,f,b,B,P,S,C,x,w,v,L,R;s._RF.push({},"0b16daNrY9INJuu5x4Vjjx7","RapierPlatformCtrl",void 0);var A=n.ccclass,z=n.property,N=n.requireComponent,j=n.executionOrder,T=i("PlatformType",function(i){return i[i.horizontal=0]="horizontal",i[i.vertical=1]="vertical",i[i.rotate=2]="rotate",i}({}));i("RapierPlatformCtrl",(p=A("RapierPlatformCtrl"),c=N(d),y=j(2),u=z(Number),g=z(Number),f=z({type:l(T)}),b=z(Boolean),B=z(Boolean),p(P=c(P=y(((R=function(i){function t(){for(var t,o=arguments.length,s=new Array(o),n=0;n<o;n++)s[n]=arguments[n];return t=i.call.apply(i,[this].concat(s))||this,r(t,"limit",C,e(t)),r(t,"step",x,e(t)),r(t,"type",w,e(t)),r(t,"isCtrledBySwitch",v,e(t)),t.isAdd=!1,t.rc=void 0,t.bornPos=void 0,t.bornRotation=void 0,t.pos=void 0,t.rotation=void 0,t.limitSmall=0,t.limitLarge=0,r(t,"isDynamicAdd",L,e(t)),t}o(t,i);var s=t.prototype;return s.onLoad=function(){this.isDynamicAdd||this.load()},s.load=function(){this.limitSmall=-this.limit,this.limitLarge=this.limit,this.node.getChildByName("S")&&(this.type==T.horizontal?(this.limitSmall=this.node.getChildByName("S").worldPosition.x-this.node.worldPosition.x,this.limitSmall+=this.node.getComponent(a).width/2):this.type==T.vertical&&(this.limitSmall=this.node.getChildByName("S").worldPosition.y-this.node.worldPosition.y,this.limitSmall+=this.node.getComponent(a).height/2),this.limitSmall=Math.round(1e4*this.limitSmall)/1e4),this.node.getChildByName("L")&&(this.type==T.horizontal?(this.limitLarge=this.node.getChildByName("L").worldPosition.x-this.node.worldPosition.x,this.limitLarge-=this.node.getComponent(a).width/2):this.type==T.vertical&&(this.limitLarge=this.node.getChildByName("L").worldPosition.y-this.node.worldPosition.y,this.limitLarge-=this.node.getComponent(a).height/2),this.limitLarge=Math.round(1e4*this.limitLarge)/1e4),console.log("qwerty s "+this.limitSmall+" l "+this.limitLarge),this.rc=this.getComponent(d);var i=this.rc.rigidBody.translation();this.bornPos={x:i.x,y:i.y},this.bornRotation=this.rc.rigidBody.rotation(),this.pos={x:i.x,y:i.y},this.rotation=this.rc.rigidBody.rotation(),this.rc.rigidBodyType!=m.RigidBodyType.Dynamic&&this.rc.rigidBodyType!=m.RigidBodyType.Fixed?(this.rc.onPlatformStepCallback=this.onPlatformStep.bind(this),t.isStop=!1):console.error("物理平台类型错误")},s.onPlatformStep=function(){t.isStop&&this.isCtrledBySwitch||(this.type==T.rotate?(0==this.limit?this.rotation+=this.step:(this.rc.rigidBody.rotation()<=this.bornRotation-this.limit?this.isAdd=!0:this.rc.rigidBody.rotation()>=this.bornRotation+this.limit&&(this.isAdd=!1),this.isAdd?this.rotation+=this.step:this.rotation-=this.step),this.rc.rigidBody.setNextKinematicRotation(this.rotation)):this.type==T.horizontal?(this.rc.rigidBody.translation().x<=this.bornPos.x+this.limitSmall?this.isAdd=!0:this.rc.rigidBody.translation().x>=this.bornPos.x+this.limitLarge&&(this.isAdd=!1),this.isAdd?this.pos.x+=this.step:this.pos.x-=this.step,this.rc.rigidBody.setNextKinematicTranslation(this.pos)):this.type==T.vertical&&(this.rc.rigidBody.translation().y<=this.bornPos.y+this.limitSmall?this.isAdd=!0:this.rc.rigidBody.translation().y>=this.bornPos.y+this.limitLarge&&(this.isAdd=!1),this.isAdd?this.pos.y+=this.step:this.pos.y-=this.step,this.rc.rigidBody.setNextKinematicTranslation(this.pos)))},t}(h)).isStop=!1,C=t((S=R).prototype,"limit",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=t(S.prototype,"step",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),w=t(S.prototype,"type",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.horizontal}}),v=t(S.prototype,"isCtrledBySwitch",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=t(S.prototype,"isDynamicAdd",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=S))||P)||P)||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/RapierRevolute2DJoint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./rapier.cjs.mjs_cjs=&original=.js","./RapierBaseJoint.ts","./RapierWorld.ts","./rapier.cjs.js"],(function(i){var t,e,o,r,n,l,s,a,c,u;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){n=i.cclegacy,l=i._decorator,s=i.CCInteger},null,function(i){a=i.RapierBaseJoint},function(i){c=i.RapierWorld},function(i){u=i.default}],execute:function(){var d,p,h,f,y,g,m,B,R,v;n._RF.push({},"f541ayorUNKPIHt2zYXBfJR","RapierRevolute2DJoint",void 0);var b=l.ccclass,D=l.property,J=l.executionOrder;i("RapierRevolute2DJoint",(d=b("RapierRevolute2DJoint"),p=J(1),h=D(Boolean),f=D(s),y=D(s),d(g=p((B=t((m=function(i){function t(){for(var t,e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return t=i.call.apply(i,[this].concat(n))||this,o(t,"isLimit",B,r(t)),o(t,"limitMin",R,r(t)),o(t,"limitMax",v,r(t)),t}e(t,i);var n=t.prototype;return n.onLoad=function(){this.isDynamicAdd||this.load()},n.load=function(){this.colliderA&&this.colliderB&&this.colliderA.rigidBody&&this.colliderB.rigidBody?this.loadByPos(this.anchor1.position,this.anchor2.position):console.log("刚体不存在,无法连接")},n.loadByPos=function(i,t){if(this.colliderA&&this.colliderB&&this.colliderA.rigidBody&&this.colliderB.rigidBody){var e=u.JointData.revolute(i,t);e.damping=1,e.stiffness=1,this.joint=c.getIns().world.createImpulseJoint(e,this.colliderA.rigidBody,this.colliderB.rigidBody,!0),this.setLimit(),console.log("------RapierRevolute2DJoint------"+t.x+"----"+t.y)}else console.log("刚体不存在,无法连接")},n.setLimit=function(){this.isLimit&&this.joint.setLimits(this.limitMin,this.limitMax)},t}(a)).prototype,"isLimit",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=t(m.prototype,"limitMin",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-31}}),v=t(m.prototype,"limitMax",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 31}}),g=m))||g)||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/RapierRoundBox2DCollider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./rapier.cjs.mjs_cjs=&original=.js","./RapierBaseCollider.ts","./rapier.cjs.js"],(function(i){var o,r,e,t,n,s;return{setters:[function(i){o=i.inheritsLoose},function(i){r=i.cclegacy,e=i._decorator,t=i.UITransform},null,function(i){n=i.RapierBaseCollider},function(i){s=i.default}],execute:function(){var a;r._RF.push({},"2a269m2uftIrJBP4owo0oMr","RapierRoundBox2DCollider",void 0);var l=e.ccclass,u=(e.property,e.requireComponent);i("RapierRoundBox2DCollider",l("RapierRoundBox2DCollider")(a=u(t)(a=function(i){function r(){for(var o,r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return(o=i.call.apply(i,[this].concat(e))||this).radius=12,o}o(r,i);var e=r.prototype;return e.onLoad=function(){this.isDynamicAdd||this.load()},e.load=function(){this.isCCD=!0,this.init();var i,o=this.getComponent(t);i=s.ColliderDesc.roundCuboid(o.contentSize.width/2-this.radius,o.contentSize.height/2-this.radius,this.radius),this.initCollider(i)},r}(n))||a)||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/RapierSphere2DCollider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./rapier.cjs.mjs_cjs=&original=.js","./RapierBaseCollider.ts","./rapier.cjs.js"],(function(e){var i,r,t,o,n,s;return{setters:[function(e){i=e.inheritsLoose},function(e){r=e.cclegacy,t=e._decorator,o=e.UITransform},null,function(e){n=e.RapierBaseCollider},function(e){s=e.default}],execute:function(){var l;r._RF.push({},"9cd3eJo4kBBv5H8CzIams/U","RapierSphere2DCollider",void 0);var a=t.ccclass,c=(t.property,t.requireComponent);e("RapierSphere2DCollider",a("RapierSphere2DCollider")(l=c(o)(l=function(e){function r(){return e.apply(this,arguments)||this}i(r,e);var t=r.prototype;return t.onLoad=function(){this.isDynamicAdd||this.load()},t.load=function(){this.isCCD=!0,this.init();var e,i=this.getComponent(o);e=s.ColliderDesc.ball(i.contentSize.width/2),this.initCollider(e)},r}(n))||l)||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/RapierStaticMesh2DCollider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./rapier.cjs.mjs_cjs=&original=.js","./rapier.cjs.js"],(function(e){var i,t,o,r,n,l;return{setters:[function(e){i=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,r=e.PolygonCollider2D},function(e){n=e.RapierBaseCollider},null,function(e){l=e.default}],execute:function(){var s;t._RF.push({},"173f7VtB/9G14qppXl2jhEI","RapierStaticMesh2DCollider",void 0);var a=o.ccclass,c=(o.property,o.requireComponent);e("RapierStaticMesh2DCollider",a("RapierStaticMesh2DCollider")(s=c(r)(s=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var o=t.prototype;return o.onLoad=function(){this.isDynamicAdd||this.load()},o.load=function(){this.isCCD=!0,this.init();for(var e=this.getComponent(r).points,i=new Float32Array(2*e.length+2),t=0;t<e.length;t++)i[2*t]=e[t].x*this.node.scale.x,i[2*t+1]=e[t].y*this.node.scale.y;i[2*e.length]=e[0].x*this.node.scale.x,i[2*e.length+1]=e[0].y*this.node.scale.y;var o=l.ColliderDesc.polyline(i);this.initCollider(o)},t}(n))||s)||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/RapierStringJoint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./rapier.cjs.mjs_cjs=&original=.js","./RapierBaseJoint.ts","./RapierWorld.ts","./RapierBaseCollider.ts","./rapier.cjs.js"],(function(i){var e,o,r,t,n,l,s,a,c,d,p;return{setters:[function(i){e=i.applyDecoratedDescriptor,o=i.inheritsLoose,r=i.initializerDefineProperty,t=i.assertThisInitialized},function(i){n=i.cclegacy,l=i._decorator,s=i.v2},null,function(i){a=i.RapierBaseJoint},function(i){c=i.RapierWorld},function(i){d=i.RapierBaseCollider},function(i){p=i.default}],execute:function(){var u,h,g,f,y,B,R,b,m,A;n._RF.push({},"30a05LVbrlFkpFNE1WMhUAz","RapierStringJoint",void 0);var P=l.ccclass,v=l.property,J=l.executionOrder;i("RapierStringJoint",(u=P("RapierStringJoint"),h=J(1),g=v(Number),f=v(d),y=v(d),u(B=h((b=e((R=function(i){function e(){for(var e,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return e=i.call.apply(i,[this].concat(n))||this,r(e,"length",b,t(e)),r(e,"colliderA",m,t(e)),r(e,"colliderB",A,t(e)),e.anchorPos2=s(0,0),e.anchorPos1=s(0,0),e}o(e,i);var n=e.prototype;return n.onLoad=function(){this.isDynamicAdd||this.load()},n.load=function(){this.colliderA&&this.colliderB&&this.colliderA.rigidBody&&this.colliderB.rigidBody?this.loadByPos():console.log("刚体不存在,无法连接"+this.node.name)},n.loadByPos=function(){if(this.colliderA&&this.colliderB&&this.colliderA.rigidBody&&this.colliderB.rigidBody){var i=p.JointData.rope(this.length,this.anchorPos1,this.anchorPos2);i.damping=1,i.stiffness=.02,this.joint=c.getIns().world.createImpulseJoint(i,this.colliderA.rigidBody,this.colliderB.rigidBody,!0),console.log("------RapierStringJoint------")}else console.log("刚体不存在,无法连接"+this.node.name)},n.setPos=function(i){this.anchorPos2=i},e}(a)).prototype,"length",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),m=e(R.prototype,"colliderA",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(R.prototype,"colliderB",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=R))||B)||B));n._RF.pop()}}}));

System.register("chunks:///_virtual/RapierToolCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./rapier.cjs.mjs_cjs=&original=.js","./ProcessCtrl.ts","./rapier.cjs.js"],(function(o){var r,t,i,e,n,s,c,a,l;return{setters:[function(o){r=o.inheritsLoose},function(o){t=o.cclegacy,i=o._decorator,e=o.v2,n=o.v3,s=o.Component},function(o){c=o.RapierBaseCollider},null,function(o){a=o.ProcessCtrl},function(o){l=o.default}],execute:function(){var d;t._RF.push({},"1be4c8r/HNM6qsXBAmG7GVc","RapierToolCtrl",void 0);var p=i.ccclass,h=(i.property,i.requireComponent),u=i.executionOrder;o("RapierToolCtrl",p("RapierToolCtrl")(d=h(c)(d=u(2)(d=function(o){function t(){for(var r,t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return(r=o.call.apply(o,[this].concat(i))||this).rc=void 0,r.bornPos=void 0,r.bornRotation=void 0,r}r(t,o);var i=t.prototype;return i.onLoad=function(){if(this.rc=this.getComponent(c),this.rc.rigidBodyType==l.RigidBodyType.Dynamic){var o=this.rc.rigidBody.translation();this.bornPos=e(o.x,o.y),this.bornRotation=this.rc.rigidBody.rotation(),this.rc.onStepCallback=this.onStep.bind(this)}else console.error("道具物理类型错误")},i.onStep=function(){this.rc.rigidBody.wakeUp();var o=this.rc.rigidBody.translation();(o.y<a.edge_Y-200||o.y>a.edgeY+200)&&(this.rc.rigidBody.setTranslation({x:this.bornPos.x,y:this.bornPos.y},!0),this.rc.rigidBody.setRotation(this.bornRotation,!0),this.rc.setSpeed(n(0,0,0)),this.rc.rigidBody.setAngvel(0,!0))},t}(s))||d)||d)||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/RapierWaterCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts","./rapier.cjs.mjs_cjs=&original=.js","./SpiderCtrl.ts","./GameCtrl.ts","./rapier.cjs.js"],(function(e){var n,i,t,o,r,a,d,l,s,c,p,u,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,d=e.find,l=e.UITransform},function(e){s=e.RapierBaseCollider},function(e){c=e.default},null,function(e){p=e.SpiderCtrl},function(e){u=e.GameCtrl},function(e){g=e.default}],execute:function(){var y,m,h,f,C,B,v;r._RF.push({},"7d2begPU7BP0Yz5JerHyGvm","RapierWaterCtrl",void 0);var D=a.ccclass,b=a.property,R=a.requireComponent,S=a.executionOrder;e("RapierWaterCtrl",(y=D("RapierWaterCtrl"),m=R(s),h=S(2),f=b(Boolean),y(C=m(C=h((v=n((B=function(e){function n(){for(var n,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(n=e.call.apply(e,[this].concat(r))||this).rc=void 0,n.colliderSet=new Set,t(n,"isDynamicAdd",v,o(n)),n}i(n,e);var r=n.prototype;return r.onLoad=function(){this.isDynamicAdd||this.load()},r.load=function(){this.rc=this.getComponent(s),this.rc.onEnterCallback=this.onHandEnter.bind(this),this.rc.onQuitCallback=this.onHandQuit.bind(this),this.rc.onStepCallback=this.onStep.bind(this)},r.getGc=function(){return d("Canvas")&&d("Canvas").getComponent(u)?d("Canvas").getComponent(u):null},r.onHandEnter=function(e,n){var i;n.rigidBodyType==g.RigidBodyType.Dynamic&&(n.node.getComponent(p)&&(n.node.getComponent(p).isInWater=!0),n.rigidBody.setLinearDamping(1),n.rigidBody.setAngularDamping(1),this.colliderSet.add(n),(n.node.name.includes("ZhiZhu")||n.node.name.includes("Cube"))&&(null==(i=this.getGc())||i.playAudioEffect("falling_water1",.5)))},r.onHandQuit=function(e,n){n.rigidBodyType==g.RigidBodyType.Dynamic&&(n.node.getComponent(p)&&(n.node.getComponent(p).isInWater=!1),n.rigidBody.setLinearDamping(0),n.rigidBody.setAngularDamping(0),this.colliderSet.delete(n))},r.onStep=function(){var e=this;this.colliderSet.forEach((function(n){if(!n.isDeleteFromWorld&&n.node&&n.rigidBody&&n.rigidBodyType==g.RigidBodyType.Dynamic&&!n.isFixTranslation&&!n.node.name.includes("Rope")){var i=1;n.node.name.includes("Cube")&&(i=8);var t=n.node.getComponent(l).height,o=n.node.getComponent(l).width,r=e.rc.collider.translation().y+e.node.getComponent(l).height/2-(n.rigidBody.translation().y-t/2);r<t&&(t=r),n.addForce(0,t*o*.023*i)}}))},n}(c)).prototype,"isDynamicAdd",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=B))||C)||C)||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/RapierWorld.ts",["cc","./rapier.cjs.mjs_cjs=&original=.js","./EventBus.ts","./RapierBaseCollider.ts","./MD5Helper.ts","./SpearCtrl.ts","./GameCtrl.ts","./NetIns.ts","./rapier.cjs.js"],(function(t){var n,e,i,o,r,s,l,a,u,d,c,v,f,g,h;return{setters:[function(t){n=t.cclegacy,e=t._decorator,i=t.v2,o=t.find,r=t.UITransform},null,function(t){s=t.default,l=t.EventType,a=t.EventMsg},function(t){u=t.RapierBaseCollider},function(t){d=t.default},function(t){c=t.SpearCtrl},function(t){v=t.GameCtrl,f=t.GameMode},function(t){g=t.NetIns},function(t){h=t.default}],execute:function(){var p,C;n._RF.push({},"a1fe2lkI8tEfbCafI/bWJtw","RapierWorld",void 0);var m=e.ccclass,y=(e.property,t("RapierWorld",m("RapierWorld")(((C=function(){function t(){this.world=void 0,this.eventQueue=void 0,this.gravity=i(0,-800),this.index=0}t.getIns=function(){return null!=t.ins&&null!=t.ins||(t.ins=new t),t.ins};var n=t.prototype;return n.initPhysics=function(t){var n=this;this.index=0,this.world=null,u.allWroldColliders=null,this.eventQueue=null,h.init().then((function(){n.world=new h.World(n.gravity),n.eventQueue=new h.EventQueue(!0),u.allWroldColliders=new Map,n.world.timestep=.03,console.log("物理引擎初始化完毕time_step:"+n.world.timestep),t()}))},n.trunRight=function(){this.gravity.rotate(.01),t.getIns().world.gravity=this.gravity},n.trunLeft=function(){this.gravity.rotate(-.01),t.getIns().world.gravity=this.gravity},n.back=function(){this.gravity=i(0,-800),t.getIns().world.gravity=this.gravity},n.onStep=function(){this.index++,this.world.step(this.eventQueue,new y),this.eventQueue.drainCollisionEvents(this.onCollison.bind(this)),s.getInstance().board(l.step,a.GetIns()),this.showStepInfo()},n.onCollison=function(t,n,e){s.getInstance().board(l.collison,a.GetIns().setObject({handle1:t,handle2:n,started:e}))},n.showStepInfo=function(){if(this.index%500==0){var t=this.uint8ArrayToString(this.world.takeSnapshot()),n=d.b64_md5(t),e=n+" STEP: "+this.index;if(console.log("WORLD_SNAP: ",e),v.gameMode==f.net){var i=this.index+"%%%%"+n;o("Canvas")&&o("Canvas").getComponent(v)&&o("Canvas").getComponent(v).onRecvFromClient(i),g.getIns().sendToClient(i)}}},n.uint8ArrayToString=function(t){for(var n="",e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return n},t}()).ins=void 0,p=C))||p),function(){function t(){}var n=t.prototype;return n.filterContactPair=function(t,n,e,i){var o=u.allWroldColliders.get(t),s=u.allWroldColliders.get(n),l=null,a=null;if(o&&o.node.getComponent(c)?(l=o,a=s):s&&s.node.getComponent(c)&&(l=s,a=o),l){var d=l.lastFramePosY,v=a.lastFramePosY;return d+l.node.getComponent(r).height/2<=v-a.node.getComponent(r).height/2+16?h.SolverFlags.COMPUTE_IMPULSE:h.SolverFlags.EMPTY}return h.SolverFlags.COMPUTE_IMPULSE},n.filterIntersectionPair=function(t,n,e,i){return!0},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/RedGreenLightCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./RapierBaseCollider.ts","./GameCtrl.ts","./SpiderCtrl.ts"],(function(e){var t,i,r,a,n,o,s,d,l,y,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,s=e.find},function(e){d=e.default},function(e){l=e.RapierBaseCollider},function(e){y=e.GameCtrl},function(e){p=e.SpiderCtrl}],execute:function(){var c,h,m,g,C,u,f;n._RF.push({},"34620yykwZPupXFo3mlmNjK","RedGreenLightCtrl",void 0);var v=o.ccclass,P=o.property,B=o.requireComponent,L=o.executionOrder;e("RedGreenLightCtrl",(c=v("RedGreenLightCtrl"),h=B(l),m=L(2),g=P(Boolean),c(C=h(C=m((f=t((u=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).rc=void 0,t.gc=void 0,t.index=0,t.type=3,t.player1LastPos=void 0,t.player2LastPos=void 0,t.isPlayer1Transformed=!1,t.isPlayer2Transformed=!1,t.miniMoveDistance=4,t.r1=void 0,t.r2=void 0,r(t,"isDynamicAdd",f,a(t)),t}i(t,e);var n=t.prototype;return n.onLoad=function(){this.isDynamicAdd||this.load()},n.load=function(){var e=this;this.type=3,this.rc=this.getComponent(l),this.rc.onStepCallback=function(){e.gc||(e.gc=s("Canvas").getComponent(y)),e.r1||(e.r1=e.gc.spider1.getComponent(l)),e.r2||(e.r2=e.gc.spider2.getComponent(l)),e.index++;var t=0;t=e.index%400>280?1:e.index%400<220?2:3,e.type!=t&&(e.type=t,e.renderLight());var i=e.r1.rigidBody.translation(),r=e.r2.rigidBody.translation();1==e.type&&(e.player1LastPos&&!e.isPlayer1Transformed&&(Math.abs(e.player1LastPos.x-i.x)>e.miniMoveDistance||Math.abs(e.player1LastPos.y-i.y)>e.miniMoveDistance)&&(e.isPlayer1Transformed=!0,e.r1.rigidBody.setTranslation(e.r1.savePosition,!0),e.r1.getComponent(p).speed.x=0,e.r1.getComponent(p).speed.y=0,e.r1.getComponent(p).animCtrl.stand()),e.player2LastPos&&!e.isPlayer2Transformed&&(Math.abs(e.player2LastPos.x-r.x)>e.miniMoveDistance||Math.abs(e.player2LastPos.y-r.y)>e.miniMoveDistance)&&(e.isPlayer2Transformed=!0,e.r2.rigidBody.setTranslation(e.r2.savePosition,!0),e.r2.getComponent(p).speed.x=0,e.r2.getComponent(p).speed.y=0,e.r2.getComponent(p).animCtrl.stand())),e.player1LastPos=i,e.player2LastPos=r}},n.renderLight=function(){this.gc.playAudioEffect("red_light1"),this.node.getChildByName("Red").getChildByName("Gary").active=!0,this.node.getChildByName("Yellow").getChildByName("Gary").active=!0,this.node.getChildByName("Green").getChildByName("Gary").active=!0,1==this.type?this.node.getChildByName("Red").getChildByName("Gary").active=!1:2==this.type?(this.node.getChildByName("Green").getChildByName("Gary").active=!1,this.isPlayer1Transformed=!1,this.isPlayer2Transformed=!1):3==this.type&&(this.node.getChildByName("Yellow").getChildByName("Gary").active=!1)},t}(d)).prototype,"isDynamicAdd",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=u))||C)||C)||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/ResultPannelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePannelController.ts","./GameCtrl.ts","./GameHelper.ts","./RapierWorld.ts","./FirstSceneCtrl.ts","./SpiderCtrl.ts"],(function(e){var n,t,a,l,s,i,o,r,c,u,P,C,v,g;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,a=e._decorator,l=e.find,s=e.Label,i=e.RichText,o=e.director},function(e){r=e.BasePannelController},function(e){c=e.GameCtrl,u=e.GameMode},function(e){P=e.default},function(e){C=e.RapierWorld},function(e){v=e.FirstSceneCtrl},function(e){g=e.SpiderCtrl}],execute:function(){var p;t._RF.push({},"b2ce3fN3yZK5ohX5YNh369B","ResultPannelCtrl",void 0);var f=a.ccclass;a.property,e("ResultPannelCtrl",f("ResultPannelCtrl")(p=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var a=t.prototype;return a.start=function(){},a.show=function(e,n,t,a,r){var p=this;if(void 0===r&&(r="时间到了,再试一次吧!"),a?this.getComponent(c).playAudioEffect("win1"):(this.getComponent(c).playAudioEffect("lose1"),l("Canvas/ResultPannel/Pannel/Particle2D").active=!1,l("Canvas/ResultPannel/Pannel/FrameLose").active=!0,l("Canvas/ResultPannel/Pannel/Title").getComponent(s).string="失败"),l("Canvas/ResultPannel/Pannel/Label1").getComponent(s).string="用时:"+e,a||(l("Canvas/ResultPannel/Pannel/Label1").getComponent(s).string=r),c.gameMode==u.net){var f=this.node.getComponent(c).spider1.getComponent(g).playerInfo;l("Canvas/ResultPannel/Pannel/Label2").getComponent(i).string=this.getRichTextStr("["+f.nickName+"] 死亡次数: "+n);var m=this.node.getComponent(c).spider2.getComponent(g).playerInfo;l("Canvas/ResultPannel/Pannel/Label3").getComponent(i).string=this.getRichTextStr("["+m.nickName+"] 死亡次数: "+t)}else l("Canvas/ResultPannel/Pannel/Label2").getComponent(i).string=this.getRichTextStr("[小黄] 死亡次数: "+n),l("Canvas/ResultPannel/Pannel/Label3").getComponent(i).string=this.getRichTextStr("[小绿] 死亡次数: "+t);l("Canvas/ResultPannel/Pannel/Ok/Label1").active=!1,l("Canvas/ResultPannel/Pannel/Ok/Label2").active=!1,l("Canvas/ResultPannel/Pannel/Ok/Label3").active=!1,c.gameMode==u.net||"Scene_Test"==o.getScene().name?l("Canvas/ResultPannel/Pannel/Ok/Label2").active=!0:a?l("Canvas/ResultPannel/Pannel/Ok/Label1").active=!0:l("Canvas/ResultPannel/Pannel/Ok/Label3").active=!0,this.showPannel(l("Canvas/ResultPannel"),!1,!1),this.setButtonEvent(l("Canvas/ResultPannel/Pannel/Ok"),(function(){if(c.gameMode==u.net)p.hide();else if("Scene_Test"==o.getScene().name)p.hide();else{var e=o.getScene().name;if(a){e=P.getNextSceneName(o.getScene().name);var n=v.playerInfo.getDiamondNumber(p);if(n<5)return p.toast("不足5个钻石无法进入下一关,即将返回游戏大厅"),void p.invoke((function(){P.exchangeScene("FirstScene")}),2);n-=5,v.playerInfo.setDiamondNumber(n,p)}c.msgs=new Map,C.getIns().initPhysics((function(){P.exchangeScene(e)}))}}))},a.hide=function(){this.hidePannel(l("Canvas/ResultPannel"))},t}(r))||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/RoomInfoPannelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePannelController.ts","./NetIns.ts","./FirstSceneCtrl.ts","./EventBus.ts","./ComfirmPannelCtrl.ts","./GameHelper.ts","./LobbyCtrl.ts","./GameCtrl.ts","./ChapterSelectPannelCtrl.ts"],(function(e){var o,n,t,a,s,r,i,l,m,c,g,h,f,I,p,d,C;return{setters:[function(e){o=e.inheritsLoose},function(e){n=e.cclegacy,t=e._decorator,a=e.find,s=e.sys,r=e.Label,i=e.Sprite},function(e){l=e.BasePannelController},function(e){m=e.NetIns},function(e){c=e.FirstSceneCtrl},function(e){g=e.default,h=e.EventType},function(e){f=e.ComfirmPannelCtrl},function(e){I=e.default},function(e){p=e.LobbyCtrl},function(e){d=e.GameMode},function(e){C=e.ChapterSelectPannelCtrl}],execute:function(){var u;n._RF.push({},"2cb19wdXt1HjZhrXO7UBMfi","RoomInfoPannelCtrl",void 0);var v=t.ccclass;t.property,e("RoomInfoPannelCtrl",v("RoomInfoPannelCtrl")(u=function(e){function n(){for(var o,n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return(o=e.call.apply(e,[this].concat(t))||this).pannel=void 0,o.mode="cop",o.serverMsgId=void 0,o}o(n,e);var t=n.prototype;return t.start=function(){this.pannel=a("Canvas/RoomInfoPannel"),g.getInstance().sub(this.onRoomChange,h.room_change,this),g.getInstance().sub(this.onServerMsg,h.server_msg,this),this.setRoomType()},t.callback=function(e,o){console.log(o),this.mode=o,this.setRoomType()},t.onServerMsg=function(e,o){var n=e.str.split(" ");n[0]&&n[0]==this.serverMsgId&&n[1]&&n[1].length>0&&n[1]},t.onRoomChange=function(e,o){this.renderRoomInfo()},t.show=function(){this.showPannelWithoutAnim(this.pannel),this.renderRoomInfo()},t.hide=function(){this.hidePannelWithoutAnim(this.pannel)},t.levelRoom=function(){var e=this;this.node.getComponent(f).show("确定要离开房间么?",(function(){e.hide(),m.getIns().leaveRoom()}))},t.dissmissRoom=function(){var e=this;this.node.getComponent(f).show("确定要解散房间么?",(function(){e.hide(),m.getIns().dismissRoom()}))},t.share=function(){s.platform==s.Platform.WECHAT_GAME?m.getIns().room&&m.getIns().room.roomCode?this.wxShare("快来和我并肩作战吧,考验我们的友谊和默契的时候到了","www.xxx.com","roomCode="+m.getIns().room.roomCode):this.toast("房间信息网络错误1"):s.platform==s.Platform.BYTEDANCE_MINI_GAME?m.getIns().room&&m.getIns().room.roomCode?this.ttShare("快来和我并肩作战吧,考验我们的友谊和默契的时候到了","www.xxx.com","roomCode="+m.getIns().room.roomCode):this.toast("房间信息网络错误2"):this.node.getComponent(f).show("本平台暂不支持自动邀请好友,请直接告诉好友您的房间号 ["+m.getIns().room.roomCode+"],微信搜索小游戏 [萌猫兄弟] 输入房间号来加入游戏",(function(){}),!0)},t.renderRoomInfo=function(){for(var e=0;e<4;e++)a("Canvas/RoomInfoPannel/Pannel/Right/Player"+(e+1)).active=!1,a("Canvas/RoomInfoPannel/Pannel/Left/Player"+(e+1)).active=!1;var o=m.getIns().room;if(console.log(o),o){var n=m.getIns().getRoomName(),t=m.getIns().getRoomMap();if(n&&n.split("_")[1]){if(a("Canvas/RoomInfoPannel/Pannel/RoomId").getComponent(r).string="房间号:"+o.roomCode,a("Canvas/RoomInfoPannel/Pannel/Chapter").getComponent(r).string=t?"自制关卡-"+n.split("_")[1]:"第 "+n.split("_")[1]+" 关",o){var s=o.players;s.forEach((function(e){e.playerId,m.getIns().client.playerId}));for(var i=0;i<4;i++){var l=s[i];l&&this.renderPlayerInfo(l,i,!0)}}a("Canvas/RoomInfoPannel/Pannel/StartGame").active=!0,a("Canvas/RoomInfoPannel/Pannel/DismissRoomBt").active=!0,a("Canvas/RoomInfoPannel/Pannel/ToggleGroup").active=!0,a("Canvas/RoomInfoPannel/Pannel/SelectChapter").active=!0,o.ownerId!=m.getIns().client.playerId&&(a("Canvas/RoomInfoPannel/Pannel/StartGame").active=!1,a("Canvas/RoomInfoPannel/Pannel/DismissRoomBt").active=!1,a("Canvas/RoomInfoPannel/Pannel/ToggleGroup").active=!1,a("Canvas/RoomInfoPannel/Pannel/SelectChapter").active=!1)}else this.toast("房间数据错误")}else this.hide()},t.renderPlayerInfo=function(e,o,n){var t=a("Canvas/RoomInfoPannel/Pannel/Right/Player"+(o+1));n&&(t=a("Canvas/RoomInfoPannel/Pannel/Left/Player"+(o+1))),t.active=!0;var s=JSON.parse(e.customPlayerProperties),l=s.nickName;if(l.length>12&&(l=l.slice(0,12)),t.getChildByName("Name").getComponent(r).string=l,t.getChildByName("Ranking").getComponent(r).string="",I.getHeadByUrl(s.headUrl,t.getChildByName("Head").getComponent(i)),m.getIns().room.ownerId==m.getIns().client.playerId&&e.playerId!=m.getIns().client.playerId?(t.getChildByName("KickOut").active=!0,this.setButtonEvent(t.getChildByName("KickOut"),this.kickOut.bind(this,e))):t.getChildByName("KickOut").active=!1,m.getIns().room.ownerId==m.getIns().client.playerId){var g=c.gameVersion;s.clientVersion!=g&&(m.getIns().removePlayer(e.playerId),this.toast("已踢出客户端版本不一致的玩家",4))}},t.kickOut=function(e){this.node.getComponent(f).show("确定要踢出该玩家么?",(function(){console.log(e.playerId),m.getIns().removePlayer(e.playerId)}))},t.startGame=function(){var e=this;!m.getIns().room||!m.getIns().room.players||m.getIns().room.players.length<2?this.toast("房间人数不足,请邀请好友玩家进入房间"):c.playerInfo.getDiamondNumber(this)<20?this.node.getComponent(f).showForAd("钻石不足20无法建立房间,要通过观看广告获取钻石吗?",(function(){e.showAd((function(){a("Canvas").getComponent(p).addDiamondNumber(),e.startGameCallback()}))})):this.node.getComponent(f).show("每局网络对战要扣除20个钻石,确定要开始游戏么?",(function(){e.startGameCallback()}))},t.startGameCallback=function(){var e=c.playerInfo.getDiamondNumber(this);e-=20,c.playerInfo.setDiamondNumber(e,this),this.node.getComponent(p).renderPlayerInfo(),m.getIns().startSyncFrame()},t.setRoomType=function(){m.getIns().room?m.getIns().room.updateRoomProperties({roomType:this.mode}):console.log("房间网络对象异常")},t.selectChapterCallback=function(e,o){if(m.getIns().room)if(m.getIns().room&&m.getIns().room.customRoomProperties){var n=JSON.parse(m.getIns().room.customRoomProperties);n.roomName=e,null!=o&&null!=o&&(o.length>10?n.mapStr=I.getStrByDataArry(o):n.mapStr=""),m.getIns().room.ownerId==m.getIns().client.playerId?m.getIns().room.updateRoomProperties({customRoomProperties:JSON.stringify(n)}):(console.log("-------vvbb--------"),m.getIns().sendToClient(JSON.stringify(n)))}else console.log("更新房间信息错误,房间信息不全");else console.log("房间网络对象异常")},t.onRecvFromClient=function(e){m.getIns().room&&m.getIns().room.ownerId==m.getIns().client.playerId&&m.getIns().room.updateRoomProperties({customRoomProperties:e})},t.selectChapter=function(){this.node.getComponent(C).show(d.net,this.selectChapterCallback.bind(this))},n}(l))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/RopeCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./RapierBaseCollider.ts","./rapier.cjs.mjs_cjs=&original=.js","./RapierStringJoint.ts","./SpiderCtrl.ts","./rapier.cjs.js"],(function(o){var e,t,n,i,r,s,a,h,l,d,c,p,g,m,f,u,v;return{setters:[function(o){e=o.inheritsLoose},function(o){t=o.cclegacy,n=o._decorator,i=o.find,r=o.Label,s=o.Camera,a=o.v3,h=o.Vec3,l=o.Line,d=o.v2,c=o.Vec2,p=o.instantiate},function(o){g=o.default},function(o){m=o.RapierBaseCollider},null,function(o){f=o.RapierStringJoint},function(o){u=o.SpiderCtrl},function(o){v=o.default}],execute:function(){var C;t._RF.push({},"c759cY2ln1A86zIMlkKbZDJ","RopeCtrl",void 0);var y=n.ccclass,R=(n.property,n.requireComponent);o("RopeCtrl",y("RopeCtrl")(C=R(m)(C=function(o){function t(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=o.call.apply(o,[this].concat(n))||this).rc=void 0,e.joints=[],e.otherJoint=void 0,e.camera=void 0,e.gc=void 0,e.ins=void 0,e.items=[],e.ropeInfoLabel=void 0,e.anchorTarget=void 0,e.anchorPos=void 0,e.anchorPos2=a(),e}e(t,o);var n=t.prototype;return n.init=function(){this.ropeInfoLabel=i("Canvas/DownFrame/RopeInfo").getComponent(r),this.ins=this.node.getChildByName("RopeIns"),this.items=this.node.parent.getComponentsInChildren(m),console.log("----------load--RopeCtrl--------"),this.rc=this.getComponent(m)},n.sendMakeRopeMsg=function(){if(!this.getComponent(u).isDead){var o=this.getOtherPlayer();if(o){console.log(o.node.name+"------有效锚点-------"),this.gc=this.getComponent(u).gc,this.camera=this.gc.cameraCtrl.node.getComponent(s);var e=o.rigidBody.translation(),t=a(e.x,e.y,0);o.node.inverseTransformPoint(t,t);for(var n=0;n<this.items.length;n++){var i=this.items[n];if(i==o&&i.collider)return void this.gc.sendRopeMsg(n,t.x,t.y)}}}},n.getOtherPlayer=function(){var o=this.node.getComponent(u).otherPlayer.getComponent(m),e=h.distance(this.node.worldPosition,o.node.worldPosition);if(e<1500&&o){var t=this.node.getComponent(m),n=o.node.getComponent(m),i=this.getComponent(m).rayQuery2(t,n);return i&&!i.node.name.includes("RopeIns")&&i.rigidBody?(this.gc.toast("你们之间有障碍物,可以换个位置试试"),console.log("有障碍物",i),null):o}return e>=1500?this.gc.toast("距离太远"):this.gc.toast("没有目标"),null},n.getClosestAnchor=function(){for(var o=999999,e=null,t=0;t<this.items.length;t++){var n=this.items[t];if(!n.isDeleteFromWorld&&n.node&&n.node.name!=this.node.name&&(n.node.name.includes("AnchorNode")||n.node.name.includes("ZhiZhu"))){var i=h.distance(this.node.worldPosition,n.node.worldPosition);i<o&&(o=i,e=n)}}if(o<800&&e){var r=this.node.getComponent(m),s=e.node.getComponent(m),a=r.rigidBody.translation(),l=s.rigidBody.translation(),d=(new v.Ray({x:a.x,y:a.y},{x:l.x-a.x,y:l.y-a.y}),this.getComponent(m).rayQuery2(r,s));return d&&!d.node.name.includes("RopeIns")?(this.gc.toast("有障碍物"),console.log("有障碍物",d),null):e}return o>=800?this.gc.toast("距离锚点太远"):this.gc.toast("没有锚点"),null},n.onStepCallback=function(){var o=this.node.getChildByName("Line").getComponent(l);if(this.joints&&this.joints.length>0&&this.otherJoint){o.enabled=!0;for(var e=[],t=this.otherJoint.node.getComponents(f)[0];t;)e.push(t.node.position),t=t.colliderB.getComponent(f);if(this.anchorTarget){var n=this.anchorTarget.node.getWorldMatrix();h.transformMat4(this.anchorPos2,a(this.anchorPos.x,this.anchorPos.y,0),n),this.node.inverseTransformPoint(this.anchorPos2,this.anchorPos2),e.push(this.anchorPos2)}o.positions=e}else o.positions=[],o.enabled=!1},n.getRopeLength=function(){var o=0;if(!this.otherJoint||!this.otherJoint.node)return o;for(var e=this.otherJoint.node.getComponents(f)[0];e;)o++,e=e.colliderB.getComponent(f);return console.log("--------getRopeLength--------"+o),o},n.makeRope=function(o){var e=parseInt(o[2]),t=parseFloat(o[3]),n=parseFloat(o[4]),i=this.items[e];i?this.makeRope2(i,d(t,n)):this.gc.toast("悬挂物体不存在")},n.deleteRope=function(){i("Canvas/DownFrame/ButtonDK/Label").getComponent(r).string="连接",this.free()},n.makeRope2=function(o,e){var t=o.rigidBody.translation(),n=a(t.x+e.x,t.y+e.y,0),s=this.node.getComponent(m).rigidBody.translation(),h=c.distance(s,n),l=Math.floor(h/20);if(l>100)this.gc.toast("距离太远");else{this.anchorPos=e,this.anchorTarget=o,l>28?l-=8:l>18?l-=5:l>8&&(l-=2);var g=(n.x-s.x)/l,u=(n.y-s.y)/l;this.free(),this.anchorTarget.isFixedByRope=!0,this.getComponent(m).isFixedByRope=!0;for(var v=o,C=0;C<l;C++){var y=p(this.ins),R=y.getComponent(m),B=y.getComponent(f);this.joints.push(B),y.active=!0,y.parent=this.node,y.worldPosition=a(s.x+g*C,s.y+u*C,0),y.name="RopeIns"+C,R.load(),this.setRopeOnBrokenEvent(R),B.colliderA=R,0==C?(B.colliderB=v,B.setPos(e)):C==l-1?(B.colliderB=v,B.setPos(d(0,0)),this.otherJoint=y.addComponent(f),this.otherJoint.colliderA=R,this.otherJoint.colliderB=this.rc,this.otherJoint.load()):(B.colliderB=v,B.setPos(d(0,0))),v=R,B.load()}this.renderRopeInfo(),i("Canvas/DownFrame/ButtonDK/Label").getComponent(r).string="断开",this.gc.playAudioEffect("hang1")}},n.check=function(){},n.extend=function(){if(this.otherJoint){var o=this.otherJoint.node.getComponents(f)[0];if(o&&o!=this.otherJoint&&o.colliderB){var e=p(this.ins),t=e.getComponent(m),n=e.getComponent(f);this.joints.push(n),e.active=!0,e.parent=this.node;var i=this.otherJoint.node.worldPosition;e.worldPosition=a(i.x,i.y,0),e.name="RopeInsOhter",t.load(),this.setRopeOnBrokenEvent(t),n.colliderA=t,n.colliderB=o.colliderB,n.load(),o.free(!1),o.colliderB=t,o.load(),this.renderRopeInfo()}else console.log("------extend-not-enough-----")}else console.log("-------no_otherjoint2----")},n.setRopeOnBrokenEvent=function(o){var e=this;o.onEnterCallback=function(o,t){t&&t.node.name.includes("Obs")&&e.joints.length>0&&e.deleteRope()}},n.shorten=function(){if(this.otherJoint){var o=this.otherJoint.node.getComponents(f)[0];if(o&&o!=this.otherJoint&&o.colliderB&&o.colliderB.getComponent(f)&&o.colliderB.getComponent(f).colliderB){var e=o.colliderB.node.getComponent(f);o.colliderB=o.colliderB.getComponent(f).colliderB,o.load(),e.free(!1),e.getComponent(m).deleteFromWorld(),e.node.destroy(),this.renderRopeInfo()}else console.log("------shorten-not-enough-----")}else console.log("-------no_otherjoint1----")},n.free=function(){for(var o=0;o<this.joints.length;o++){var e=this.joints[o];e&&e.node&&e.free(!1)}this.otherJoint&&this.otherJoint.free(!1);for(var t=0;t<this.joints.length;t++){var n=this.joints[t];n&&n.node&&n.node.getComponent(m).deleteFromWorld()}for(var i=0;i<this.joints.length;i++){var r=this.joints[i];r&&r.node&&r.node.destroy()}this.joints=[],this.otherJoint=null,this.anchorTarget&&(this.anchorTarget.isFixedByRope=!1),this.getComponent(m).isFixedByRope=!1,this.renderRopeInfo()},n.renderRopeInfo=function(){this.gc&&this.ropeInfoLabel&&(this.ropeInfoLabel.string=this.getRopeLength()+"/"+this.gc.maxRopeLength)},t}(g))||C)||C);t._RF.pop()}}}));

System.register("chunks:///_virtual/SamllLargeTiggerCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./RapierBaseCollider.ts","./SpiderCtrl.ts"],(function(t){var e,n,r,i,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator},function(t){i=t.default},function(t){o=t.RapierBaseCollider},function(t){s=t.SpiderCtrl}],execute:function(){var a;n._RF.push({},"8b437+GaQxGvKQPChN/34nc","SamllLargeTiggerCtrl",void 0);var l=r.ccclass,c=(r.property,r.requireComponent),u=r.executionOrder;t("SamllLargeTiggerCtrl",l("SamllLargeTiggerCtrl")(a=c(o)(a=u(2)(a=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).rc=void 0,e.sp=void 0,e.enterPlayerCount=0,e}e(n,t);var r=n.prototype;return r.onLoad=function(){this.sp=this.node.getChildByName("Sprite"),this.rc=this.getComponent(o),this.rc.onEnterCallback=this.onEnter.bind(this),this.rc.onQuitCallback=this.onQuit.bind(this)},r.onEnter=function(t,e){e.node.getComponent(s)&&this.enterPlayerCount++,this.enterPlayerCount>0?this.sp.active=!1:this.sp.active=!0},r.onQuit=function(t,e){e.node.getComponent(s)&&this.enterPlayerCount--,this.enterPlayerCount>0?this.sp.active=!1:this.sp.active=!0},n}(i))||a)||a)||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/SceneLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./RapierBaseCollider.ts","./RapierBaseJoint.ts","./SpiderCtrl.ts","./rapier.cjs.mjs_cjs=&original=.js","./RapierBox2DCollider.ts","./RapierFix2DJoint.ts","./AnimationCtrl.ts","./RapierRoundBox2DCollider.ts","./RapierLimitPlatformCtrl.ts","./RapierPlatformCtrl.ts","./CubeWeightCtrl.ts","./TimeCubeCtrl.ts","./rapier.cjs.js"],(function(e){var n,o,t,i,a,r,d,l,c,s,p,m,u,C,f,h,g,y,v,L,R,P,D,b,w,A,S,B,T,x,I;return{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,d=e.CCInteger,l=e.Node,c=e.UITransform,s=e.v3,p=e.resources,m=e.Prefab,u=e.find,C=e.Sprite,f=e.director,h=e.color,g=e.instantiate},function(e){y=e.default},function(e){v=e.RapierBaseCollider},function(e){L=e.RapierBaseJoint},function(e){R=e.SpiderCtrl,P=e.ColorType},null,function(e){D=e.RapierBox2DCollider},function(e){b=e.RapierFix2DJoint},function(e){w=e.AnimationCtrl},function(e){A=e.RapierRoundBox2DCollider},function(e){S=e.RapierLimitPlatformCtrl},function(e){B=e.RapierPlatformCtrl},function(e){T=e.CubeWeightCtrl},function(e){x=e.TimeCubeCtrl},function(e){I=e.default}],execute:function(){var Z,_,j,E,F;a._RF.push({},"952c59HiRtDDYg+CFl4Nbgg","SceneLoader",void 0);var J=r.ccclass,z=r.property;r.executionOrder,e("SceneLoader",(Z=J("SceneLoader"),_=z(d),Z((F=n((E=function(e){function n(){for(var n,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,t(n,"sceneRopeLength",F,i(n)),n.sceneIndex=0,n}o(n,e);var a=n.prototype;return a.onLoad=function(){var e=this;this.node.parent.getComponentsInChildren(v).forEach((function(n){if(n.node.name.includes("Land-Platform-Pure")){var o=new l,t=o.addComponent(c),i=o.addComponent(A);i.isDynamicAdd=!0,i.rigidBodyType=I.RigidBodyType.Fixed,e.setSpriteAndColor(n,o),o.name="Down";var a=n.node.getComponent(c).height-8,r=n.node.getComponent(c).width+8;t.width=r,t.height=a,o.position=s(0,0,0),o.parent=n.node,i.load()}else(n.node.name.includes("Land-Cube-Normal")||n.node.name.includes("Land-Cube-Time")||n.node.name.includes("Land-Cube-Limit")||n.node.name.includes("Land-Platform-Limit")||n.node.name.includes("Land-Platform-Move"))&&(n.node.name.includes("Land-Cube-Limit")&&n.node.getComponent(T)&&n.node.getComponent(T).isDynamicAdd&&n.node.getComponent(T).load(),n.node.name.includes("Land-Cube-Time")&&n.node.getComponent(x)&&n.node.getComponent(x).isDynamicAdd&&n.node.getComponent(x).load(),n.isDynamicAdd=!0,n.load(),e.addSide(!0,n),e.addSide(!1,n),n.node.name.includes("Land-Platform-Limit")&&n.node.getComponent(S)&&n.node.getComponent(S).isDynamicAdd&&n.node.getComponent(S).load(),n.node.name.includes("Land-Platform-Move")&&n.node.getComponent(B)&&n.node.getComponent(B).isDynamicAdd&&n.node.getComponent(B).load())})),p.load("prefabs/ZhiZhuPrefab",m,(function(n,o){if(n)console.error("load_ChaCheOne_err",n);else{var t=u("PlayerOneAchor"),i=u("PlayerTwoAchor");e.loadPlayer(t,o,"ZhiZhu1",0),e.loadPlayer(i,o,"ZhiZhu2",1),e.loadCanvas(),e.node.parent.getComponentsInChildren(C).forEach((function(n){if(n.node.name.includes("Wall")||n.node.name.includes("Land-Platform-Pure")||n.node.name.includes("Down")){var o=f.getScene().name,t=parseInt(o.split("_")[1]);o.includes("Test")&&(t=e.sceneIndex),n.color=t%2==1?h(154,85,47,255):h(96,124,81,255)}}))}}))},a.addSide=function(e,n){var o=new l,t=o.addComponent(c),i=o.addComponent(D);i.isDynamicAdd=!0,i.rigidBodyType=I.RigidBodyType.Dynamic,this.setSpriteAndColor(n,o),o.name="EdgeSide";var a=n.node.getComponent(c).height,r=n.node.getComponent(c).width,d=r/2+3;e&&(d=-r/2-3);t.width=6,t.height=a,o.position=s(d,0,0),o.parent=n.node,i.load();var p=n.node.addComponent(b);p.isDynamicAdd=!0,p.colliderA=n,p.colliderB=i;var m=new l;m.position=s(d,0,0),m.parent=n.node;var u=new l;u.parent=o,p.anchor1=m,p.anchor2=u,p.load()},a.setSpriteAndColor=function(e,n){},a.loadCanvas=function(){var e=this;p.load("prefabs/Canvas",m,(function(n,o){if(n)console.error("load_Canvas_err",n);else{var t=g(o);e.node&&e.node.parent?e.node.parent.addChild(t):console.log("---------loadCanvasError----------")}}))},a.loadPlayer=function(e,n,o,t){var i=g(n);i.parent=e.parent,i.worldPosition=e.worldPosition,i.worldRotation=e.worldRotation,i.name=o,i.getComponent(R).playerIndex=t,"ZhiZhu1"==o?i.getComponent(R).colorType=P.yellow:"ZhiZhu2"==o&&(i.getComponent(R).colorType=P.green),i.getComponent(w).init(),i.getComponentsInChildren(v).forEach((function(e){e.node.active&&e.load()})),i.getComponentsInChildren(L).forEach((function(e){e.node.active&&e.load()}))},n}(y)).prototype,"sceneRopeLength",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 96}}),j=E))||j));a._RF.pop()}}}));

System.register("chunks:///_virtual/SettingPannelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePannelController.ts","./ComfirmPannelCtrl.ts","./NetIns.ts","./GameHelper.ts","./GameCtrl.ts","./RapierWorld.ts","./HotUpdateCtrl.ts"],(function(e){var n,t,a,o,i,l,s,u,r,c,g,d,S,C,f,m,p,P,v,h,b;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,a=e._decorator,o=e.find,i=e.Slider,l=e.director,s=e.AudioSource,u=e.Sprite,r=e.resources,c=e.AudioClip,g=e.sys,d=e.game,S=e.Label},function(e){C=e.BasePannelController},function(e){f=e.ComfirmPannelCtrl},function(e){m=e.NetIns},function(e){p=e.default},function(e){P=e.GameCtrl,v=e.GameMode},function(e){h=e.RapierWorld},function(e){b=e.HotUpdateCtrl}],execute:function(){var B,y;t._RF.push({},"fc445pohp5IsIWUmsfcYtMg","SettingPannelCtrl",void 0);var L=a.ccclass;a.property,e("SettingPannelCtrl",L("SettingPannelCtrl")(((y=function(e){function t(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(n=e.call.apply(e,[this].concat(a))||this).audioSource=void 0,n.index=0,n}n(t,e);var a=t.prototype;return a.update=function(e){this.index++,this.index%60==0&&(t.effectValue=o("Canvas/SettingPannel/Pannel/SliderEffect").getComponent(i).progress,t.bgAudioValue=o("Canvas/SettingPannel/Pannel/SliderBgAudio").getComponent(i).progress,this.setBgAudio())},a.setBgAudio=function(){this.audioSource&&(this.audioSource.volume=t.bgAudioValue)},a.start=function(){if("LobbyScene"==l.getScene().name)this.audioSource=this.node.getChildByName("Camera").getComponents(s)[0];else{var e=l.getScene().name,n=parseInt(e.split("_")[1]);e.includes("Test")&&(n=o("Bg").getComponent("SceneLoader").sceneIndex),o("Bg").getComponent(u).enabled=!1,n%2==1?this.audioSource=this.node.getChildByName("Camera").getComponents(s)[1]:(this.audioSource=this.node.getChildByName("Camera").getComponents(s)[2],this.node.getChildByName("Bg2").active=!1)}this.audioSource.volume=0,o("Canvas/SettingPannel/Pannel/SliderEffect").getComponent(i).progress=t.effectValue,o("Canvas/SettingPannel/Pannel/SliderBgAudio").getComponent(i).progress=t.bgAudioValue},a.add=function(){var e=this;r.load("audios/bg1",c,(function(n,t){n?console.log("-----加载音频失败-----",n):(e.audioSource=e.node.addComponent(s),e.audioSource.clip=t,e.audioSource.play(),e.audioSource.loop=!0,e.audioSource.volume=1,console.log("---------add---------"+e.audioSource.volume,e.audioSource))}))},a.onDestroy=function(){this.audioSource.stop()},a.show=function(){var e=this;(this.showPannel(o("Canvas/SettingPannel"),!0,!0),o("Canvas/SettingPannel/Pannel/Quit/Label1").active=!1,o("Canvas/SettingPannel/Pannel/Quit/Label2").active=!1,"LobbyScene"==l.getScene().name)?(o("Canvas/SettingPannel/Pannel/Quit/Label2").active=!0,this.setButtonEvent(o("Canvas/SettingPannel/Pannel/Quit"),(function(){e.node.getComponent(f).show("确定要退出游戏么?",(function(){g.platform==g.Platform.MOBILE_BROWSER?b.ins.quit():d.end()}))}))):(o("Canvas/SettingPannel/Pannel/Quit/Label1").active=!0,o("Canvas/SettingPannel/Pannel/Quit/Label1").getComponent(S).string=P.gameMode==v.net?"退出游戏":"退出关卡",this.setButtonEvent(o("Canvas/SettingPannel/Pannel/Quit"),(function(){var n=P.gameMode==v.net?"确定要退出游戏么?":"确定要退出此关卡么?";e.node.getComponent(f).show(n,(function(){P.gameMode==v.net?d.end():"Scene_Test"==l.getScene().name&&p.isForTest?p.exchangeScene("BuildScene"):p.exchangeScene("FirstScene")}))})),P.gameMode!=v.net?(o("Canvas/SettingPannel/Pannel/ReEnter/Label1").active=!0,o("Canvas/SettingPannel/Pannel/ReEnter/Label2").active=!1,this.setButtonEvent(o("Canvas/SettingPannel/Pannel/ReEnter"),(function(){e.node.getComponent(f).show("确定要重启此关卡么",(function(){P.msgs=new Map,h.getIns().initPhysics((function(){p.exchangeScene(l.getScene().name)}))}))}))):(o("Canvas/SettingPannel/Pannel/ReEnter/Label1").active=!1,o("Canvas/SettingPannel/Pannel/ReEnter/Label2").active=!0,this.setButtonEvent(o("Canvas/SettingPannel/Pannel/ReEnter"),(function(){e.node.getComponent(f).show("确定要结束本轮游戏么?",(function(){m.getIns().stopSyncFrame()}))}))))},a.hide=function(){this.hidePannel(o("Canvas/SettingPannel"))},t}(C)).effectValue=.5,y.bgAudioValue=.2,B=y))||B);t._RF.pop()}}}));

System.register("chunks:///_virtual/SignPannelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePannelController.ts"],(function(t){var n,e,a,i,r,s;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,a=t._decorator,i=t.find,r=t.Label},function(t){s=t.BasePannelController}],execute:function(){var o;e._RF.push({},"7e2d8LzhrtGTatP9MU2o7eB","SignPannelCtrl",void 0);var g=a.ccclass;a.property,t("SignPannelCtrl",g("SignPannelCtrl")(o=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var a=e.prototype;return a.start=function(){console.log(this.getYesterdayDate())},a.show=function(){var t=this;this.showPannel(i("Canvas/SignPannel"),!0,!0),this.setButtonEvent(i("Canvas/SignPannel/Pannel/Sign"),(function(){t.sign()})),this.renderData()},a.hide=function(){this.hidePannel(i("Canvas/SignPannel"))},a.getYesterdayDate=function(){var t=new Date;t.setHours(0,0,0,0);var n=new Date(t.getTime()-864e5);return n.getFullYear()+"-"+String(n.getMonth()+1).padStart(2,"0")+"-"+String(n.getDate()).padStart(2,"0")},a.getTodayDate=function(){var t=new Date;t.setHours(0,0,0,0);var n=new Date(t.getTime());return n.getFullYear()+"-"+String(n.getMonth()+1).padStart(2,"0")+"-"+String(n.getDate()).padStart(2,"0")},a.renderData=function(){1==this.getInt(this.getTodayDate(),0)?i("Canvas/SignPannel/Pannel/Sign/Label").getComponent(r).string="明日再来":i("Canvas/SignPannel/Pannel/Sign/Label").getComponent(r).string="签到";for(var t=this.getInt("sign_count",0),n=0;n<6;n++){var e=i("Canvas/SignPannel/Pannel/ScrollView/Content/Item"+n+"/Cover");e.active=n<t}},a.onSign=function(){this.show()},a.sign=function(){if(1!=this.getInt(this.getTodayDate(),0)){this.setInt(this.getTodayDate(),1);var t=this.getInt(this.getYesterdayDate(),0),n=this.getInt("sign_count",1);1==t&&n++,this.setInt("sign_count",n),this.toast("签到成功,已解锁连续签到第"+n+"天的装饰品",5),this.renderData()}else this.hide()},e}(s))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/SizeCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts"],(function(t){var e,n,o,r,i,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.UITransform,i=t.v3},function(t){s=t.default}],execute:function(){var c;n._RF.push({},"c0117xFNWhKKbfrpyFuAmRt","SizeCtrl",void 0);var p=o.ccclass,u=(o.property,o.requireComponent),a=o.executionOrder;t("SizeCtrl",p("SizeCtrl")(c=u(r)(c=a(-1)(c=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.onLoad=function(){if(this.node.parent&&this.node.parent.getComponent(r)){var t=this.getComponent(r).height,e=this.node.parent.getComponent(r).width+10,n=-(t/2-8);this.getComponent(r).width=e,this.node.position=i(0,n,0)}else console.error("-----------规范脚本父节点错误-----------")},n}(s))||c)||c)||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/SpearCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts","./SpiderCtrl.ts"],(function(i){var t,e,s,r,o,n;return{setters:[function(i){t=i.inheritsLoose},function(i){e=i.cclegacy,s=i._decorator},function(i){r=i.RapierBaseCollider},function(i){o=i.default},function(i){n=i.PlayerDir}],execute:function(){var a;e._RF.push({},"ba5f8Bd4E5Lmr27gJ52ssSv","SpearCtrl",void 0);var d=s.ccclass,c=(s.property,s.requireComponent),p=s.executionOrder;i("SpearCtrl",d("SpearCtrl")(a=c(r)(a=p(2)(a=function(i){function e(){for(var t,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return(t=i.call.apply(i,[this].concat(s))||this).rc=void 0,t.pos=void 0,t.step=10,t.dir=0,t.player=void 0,t.index=0,t.gc=void 0,t.isFixed=!1,t.isDisappered=!1,t}t(e,i);var s=e.prototype;return s.load=function(i,t){this.player=t,this.dir=i,this.rc=this.getComponent(r),this.gc=t.gc,this.rc.onStepCallback=this.onStepCallback.bind(this),this.rc.onEnterCallback=this.onEnter.bind(this);var e=this.rc.rigidBody.translation();this.pos={x:e.x,y:e.y},this.gc.playAudioEffect("broken1")},s.onStepCallback=function(){this.isFixed||(this.index++,this.index>240?this.disappear():(this.dir==n.right?this.pos.x+=this.step:this.pos.x-=this.step,this.rc.rigidBody.setTranslation(this.pos,!0)))},s.onEnter=function(i,t){t.rigidBody&&(t.name.includes("Wall")||t.name.includes("Down")?(this.isFixed=!0,this.gc.playAudioEffect("broken1")):(!t.isDeleteFromWorld&&t.node&&t.addForce(this.dir==n.left?-800:800,0),this.isFixed||this.disappear()))},s.disappear=function(){this.isDisappered||(this.isDisappered=!0,this.rc.deleteFromWorld(),this.node.destroy())},e}(o))||a)||a)||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/SpeechIns.ts",["cc"],(function(n){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"638a2vIv1JJwKywnlrSkQ8s","SpeechIns",void 0),n("SpeechIns",function(){function n(){this.gameMediaEngine=void 0}return n.getIns=function(){return null!=n.ins&&null!=n.ins||(n.ins=new n),n.ins},n.prototype.init=function(){console.log(globalThis)},n}()).ins=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/SpiderCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./RapierBaseCollider.ts","./GameCtrl.ts","./RopeCtrl.ts","./BulletCtrl.ts","./AnimationCtrl.ts","./WaveCtrl.ts","./RapierWorld.ts","./SpearCtrl.ts"],(function(e){var t,i,s,n,o,h,r,d,a,l,m,g,u,p,c,y,C;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,s=e._decorator,n=e.v3,o=e.find,h=e.UITransform,r=e.instantiate,d=e.RenderRoot2D},function(e){a=e.default},function(e){l=e.RapierBaseCollider},function(e){m=e.GameCtrl},function(e){g=e.RopeCtrl},function(e){u=e.BulletCtrl},function(e){p=e.AnimationCtrl},function(e){c=e.WaveCtrl},function(e){y=e.RapierWorld},function(e){C=e.SpearCtrl}],execute:function(){var f;i._RF.push({},"da256OQBkBEbZYTksJJ41Rw","SpiderCtrl",void 0);var v=s.ccclass,S=(s.property,e("SpiderCtrl",v("SpiderCtrl")(f=function(e){function i(){for(var t,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this).body=void 0,t.playerIndex=0,t.isDead=!1,t.deadCoolTime=0,t.isInEndTigger=!1,t.hasEndKey=!1,t.collider=void 0,t.deadTimeCount=0,t.gc=void 0,t.id=void 0,t.playerInfo=void 0,t.ropeCtrl=void 0,t.otherPlayer=void 0,t.animCtrl=void 0,t.hasGun=!1,t.gunType=0,t.hasHDun=!1,t.hasShoes=!1,t.hasVDun=!1,t.hasGrivity=!1,t.hasRope=!1,t.colorType=B.yellow,t.isFixedTransfrom=!1,t.hasCap=!1,t.hasGlass=!1,t.isInWater=!1,t.autoSaveSet=new Set,t.tagPathes=[],t.myWidth=50,t.myHeight=100,t.smallCoolFrameCount=0,t.isInSmallTigger=!1,t.isInBigTigger=!1,t.speed=n(0,0,0),t.speed2=n(0,0,0),t.isClickingLeft=!1,t.isClickingRight=!1,t.speed3=n(0,0,0),t.jumpPemeter=2600,t.isJumped=!1,t.jumpFrameCount=0,t.dir=S.right,t.bulletCtrl=void 0,t.spears=[],t.shootPlayer=void 0,t.isShooted=!1,t}t(i,e);var s=i.prototype;return s.onLoad=function(){this.body=this.node.getComponent(l),this.ropeCtrl=this.getComponent(g),this.collider=this.getComponent(l),this.animCtrl=this.getComponent(p),this.collider.onEnterCallback=this.onHandEnter.bind(this),this.collider.onQuitCallback=this.onHandQuit.bind(this),this.collider.onStepCallback=this.onStep.bind(this),this.animCtrl.stand()},s.changeTransform=function(){this.collider&&this.collider.rigidBody?(this.isFixedTransfrom=!this.isFixedTransfrom,this.isFixedTransfrom?(this.node.getChildByName("Frame").active=!0,this.collider.rigidBody.lockTranslations(!0,!0),this.collider.setSpeed(n(0,0,0)),this.speed.x=0,this.speed.y=0,this.animCtrl.stand()):(this.node.getChildByName("Frame").active=!1,this.collider.rigidBody.lockTranslations(!1,!0)),this.gc.playAudioEffect("click_light1")):console.log("-----玩家物理组件尚未完成初始化----")},s.onHandEnter=function(e,t){var i=this;if(t.node.name.includes("EndDoor")&&(this.isInEndTigger=!0),t.node.name.includes("Save")&&this.node.getComponentsInChildren(l).forEach((function(e){if(e.node.active){i.playerIndex;e.saveStatus(0),i.autoSaveSet.has(t)||m.isCatchingFrame||console.log("自动存档"),i.autoSaveSet.add(t),console.log("-------------遇到存档点自动存档---------------")}})),t.node.name.includes("Obs")&&this.dead(50,!0),!this.isDead&&t.node.name.includes("Land")&&(0!=this.speed.x?(this.animCtrl.walk(),this.jumpFrameCount=0):this.animCtrl.stand()),t.node.name.includes("LargeTigger")?(console.log("qwerty---enter_large"),this.gc.playAudioEffect("click_light1"),this.isInBigTigger=!0):t.node.name.includes("SmallTigger")&&(console.log("qwerty---enter_small"),this.gc.playAudioEffect("click_light1"),this.isInSmallTigger=!0),!this.isDead)if(t.node.name.includes("EndKey")){if(this.hasEndKey)return;this.hasEndKey=!0,this.node.getChildByName("EndKey").active=!0,t.deleteFromWorld(),t.node.destroy(),o("Lands/EndDoor").getComponent(c).enabled=!0,this.gc.toast("终点已解锁"),this.gc.playAudioEffect("ding1")}else if(t.node.name.includes("GunTool")||t.node.name.includes("SpearTool")){if(this.hasGun)return;if(this.hasRope||this.hasGrivity)return void this.gc.playerToast("不可以同时拿取多个道具",this);this.hasGun=!0,t.node.name.includes("GunTool")?this.gunType=0:t.node.name.includes("SpearTool")&&(this.gunType=1),this.renderGun(),t.deleteFromWorld(),t.node.destroy(),this.gc.renderBts()}else if(t.node.name.includes("RopeTool")){if(this.hasRope)return;if(this.hasGrivity||this.hasGun)return void this.gc.playerToast("不可以同时拿取多个道具",this);this.hasRope=!0,t.deleteFromWorld(),t.node.destroy(),this.gc.renderBts()}else if(t.node.name.includes("GravityTool")){if(this.hasGrivity)return;if(this.hasRope||this.hasGun)return void this.gc.playerToast("不可以同时拿取多个道具",this);this.gc.isLimitSight=!1,this.hasGrivity=!0,t.deleteFromWorld(),t.node.destroy(),this.gc.renderBts()}else if(t.node.name.includes("DunHTool")){if(this.hasVDun)return;if(this.hasHDun)return;this.hasHDun=!0,this.renderDun(!0),t.deleteFromWorld(),t.node.destroy()}else if(t.node.name.includes("DunVTool")){if(this.hasHDun)return;if(this.hasVDun)return;this.hasVDun=!0,this.renderDun(!1),t.deleteFromWorld(),t.node.destroy()}else if(t.node.name.includes("TanChuang")){var s=this.getComponent(l).rigidBody.linvel();this.getComponent(l).setSpeed(n(s.x,0,0)),this.node.getComponent(l).addForce(0,5e3),this.gc.playAudioEffect("jump1",.3)}else if(t.node.name.includes("Shoes")){if(this.hasShoes)return;this.hasShoes=!0,t.deleteFromWorld(),t.node.destroy(),this.tagPathes.push("Canvas/Tags/Shoes"),this.gc.renderBts()}},s.renderDun=function(e){e?this.node.getChildByName("Spirte").getChildByName("HDun").active=!0:this.node.getChildByName("Spirte").getChildByName("VDun").active=!0},s.largeOrSamll=function(e){if(!(this.myHeight>=240&&0==e||this.myHeight<=40&&e)){if(e){if(this.smallCoolFrameCount>0)return void this.smallCoolFrameCount--;this.smallCoolFrameCount=1}var t=10,i=20;if(e&&(t=-10,i=-20),this.myWidth+=t,this.myHeight+=i,this.getComponent(l).collider.setHalfExtents({x:this.myWidth/2,y:this.myHeight/2}),this.getComponent(h).width=this.myWidth,this.getComponent(h).height=this.myHeight,this.node.scale=n(this.myHeight/100,this.myHeight/100,1),0==e){var s=this.getComponent(l).collider.translation();s.y+=i,this.getComponent(l).collider.setTranslation(s)}}},s.onHandQuit=function(e,t){t.node.name.includes("End")&&(this.isInEndTigger=!1),t.node.name.includes("Land")&&!this.isDead&&this.collider.isFixedByRope&&!this.isInWater&&(this.speed.x=0,this.jumpFrameCount<=0&&this.animCtrl.stand()),t.node.name.includes("LargeTigger")?(console.log("qwerty---quit_large"),this.gc.playAudioEffect("click_light1"),this.isInBigTigger=!1):t.node.name.includes("SmallTigger")&&(console.log("qwerty---quit_small"),this.gc.playAudioEffect("click_light1"),this.isInSmallTigger=!1)},s.onJoyStickEnd=function(){},s.move=function(e,t){},s.moveLeft=function(){this.isClickingLeft=!0,this.isDead||this.isFixedTransfrom||this.isPlayerFixedRopeInSky(-1)&&!this.isInWater||(this.speed.x=-5e3,this.dir=S.left,this.animCtrl.trunLeft(),this.animCtrl.walk(),this.jumpFrameCount=0)},s.moveRight=function(){this.isClickingRight=!0,this.isDead||this.isFixedTransfrom||this.isPlayerFixedRopeInSky(1)&&!this.isInWater||(this.speed.x=5e3,this.dir=S.right,this.animCtrl.trunRight(),this.animCtrl.walk(),this.jumpFrameCount=0)},s.isPlayerFixedRopeInSky=function(e){return!(!this.node.getComponent(l).isFixedByRope||!this.isSpiderInSky())&&(e>0?this.getComponent(l).addForce(400,100):this.getComponent(l).addForce(-400,100),!0)},s.stopMoveLeft=function(){this.isClickingLeft=!1,this.speed.x<0&&(this.speed.x=0,this.stopMoveX(),this.isDead||this.animCtrl.stand())},s.stopMoveX=function(){var e=this.getComponent(l).rigidBody.linvel();this.speed3.x=0,this.speed3.y=e.y,this.getComponent(l).setSpeed(this.speed3)},s.stopMoveRight=function(){this.isClickingRight=!1,this.speed.x>0&&(this.speed.x=0,this.stopMoveX(),this.isDead||this.animCtrl.stand())},s.getJumpForce=function(){return this.myHeight>=240?15*this.myHeight:this.myHeight>=220?14*this.myHeight:this.myHeight>=200?13*this.myHeight:this.myHeight>=180?12*this.myHeight:this.myHeight>=160?11*this.myHeight:this.myHeight>=140?10*this.myHeight:this.myHeight>=120?9*this.myHeight:this.myHeight>=100?8*this.myHeight:this.myHeight>=80?6*this.myHeight:this.myHeight>=60?4*this.myHeight:3*this.myHeight},s.jump=function(){if(!this.isDead&&!this.isFixedTransfrom){if(this.isSpiderInSky()){if(this.isInWater)return this.gc.playAudioEffect("jump1",.3),this.animCtrl.walk(),this.collider.addForce(0,this.getJumpForce()),void(this.jumpFrameCount=5);if(!this.hasShoes)return;if(this.isJumped)return;this.isJumped=!0}else this.isJumped=!1;this.speed.y=this.jumpPemeter+40*(this.myHeight-100),this.myHeight<=40&&(this.speed.y+=200),this.onStep(),this.speed.y=0,this.animCtrl.jump(),this.gc.playAudioEffect("jump1",.3),this.jumpFrameCount=20}},s.extend=function(){this.isDead||this.ropeCtrl.extend()},s.shorten=function(){this.isDead||this.ropeCtrl.shorten()},s.makeRope=function(e){this.isDead||this.ropeCtrl.makeRope(e)},s.deleteRope=function(){this.isDead||this.ropeCtrl.deleteRope()},s.onStep=function(){if(this.ropeCtrl.onStepCallback(),this.isFixedTransfrom&&this.gc&&(this.isClickingLeft?(y.getIns().trunLeft(),this.gc.setCameraRotation()):this.isClickingRight&&(y.getIns().trunRight(),this.gc.setCameraRotation())),0!=this.speed.x||0!=this.speed.y){this.isDead||this.getComponent(l).addForce(this.speed.x,this.speed.y);var e=this.getComponent(l).rigidBody.linvel();0==this.speed.x||this.isDead||(this.speed.x>0&&(this.speed2.x=this.isInWater?60:200),this.speed.x<0&&(this.speed2.x=this.isInWater?-60:-200),this.speed2.y=e.y,this.getComponent(l).setSpeed(this.speed2))}if(this.animCtrl.playAnim(),!this.isDead){this.jumpFrameCount>1?(this.jumpFrameCount--,this.animCtrl.jump()):1==this.jumpFrameCount&&(this.jumpFrameCount--,0!=this.speed.x?this.animCtrl.walk():this.animCtrl.stand()),this.gc.frameIndex%10==0&&(this.isInBigTigger?this.largeOrSamll(!1):this.isInSmallTigger&&this.largeOrSamll(!0));var t=!1,s=!1,n=null;this.getComponent(l).collisonSet.forEach((function(e){e.name.includes("ZhiZhu")?(t=!0,n=e):e.name.includes("RightTigger")||e.name.includes("LeftTigger")||e.name.includes("Rope")||e.rigidBody&&(s=!0)}));var o=this.getComponent(l).playerFriction;if(t&&!s){var h=n.rigidBody.translation().x,r=n.getComponent(i).myWidth,d=this.collider.rigidBody.translation().x;d<h-r/2||d>h+r/2?this.collider.collider.setFriction(0):this.collider.collider.setFriction(o)}else this.collider.collider.setFriction(o)}},s.dead=function(e,t){this.isDead||(this.gc.playAudioEffect("reborn",2),this.deadTimeCount++,this.deadCoolTime=e,this.isDead=!0,this.animCtrl.dead(),this.ropeCtrl.deleteRope(),this.otherPlayer.getComponent(g).anchorTarget==this.getComponent(l)&&this.otherPlayer.deleteRope())},s.revive=function(){console.log("---------------revive-----------------"),this.getComponentsInChildren(l).forEach((function(e){e.node.active&&e.rigidBody&&(e.rigidBody.setTranslation(e.savePosition,!0),e.rigidBody.setRotation(e.saveRotation,!0),e.setSpeed(n(0,0)))})),this.isDead=!1,this.animCtrl.stand()},s.isSpiderInSky=function(){var e=this,t=!0;return this.getComponent(l).collisonSet.forEach((function(i){if(!i.isDeleteFromWorld&&i.isRigidbody){var s=e.node.getComponent(l).rigidBody.translation().y,n=i.rigidBody.translation().y,o=i.node.getComponent(h).height/2;o=Math.round(o);var r=e.node.getComponent(h).height/2;if(r=Math.round(r)-4,(i.name.includes("Land")||i.name.includes("ZhiZhu"))&&n+o<s-r)return void(t=!1)}})),t},s.shoot=function(){console.log(this.speed.x),this.animCtrl.hasCubeOnLeft&&this.speed.x<0||this.animCtrl.hasCubeOnRight&&this.speed.x>0?console.log("正在推东西,无法发射"):0==this.gunType?this.shoot0():1==this.gunType&&this.shoot1()},s.shoot0=function(){if(!this.isDead)if(!this.bulletCtrl||this.bulletCtrl.isDisappeared){var e=this.node.getChildByName("Spirte").getChildByName("BulletIns"),t=this.node.getChildByName("Spirte").getChildByName("BulletPos"),i=r(e),s=i.getComponent(l);i.active=!0,i.parent=this.node.parent,i.addComponent(d),i.worldPosition=n(t.worldPosition.x,t.worldPosition.y,0),i.name="Bullt",s.load(),this.collider.addForce(this.dir==S.left?this.getJumpForce()/2:this.getJumpForce()/-2,0),i.getComponent(u).load(this.dir,this),this.bulletCtrl=i.getComponent(u)}else this.gc.playerToast("让子弹飞",this)},s.shoot1=function(){if(!this.isDead){for(var e=null,t=0,i=0;i<this.spears.length;i++){var s=this.spears[i];s&&!s.isDisappered&&(t++,e||(e=s))}t>=3&&e.disappear();var o=this.node.getChildByName("Spirte").getChildByName("SpearIns"),h=this.node.getChildByName("Spirte").getChildByName("SpearPos1");this.myHeight<50&&(h=this.node.getChildByName("Spirte").getChildByName("SpearPos2"));var a=r(o),m=a.getComponent(l);a.active=!0,a.parent=this.node.parent,a.addComponent(d),a.worldPosition=n(h.worldPosition.x,h.worldPosition.y,0),a.name="Spear-Land",m.load();var g=a.getChildByName("Node"),u=this.dir==S.left?-1:1;g.setScale(n(u,1,1)),this.collider.addForce(this.dir==S.left?this.getJumpForce()/2:this.getJumpForce()/-2,0),a.getComponent(C).load(this.dir,this),this.spears.push(a.getComponent(C))}},s.renderArrow=function(e){this.node.getChildByName("Arrow").active=e},s.renderGun=function(){this.hasGun?0==this.gunType?this.node.getChildByName("Spirte").getChildByName("Gun").active=!0:this.node.getChildByName("Spirte").getChildByName("SpearGun").active=!0:0==this.gunType?this.node.getChildByName("Spirte").getChildByName("Gun").active=!1:this.node.getChildByName("SpearGun").getChildByName("Gun").active=!1},i}(a))||f),e("PlayerDir",function(e){return e[e.left=0]="left",e[e.right=1]="right",e}({}))),B=e("ColorType",function(e){return e[e.yellow=0]="yellow",e[e.green=1]="green",e}({}));i._RF.pop()}}}));

System.register("chunks:///_virtual/TanChuangCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts"],(function(e){var t,r,i,n,p,a,o,s,l,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){p=e.cclegacy,a=e._decorator,o=e.SpriteFrame,s=e.Sprite},function(e){l=e.RapierBaseCollider},function(e){c=e.default}],execute:function(){var u,h,y,d,f,C,g,m,b,v,F;p._RF.push({},"ec6a6btaV9ErrkAUyWOqp46","TanChuangCtrl",void 0);var x=a.ccclass,z=a.property,T=a.requireComponent,w=a.executionOrder;e("TanChuangCtrl",(u=x("TanChuangCtrl"),h=T(l),y=w(2),d=z(o),f=z(o),C=z(o),u(g=h(g=y((b=t((m=function(e){function t(){for(var t,r=arguments.length,p=new Array(r),a=0;a<r;a++)p[a]=arguments[a];return(t=e.call.apply(e,[this].concat(p))||this).rc=void 0,t.gc=void 0,t.sp=void 0,i(t,"sp1",b,n(t)),i(t,"sp2",v,n(t)),i(t,"sp3",F,n(t)),t.type=0,t.index=0,t}r(t,e);var p=t.prototype;return p.onLoad=function(){var e=this;this.rc=this.getComponent(l),this.sp=this.getComponent(s),this.rc.onStepCallback=function(){e.index%5==0&&(e.type%4==0?e.sp.spriteFrame=e.sp1:e.type%4==1?e.sp.spriteFrame=e.sp2:e.type%4==2?e.sp.spriteFrame=e.sp3:e.type%4==3&&(e.sp.spriteFrame=e.sp2),e.type++)}},p.update=function(e){this.index++},t}(c)).prototype,"sp1",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(m.prototype,"sp2",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(m.prototype,"sp3",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=m))||g)||g)||g));p._RF.pop()}}}));

System.register("chunks:///_virtual/TestScript.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,o,n,i,c,u;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,n=t.AudioSource,i=t.find,c=t.Slider,u=t.Component}],execute:function(){var s;e._RF.push({},"87596P2r+tDaL9lq5bPpjjD","TestScript",void 0);var a=o.ccclass;o.property,t("TestScript",a("TestScript")(s=function(t){function e(){for(var r,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(r=t.call.apply(t,[this].concat(o))||this).audioSource=void 0,r}r(e,t);var o=e.prototype;return o.start=function(){this.audioSource=this.getComponent(n)},o.update=function(t){var r=i("Canvas/Slider").getComponent(c).progress;this.audioSource.volume=r},e}(u))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/TiggerGroupCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./GameCtrl.ts"],(function(e){var t,n,i,o,r,l,a,c,s,g,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Label,c=e.find,s=e.Sprite,g=e.Component},function(e){u=e.RapierBaseCollider},function(e){d=e.GameCtrl}],execute:function(){var h,p,C,f,m,y;r._RF.push({},"ad4dbWu9mJEj53lrg4t/biX","TiggerGroupCtrl",void 0);var b=l.ccclass,T=l.property,v=(l.requireComponent,l.executionOrder);e("TiggerGroupCtrl",(h=b("TiggerGroupCtrl"),p=v(2),C=T(Boolean),h(f=p((y=t((m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=e.call.apply(e,[this].concat(r))||this).rcs=[],t.gc=void 0,t.onEnterTiggerCount=0,t.isOn=!1,t.tool=void 0,t.label=void 0,i(t,"isDynamicAdd",y,o(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.isDynamicAdd||this.load()},r.load=function(){var e=this;this.label=this.node.getChildByName("ToolBg").getChildByName("Label").getComponent(a);for(var t=this.getComponentsInChildren(u),n=function(){var n=t[i];n.node.name.includes("Tigger")&&(e.rcs.push(n),n.onEnterCallback=function(){if(1==n.collisonSet.size){if(n.getComponent(s).enabled&&e.playAudio(),n.getComponent(s).enabled=!1,e.onEnterTiggerCount++,e.isOn)return;e.checkAllTiggerOn()}},n.onQuitCallback=function(){if(0==n.collisonSet.size){if(n.getComponent(s).enabled=!0,e.playAudio(),e.onEnterTiggerCount--,e.isOn)return;e.checkAllTiggerOn()}},n.onStepCallback=function(){n.collisonSet.forEach((function(e){e.isDeleteFromWorld&&(n.collisonSet.delete(e),n.onQuitCallback())}))}),n.node.name.includes("Tool")&&(e.tool=n)},i=0;i<t.length;i++)n();this.checkAllTiggerOn()},r.playAudio=function(){this.gc||(this.gc=c("Canvas").getComponent(d)),this.gc.playAudioEffect("click_light1")},r.checkAllTiggerOn=function(){this.label.string=this.onEnterTiggerCount+"/"+this.rcs.length,this.onEnterTiggerCount==this.rcs.length&&(this.isOn=!0,this.tool.load(),this.tool.getComponent(s).enabled=!0,this.node.getChildByName("ToolBg").active=!1,!this.gc&&c("Canvas")&&(this.gc=c("Canvas").getComponent(d),this.gc.toast("全部触发,已解锁新道具"),this.gc.playAudioEffect("coin_down1")))},t}(g)).prototype,"isDynamicAdd",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=m))||f)||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/TimeCubeCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RapierBaseCollider.ts","./BaseComponent.ts","./rapier.cjs.mjs_cjs=&original=.js","./GameCtrl.ts","./rapier.cjs.js"],(function(t){var i,e,s,n,a,o,r,l,c,d,h,p,u,g,y,C;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,r=t.v2,l=t.v3,c=t.find,d=t.Line,h=t.Label,p=t.Color},function(t){u=t.RapierBaseCollider},function(t){g=t.default},null,function(t){y=t.GameCtrl},function(t){C=t.default}],execute:function(){var f,m,b,v,B,T,x;a._RF.push({},"31300f56mdAeYG8bqr3rTRR","TimeCubeCtrl",void 0);var P=o.ccclass,R=o.property,F=o.requireComponent,L=o.executionOrder;t("TimeCubeCtrl",(f=P("TimeCubeCtrl"),m=F(u),b=L(2),v=R(Boolean),f(B=m(B=b((x=i((T=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(i=t.call.apply(t,[this].concat(a))||this).line=void 0,i.label=void 0,s(i,"isDynamicAdd",x,n(i)),i.rc=void 0,i.lastPos=r(0,0),i.path=[],i.path2=[],i.backingFrameCount=0,i.index=0,i.status=0,i.speed=l(0,0,0),i.staticPosY=1e4,i}e(i,t);var a=i.prototype;return a.onLoad=function(){this.isDynamicAdd||this.load()},a.getGc=function(){return c("Canvas")&&c("Canvas").getComponent(y)?c("Canvas").getComponent(y):null},a.load=function(){var t=this;this.rc=this.getComponent(u),this.line=this.node.getChildByName("Line").getComponent(d),this.label=this.node.getChildByName("Label").getComponent(h),this.rc.onStepCallback=function(){if(1e4==t.staticPosY&&(t.staticPosY=t.rc.rigidBody.translation().y),t.index++,!(t.index<100)){var i=t.rc.rigidBody.translation();if(i.y-t.staticPosY<-2e3||i.y-t.staticPosY>2e3)return t.rc.rigidBody.setBodyType(C.RigidBodyType.Fixed,!0),t.rc.rigidBody.setTranslation(r(22e3,23e3),!0),t.line.positions=[],void(t.line.node.active=!1);var e,s=Math.abs(t.lastPos.x-i.x)+Math.abs(t.lastPos.y-i.y);if(0==t.status){if(s>1&&(t.path.push(r(i.x,i.y+2)),t.index),t.path.length>=500)t.status=1,console.log("--------TimeCubeCtrl-1-------"),null==(e=t.getGc())||e.playAudioEffect("ding1"),t.rc.rigidBody.setBodyType(C.RigidBodyType.KinematicPositionBased,!0),t.backingFrameCount=0}else if(1==t.status)t.backingFrameCount>=200?(t.status=2,t.rc.setSpeed(t.speed),t.backingFrameCount=0,console.log("--------TimeCubeCtrl-2-------")):t.backingFrameCount++;else if(2==t.status)if(0==t.path.length){var n;t.rc.rigidBody.setBodyType(C.RigidBodyType.Dynamic,!0),t.status=0,t.rc.setSpeed(t.speed),t.staticPosY=i.y,console.log("--------TimeCubeCtrl-3-------"),null==(n=t.getGc())||n.playAudioEffect("ding1")}else{var a=t.path.pop();t.rc.rigidBody.setNextKinematicTranslation(a),t.index}t.lastPos=i,t.renderLine()}}},a.renderLine=function(){if(this.index%10==0)if(2==this.status?this.label.string="":1==this.status?(this.label.string=200-this.backingFrameCount+"",this.label.color=p.RED):0==this.status&&(this.label.string=501-this.path.length+"",this.label.color=p.WHITE),this.path&&this.path.length>1){this.path2=[];for(var t=0;t<this.path.length;t++)t%5==0&&this.path2.push(l(this.path[t].x,this.path[t].y));this.path2&&this.path2.length>1?(this.line.node.active=!0,this.line.positions=this.path2):(this.line.positions=[],this.line.node.active=!1)}else this.line.positions=[],this.line.node.active=!1},i}(g)).prototype,"isDynamicAdd",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=T))||B)||B)||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/TTBarPannelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BasePannelController.ts"],(function(n){var e,t,a,o,s;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,a=n._decorator,o=n.find},function(n){s=n.BasePannelController}],execute:function(){var r;t._RF.push({},"14f99gq7i9PkpdiPdfvLMgJ","TTBarPannelCtrl",void 0);var i=a.ccclass;a.property,n("TTBarPannelCtrl",i("TTBarPannelCtrl")(r=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var a=t.prototype;return a.start=function(){},a.show=function(){var n=this;this.showPannel(o("Canvas/TTBarPannel"),!0,!0),this.setButtonEvent(o("Canvas/TTBarPannel/Pannel/Ok"),(function(){globalThis.tt.navigateToScene({scene:"sidebar",success:function(n){console.log("navigate to scene success")},fail:function(n){console.log("navigate to scene fail: ",n)}}),n.hide()}))},a.hide=function(){this.hidePannel(o("Canvas/TTBarPannel"))},t}(s))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/WallComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./ObstaclesComp.ts"],(function(t){var e,o,i,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator},function(t){n=t.default},function(t){s=t.ObstaclesComp}],execute:function(){var l,r;o._RF.push({},"0df94TSpyNN+57CJPR3CqKq","WallComp",void 0);var a=i.ccclass;i.property,t("WallComp",a("WallComp")(((r=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.onLoad=function(){var t=[1e4,1e4,1e4,1e4];this.node.getChildByName("A")&&this.node.getChildByName("B")&&(t[0]=this.node.getChildByName("A").getWorldPosition().x,t[1]=this.node.getChildByName("A").getWorldPosition().y,t[2]=this.node.getChildByName("B").getWorldPosition().x,t[3]=this.node.getChildByName("B").getWorldPosition().y,s.obs.push(t))},o}(n)).obs=[],l=r))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/WallCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,n,e,o;return{setters:[function(t){r=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,o=t.Component}],execute:function(){var l;n._RF.push({},"887cehi/0dAV4ZbV3PbMUjo","WallCtrl",void 0);var c=e.ccclass;e.property,t("WallCtrl",c("WallCtrl")(l=function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var e=n.prototype;return e.start=function(){},e.update=function(t){},n}(o))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/WaveCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,a,p,s,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,p=e.Sprite,s=e.sys,l=e.Component}],execute:function(){var c,u,m,f,h,y;o._RF.push({},"b7665YJCdlCapYXGSHpU9HJ","WaveCtrl",void 0);var C=a.ccclass,v=a.property,d=a.requireComponent;e("WaveCtrl",(c=C("WaveCtrl"),u=d(p),m=v(Number),c(f=u((y=t((h=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).time=0,i(t,"permeter",y,n(t)),t}r(t,e);var o=t.prototype;return o.start=function(){s.platform==s.Platform.WECHAT_GAME?this.node.getComponent(p).materials[0].setProperty("permeter",.1):this.node.getComponent(p).materials[0].setProperty("permeter",1)},o.update=function(e){this.time+=1*e,this.node.getComponent(p).materials[0].setProperty("time",this.time*this.permeter)},t}(l)).prototype,"permeter",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=h))||f)||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/WxSceneCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./GameHelper.ts"],(function(e){var t,n,c,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,c=e._decorator},function(e){r=e.default},function(e){o=e.default}],execute:function(){var i;n._RF.push({},"591bbdTFN9Ow4HqEbNjpohi","WxSceneCtrl",void 0);var u=c.ccclass;c.property,e("WxSceneCtrl",u("WxSceneCtrl")(i=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var c=n.prototype;return c.start=function(){this.invoke((function(){o.exchangeScene("FirstScene")}),2)},c.update=function(e){},n}(r))||i);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});